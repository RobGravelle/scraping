/*
	Copyright (c) 2004-2010, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.window.getBox=function(){var a=dojo.doc.compatMode=="BackCompat"?dojo.body():dojo.doc.documentElement,b=dojo._docScroll();return{w:a.clientWidth,h:a.clientHeight,l:b.x,t:b.y}};dojo.window.get=function(a){if(dojo.isIE&&window!==document.parentWindow){a.parentWindow.execScript("document._parentWindow = window;","Javascript");var b=a._parentWindow;a._parentWindow=null;return b}return a.parentWindow||
a.defaultView};dojo.window.scrollIntoView=function(a,b){try{a=dojo.byId(a);var c=a.ownerDocument||dojo.doc,d=c.body||dojo.body(),e=c.documentElement||d.parentNode,f=dojo.isIE,g=dojo.isWebKit;if((!(dojo.isMoz||f||g||dojo.isOpera)||a==d||a==e)&&typeof a.scrollIntoView!="undefined")a.scrollIntoView(false);else{var h=c.compatMode=="BackCompat";c=h?d:e;g=g?d:c;var i=c.clientWidth,j=c.clientHeight,k=!dojo._isBodyLtr(),l=b||dojo.position(a),n=a.parentNode;c=function(v){return f<=6||f&&h?false:dojo.style(v,
"position").toLowerCase()=="fixed"};if(!c(a))for(;n;){if(n==d)n=g;var m=dojo.position(n),o=c(n);if(n==g){m.w=i;m.h=j;if(g==e&&f&&k)m.x+=g.offsetWidth-m.w;if(m.x<0||!f)m.x=0;if(m.y<0||!f)m.y=0}else{var q=dojo._getPadBorderExtents(n);m.w-=q.w;m.h-=q.h;m.x+=q.l;m.y+=q.t}if(n!=g){var p=n.clientWidth,r=m.w-p;if(p>0&&r>0){m.w=p;if(f&&k)m.x+=r}p=n.clientHeight;r=m.h-p;if(p>0&&r>0)m.h=p}if(o){if(m.y<0){m.h+=m.y;m.y=0}if(m.x<0){m.w+=m.x;m.x=0}if(m.y+m.h>j)m.h=j-m.y;if(m.x+m.w>i)m.w=i-m.x}var s=l.x-m.x,u=l.y-
Math.max(m.y,0),x=s+l.w-m.w,w=u+l.h-m.h;if(x*s>0){var t=Math[s<0?"max":"min"](s,x);l.x+=n.scrollLeft;n.scrollLeft+=f>=8&&!h&&k?-t:t;l.x-=n.scrollLeft}if(w*u>0){l.y+=n.scrollTop;n.scrollTop+=Math[u<0?"max":"min"](u,w);l.y-=n.scrollTop}n=n!=g&&!o&&n.parentNode}}}catch(y){console.error("scrollIntoView: "+y);a.scrollIntoView(false)}}}
if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(a){if(this._hash[a.id])throw Error("Tried to register widget with id=="+a.id+" but that id is already registered");this._hash[a.id]=a;this.length++},remove:function(a){if(this._hash[a]){delete this._hash[a];this.length--}},forEach:function(a,b){b=b||dojo.global;var c=0,d;
for(d in this._hash)a.call(b,this._hash[d],c++,this._hash);return this},filter:function(a,b){b=b||dojo.global;var c=new dijit.WidgetSet,d=0,e;for(e in this._hash){var f=this._hash[e];a.call(b,f,d++,this._hash)&&c.add(f)}return c},byId:function(a){return this._hash[a]},byClass:function(a){var b=new dijit.WidgetSet,c,d;for(c in this._hash){d=this._hash[c];d.declaredClass==a&&b.add(d)}return b},toArray:function(){var a=[],b;for(b in this._hash)a.push(this._hash[b]);return a},map:function(a,b){return dojo.map(this.toArray(),
a,b)},every:function(a,b){b=b||dojo.global;var c=0,d;for(d in this._hash)if(!a.call(b,this._hash[d],c++,this._hash))return false;return true},some:function(a,b){b=b||dojo.global;var c=0,d;for(d in this._hash)if(a.call(b,this._hash[d],c++,this._hash))return true;return false}});(function(){dijit.registry=new dijit.WidgetSet;var a=dijit.registry._hash,b=dojo.attr,c=dojo.hasAttr,d=dojo.style;dijit.byId=function(h){return typeof h=="string"?a[h]:h};var e={};dijit.getUniqueId=function(h){var i;do i=h+
"_"+(h in e?++e[h]:e[h]=0);while(a[i]);return dijit._scopeName=="dijit"?i:dijit._scopeName+"_"+i};dijit.findWidgets=function(h){function i(k){for(k=k.firstChild;k;k=k.nextSibling)if(k.nodeType==1){var l=k.getAttribute("widgetId");l?j.push(a[l]):i(k)}}var j=[];i(h);return j};dijit._destroyAll=function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];dojo.forEach(dijit.findWidgets(dojo.body()),function(h){if(!h._destroyed)if(h.destroyRecursive)h.destroyRecursive();else h.destroy&&
h.destroy()})};dojo.isIE&&dojo.addOnWindowUnload(function(){dijit._destroyAll()});dijit.byNode=function(h){return a[h.getAttribute("widgetId")]};dijit.getEnclosingWidget=function(h){for(;h;){var i=h.getAttribute&&h.getAttribute("widgetId");if(i)return a[i];h=h.parentNode}return null};var f=dijit._isElementShown=function(h){var i=d(h);return i.visibility!="hidden"&&i.visibility!="collapsed"&&i.display!="none"&&b(h,"type")!="hidden"};dijit.hasDefaultTabStop=function(h){switch(h.nodeName.toLowerCase()){case "a":return c(h,
"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":if(dojo.isMoz)try{return h.contentDocument.designMode=="on"}catch(i){return false}else if(dojo.isWebKit){var j=h.contentDocument,k=j&&j.body;return k&&k.contentEditable=="true"}else try{return(k=(j=h.contentWindow.document)&&j.body)&&k.firstChild&&k.firstChild.contentEditable=="true"}catch(l){return false}default:return h.contentEditable=="true"}};var g=dijit.isTabNavigable=function(h){return b(h,
"disabled")?false:c(h,"tabIndex")?b(h,"tabIndex")>=0:dijit.hasDefaultTabStop(h)};dijit._getTabNavigable=function(h){var i,j,k,l,n,m,o=function(q){dojo.query("> *",q).forEach(function(p){if(!(dojo.isIE&&p.scopeName!=="HTML"||!f(p))){if(g(p)){var r=b(p,"tabIndex");if(!c(p,"tabIndex")||r==0){i||(i=p);j=p}else if(r>0){if(!k||r<l){l=r;k=p}if(!n||r>=m){m=r;n=p}}}p.nodeName.toUpperCase()!="SELECT"&&o(p)}})};f(h)&&o(h);return{first:i,last:j,lowest:k,highest:n}};dijit.getFirstInTabbingOrder=function(h){h=
dijit._getTabNavigable(dojo.byId(h));return h.lowest?h.lowest:h.first};dijit.getLastInTabbingOrder=function(h){h=dijit._getTabNavigable(dojo.byId(h));return h.last?h.last:h.highest};dijit.defaultDuration=dojo.config.defaultDuration||200})()}
if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed},getBookmark:function(){var a,b,c=dojo.doc.selection,d=dijit._curFocus;if(dojo.global.getSelection){if(c=dojo.global.getSelection())if(c.isCollapsed){if(a=d?d.tagName:""){a=a.toLowerCase();if(a=="textarea"||a=="input"&&(!d.type||d.type.toLowerCase()=="text")){c={start:d.selectionStart,
end:d.selectionEnd,node:d,pRange:true};return{isCollapsed:c.end<=c.start,mark:c}}}a={isCollapsed:true}}else{b=c.getRangeAt(0);a={isCollapsed:false,mark:b.cloneRange()}}}else if(c){a=d?d.tagName:"";a=a.toLowerCase();if(d&&a&&(a=="button"||a=="textarea"||a=="input"))if(c.type&&c.type.toLowerCase()=="none")return{isCollapsed:true,mark:null};else{b=c.createRange();return{isCollapsed:b.text&&b.text.length?false:true,mark:{range:b,pRange:true}}}a={};try{b=c.createRange();a.isCollapsed=!(c.type=="Text"?
b.htmlText.length:b.length)}catch(e){a.isCollapsed=true;return a}if(c.type.toUpperCase()=="CONTROL")if(b.length){a.mark=[];c=0;for(d=b.length;c<d;)a.mark.push(b.item(c++))}else{a.isCollapsed=true;a.mark=null}else a.mark=b.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return a},moveToBookmark:function(a){var b=dojo.doc;if(a=a.mark)if(dojo.global.getSelection)if((b=dojo.global.getSelection())&&b.removeAllRanges)if(a.pRange){b=a.node;b.selectionStart=
a.start;b.selectionEnd=a.end}else{b.removeAllRanges();b.addRange(a)}else console.warn("No idea how to restore selection for this browser!");else if(b.selection&&a){var c;if(a.pRange)c=a.range;else if(dojo.isArray(a)){c=b.body.createControlRange();dojo.forEach(a,function(d){c.addElement(d)})}else{c=b.body.createTextRange();c.moveToBookmark(a)}c.select()}},getFocus:function(a,b){var c=!dijit._curFocus||a&&dojo.isDescendant(dijit._curFocus,a.domNode)?dijit._prevFocus:dijit._curFocus;return{node:c,bookmark:c==
dijit._curFocus&&dojo.withGlobal(b||dojo.global,dijit.getBookmark),openedForWindow:b}},focus:function(a){if(a){var b="node"in a?a.node:a,c=a.bookmark;a=a.openedForWindow;var d=c?c.isCollapsed:false;if(b){var e=b.tagName.toLowerCase()=="iframe"?b.contentWindow:b;if(e&&e.focus)try{e.focus()}catch(f){}dijit._onFocusNode(b)}if(c&&dojo.withGlobal(a||dojo.global,dijit.isCollapsed)&&!d){a&&a.focus();try{dojo.withGlobal(a||dojo.global,dijit.moveToBookmark,null,[c])}catch(g){}}}},_activeStack:[],registerIframe:function(a){return dijit.registerWin(a.contentWindow,
a)},unregisterIframe:function(a){dijit.unregisterWin(a)},registerWin:function(a,b){var c=function(i){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false},0);dojo.isIE&&i&&i.srcElement&&i.srcElement.parentNode==null||dijit._onTouchNode(b||i.target||i.srcElement,"mouse")},d=dojo.isIE?a.document.documentElement:a.document;if(d)if(dojo.isIE){d.attachEvent("onmousedown",c);var e=function(i){i.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(i.srcElement)?dijit._onFocusNode(b||
i.srcElement):dijit._onTouchNode(b||i.srcElement)};d.attachEvent("onactivate",e);var f=function(i){dijit._onBlurNode(b||i.srcElement)};d.attachEvent("ondeactivate",f);return function(){d.detachEvent("onmousedown",c);d.detachEvent("onactivate",e);d.detachEvent("ondeactivate",f);d=null}}else{d.addEventListener("mousedown",c,true);var g=function(i){dijit._onFocusNode(b||i.target)};d.addEventListener("focus",g,true);var h=function(i){dijit._onBlurNode(b||i.target)};d.addEventListener("blur",h,true);return function(){d.removeEventListener("mousedown",
c,true);d.removeEventListener("focus",g,true);d.removeEventListener("blur",h,true);d=null}}},unregisterWin:function(a){a&&a()},_onBlurNode:function(){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(!dijit._justMouseDowned){dijit._clearActiveWidgetsTimer&&clearTimeout(dijit._clearActiveWidgetsTimer);dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null},100)}},_onTouchNode:function(a,b){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);
delete dijit._clearActiveWidgetsTimer}var c=[];try{for(;a;){var d=dojo.attr(a,"dijitPopupParent");if(d)a=dijit.byId(d).domNode;else if(a.tagName&&a.tagName.toLowerCase()=="body"){if(a===dojo.body())break;a=dojo.window.get(a.ownerDocument).frameElement}else{var e=a.getAttribute&&a.getAttribute("widgetId"),f=e&&dijit.byId(e);f&&!(b=="mouse"&&f.get("disabled"))&&c.unshift(e);a=a.parentNode}}}catch(g){}dijit._setStack(c,b)},_onFocusNode:function(a){if(a)if(a.nodeType!=9){dijit._onTouchNode(a);if(a!=dijit._curFocus){if(dijit._curFocus)dijit._prevFocus=
dijit._curFocus;dijit._curFocus=a;dojo.publish("focusNode",[a])}}},_setStack:function(a,b){var c=dijit._activeStack;dijit._activeStack=a;for(var d=0;d<Math.min(c.length,a.length);d++)if(c[d]!=a[d])break;for(var e,f=c.length-1;f>=d;f--)if(e=dijit.byId(c[f])){e._focused=false;e._hasBeenBlurred=true;e._onBlur&&e._onBlur(b);dojo.publish("widgetBlur",[e,b])}for(f=d;f<a.length;f++)if(e=dijit.byId(a[f])){e._focused=true;e._onFocus&&e._onFocus(b);dojo.publish("widgetFocus",[e,b])}}});dojo.addOnLoad(function(){var a=
dijit.registerWin(window);dojo.isIE&&dojo.addOnWindowUnload(function(){dijit.unregisterWin(a);a=null})})}
if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(a){this.pairs=[];this.returnWrappers=a||false};dojo.extend(dojo.AdapterRegistry,{register:function(a,b,c,d,e){this.pairs[e?"unshift":"push"]([a,b,c,d])},match:function(){for(var a=0;a<this.pairs.length;a++){var b=this.pairs[a];if(b[1].apply(this,arguments))return b[3]||this.returnWrappers?b[2]:b[2].apply(this,arguments)}throw Error("No match found");
},unregister:function(a){for(var b=0;b<this.pairs.length;b++)if(this.pairs[b][0]==a){this.pairs.splice(b,1);return true}return false}})}
if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){return dojo.window.getBox()};dijit.placeOnScreen=function(a,b,c,d){c=dojo.map(c,function(e){var f={corner:e,pos:{x:b.x,y:b.y}};if(d){f.pos.x+=e.charAt(1)=="L"?d.x:-d.x;f.pos.y+=e.charAt(0)=="T"?d.y:-d.y}return f});return dijit._place(a,c)};dijit._place=function(a,b,c){var d=dojo.window.getBox();if(!a.parentNode||String(a.parentNode.tagName).toLowerCase()!=
"body")dojo.body().appendChild(a);var e=null;dojo.some(b,function(f){var g=f.corner,h=f.pos;c&&c(a,f.aroundCorner,g);var i=a.style,j=i.display,k=i.visibility;i.visibility="hidden";i.display="";var l=dojo.marginBox(a);i.display=j;i.visibility=k;i=Math.max(d.l,g.charAt(1)=="L"?h.x:h.x-l.w);j=Math.max(d.t,g.charAt(0)=="T"?h.y:h.y-l.h);k=Math.min(d.l+d.w,g.charAt(1)=="L"?i+l.w:h.x);var n=Math.min(d.t+d.h,g.charAt(0)=="T"?j+l.h:h.y);h=k-i;k=n-j;l=l.w-h+(l.h-k);if(e==null||l<e.overflow)e={corner:g,aroundCorner:f.aroundCorner,
x:i,y:j,w:h,h:k,overflow:l};return!l});a.style.left=e.x+"px";a.style.top=e.y+"px";e.overflow&&c&&c(a,e.aroundCorner,e.corner);return e};dijit.placeOnScreenAroundNode=function(a,b,c,d){b=dojo.byId(b);var e=b.style.display;b.style.display="";var f=dojo.position(b,true);b.style.display=e;return dijit._placeOnScreenAroundRect(a,f.x,f.y,f.w,f.h,c,d)};dijit.placeOnScreenAroundRectangle=function(a,b,c,d){return dijit._placeOnScreenAroundRect(a,b.x,b.y,b.width,b.height,c,d)};dijit._placeOnScreenAroundRect=
function(a,b,c,d,e,f,g){var h=[],i;for(i in f)h.push({aroundCorner:i,corner:f[i],pos:{x:b+(i.charAt(1)=="L"?0:d),y:c+(i.charAt(0)=="T"?0:e)}});return dijit._place(a,h,g)};dijit.placementRegistry=new dojo.AdapterRegistry;dijit.placementRegistry.register("node",function(a,b){return typeof b=="object"&&typeof b.offsetWidth!="undefined"&&typeof b.offsetHeight!="undefined"},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(a,b){return typeof b=="object"&&"x"in b&&"y"in b&&
"width"in b&&"height"in b},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments)};dijit.getPopupAroundAlignment=function(a,b){var c={};dojo.forEach(a,function(d){switch(d){case "after":c[b?"BR":"BL"]=b?"BL":"BR";break;case "before":c[b?"BL":"BR"]=b?"BR":"BL";break;case "below":c[b?"BL":"BR"]=b?"TL":"TR";c[b?"BR":"BL"]=b?"TR":"TL";break;default:c[b?"TL":"TR"]=b?"BL":"BR";c[b?"TR":"TL"]=b?"BR":"BL"}});
return c}}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(a){return dojo.window.get(a)}}
if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup={_stack:[],_beginZIndex:1E3,_idGen:1,moveOffScreen:function(a){var b=a.parentNode;if(!b||!dojo.hasClass(b,"dijitPopup")){b=dojo.create("div",{"class":"dijitPopup",style:{visibility:"hidden",top:"-9999px"}},dojo.body());dijit.setWaiRole(b,"presentation");b.appendChild(a)}a=a.style;a.display="";a.visibility="";a.position="";a.top="0px";dojo.style(b,{visibility:"hidden",
top:"-9999px"})},getTopPopup:function(){for(var a=this._stack,b=a.length-1;b>0&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(a){var b=this._stack,c=a.popup,d=a.orient||((a.parent?a.parent.isLeftToRight():dojo._isBodyLtr())?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"}),e=a.around,f=a.around&&a.around.id?a.around.id+"_dropdown":"popup_"+this._idGen++,g=c.domNode.parentNode;if(!g||!dojo.hasClass(g,"dijitPopup")){this.moveOffScreen(c.domNode);g=c.domNode.parentNode}dojo.attr(g,
{id:f,style:{zIndex:this._beginZIndex+b.length},"class":"dijitPopup "+(c.baseClass||c["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:a.parent?a.parent.id:""});if(dojo.isIE||dojo.isMoz){var h=g.childNodes[1];h||(h=new dijit.BackgroundIframe(g))}d=e?dijit.placeOnScreenAroundElement(g,e,d,c.orient?dojo.hitch(c,"orient"):null):dijit.placeOnScreen(g,a,d=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],a.padding);g.style.visibility="visible";c.domNode.style.visibility="visible";e=[];e.push(dojo.connect(g,
"onkeypress",this,function(i){if(i.charOrCode==dojo.keys.ESCAPE&&a.onCancel){dojo.stopEvent(i);a.onCancel()}else if(i.charOrCode===dojo.keys.TAB){dojo.stopEvent(i);if((i=this.getTopPopup())&&i.onCancel)i.onCancel()}}));c.onCancel&&e.push(dojo.connect(c,"onCancel",a.onCancel));e.push(dojo.connect(c,c.onExecute?"onExecute":"onChange",this,function(){var i=this.getTopPopup();if(i&&i.onExecute)i.onExecute()}));b.push({wrapper:g,iframe:h,widget:c,parent:a.parent,onExecute:a.onExecute,onCancel:a.onCancel,
onClose:a.onClose,handlers:e});if(c.onOpen)c.onOpen(d);return d},close:function(a){for(var b=this._stack;dojo.some(b,function(g){return g.widget==a});){var c=b.pop(),d=c.wrapper,e=c.widget,f=c.onClose;if(e.onClose)e.onClose();dojo.forEach(c.handlers,dojo.disconnect);e&&e.domNode?this.moveOffScreen(e.domNode):dojo.destroy(d);f&&f()}}};dijit._frames=new function(){var a=[];this.pop=function(){var b;if(a.length){b=a.pop();b.style.display=""}else{if(dojo.isIE){b="<iframe src='"+(dojo.config.dojoBlankHtmlUrl||
dojo.moduleUrl("dojo","resources/blank.html")+""||'javascript:""')+"' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>";b=dojo.doc.createElement(b)}else{b=dojo.create("iframe");b.src='javascript:""';b.className="dijitBackgroundIframe";dojo.style(b,"opacity",0.1)}b.tabIndex=-1;dijit.setWaiRole(b,"presentation")}return b};this.push=function(b){b.style.display="none";a.push(b)}};dijit.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(dojo.isIE||dojo.isMoz){var b=
dijit._frames.pop();a.appendChild(b);if(dojo.isIE<7){this.resize(a);this._conn=dojo.connect(a,"onresize",this,function(){this.resize(a)})}else dojo.style(b,{width:"100%",height:"100%"});this.iframe=b}};dojo.extend(dijit.BackgroundIframe,{resize:function(a){this.iframe&&dojo.isIE<7&&dojo.style(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){if(this._conn){dojo.disconnect(this._conn);this._conn=null}if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe}}})}
if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(a,b){dojo.window.scrollIntoView(a,b)}}
if(!dojo._hasResource["dojo.uacss"]){dojo._hasResource["dojo.uacss"]=true;dojo.provide("dojo.uacss");(function(){var a=dojo,b=a.doc.documentElement,c=a.isIE,d=a.isOpera,e=Math.floor,f=a.isFF,g=a.boxModel.replace(/-/,"");c={dj_ie:c,dj_ie6:e(c)==6,dj_ie7:e(c)==7,dj_ie8:e(c)==8,dj_quirks:a.isQuirks,dj_iequirks:c&&a.isQuirks,dj_opera:d,dj_khtml:a.isKhtml,dj_webkit:a.isWebKit,dj_safari:a.isSafari,dj_chrome:a.isChrome,dj_gecko:a.isMozilla,dj_ff3:e(f)==3};c["dj_"+g]=true;var h="",i;for(i in c)if(c[i])h+=
i+" ";b.className=a.trim(b.className+" "+h);dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){var j="dj_rtl dijitRtl "+h.replace(/ /g,"-rtl ");b.className=a.trim(b.className+" "+j)}})})()}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff")}
if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),
this._currentTimeout)},trigger:function(a,b,c,d,e,f,g,h){if(e!=this._obj){this.stop();this._initialDelay=g||500;this._subsequentDelay=f||0.9;this._minDelay=h||10;this._obj=e;this._evt=a;this._node=c;this._count=this._currentTimeout=-1;this._callback=dojo.hitch(b,d);this._fireEventAndReload();this._evt=dojo.mixin({faux:true},a)}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null}},addKeyListener:function(a,
b,c,d,e,f,g){if(b.keyCode){b.charOrCode=b.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0")}else if(b.charCode){b.charOrCode=String.fromCharCode(b.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0")}return[dojo.connect(a,"onkeypress",this,function(h){if(h.charOrCode==b.charOrCode&&(b.ctrlKey===undefined||b.ctrlKey==h.ctrlKey)&&
(b.altKey===undefined||b.altKey==h.altKey)&&(b.metaKey===undefined||b.metaKey==(h.metaKey||false))&&(b.shiftKey===undefined||b.shiftKey==h.shiftKey)){dojo.stopEvent(h);dijit.typematic.trigger(h,c,a,d,b,e,f,g)}else dijit.typematic._obj==b&&dijit.typematic.stop()}),dojo.connect(a,"onkeyup",this,function(){dijit.typematic._obj==b&&dijit.typematic.stop()})]},addMouseListener:function(a,b,c,d,e,f){var g=dojo.connect;return[g(a,"mousedown",this,function(h){dojo.stopEvent(h);dijit.typematic.trigger(h,b,
a,c,a,d,e,f)}),g(a,"mouseup",this,function(h){dojo.stopEvent(h);dijit.typematic.stop()}),g(a,"mouseout",this,function(h){dojo.stopEvent(h);dijit.typematic.stop()}),g(a,"mousemove",this,function(h){h.preventDefault()}),g(a,"dblclick",this,function(h){dojo.stopEvent(h);if(dojo.isIE){dijit.typematic.trigger(h,b,a,c,a,d,e,f);setTimeout(dojo.hitch(this,dijit.typematic.stop),50)}})]},addListener:function(a,b,c,d,e,f,g,h){return this.addKeyListener(b,c,d,e,f,g,h).concat(this.addMouseListener(a,d,e,f,g,h))}}}
if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var a=dojo.create("div",{id:"a11yTestNode",style:{cssText:'border: 1px solid;border-color:red green;position: absolute;height: 5px;top: -999px;background-image: url("'+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+'");'}},dojo.body()),b=dojo.getComputedStyle(a);if(b){var c=b.backgroundImage;dojo[b.borderTopColor==b.borderRightColor||
c!=null&&(c=="none"||c=="url(invalid-url:)")?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE)a.outerHTML="";else dojo.body().removeChild(a)}}};if(dojo.isIE||dojo.isMoz)dojo._loaders.unshift(dijit.wai.onload);dojo.mixin(dijit,{_XhtmlRoles:/banner|contentinfo|definition|main|navigation|search|note|secondary|seealso/,hasWaiRole:function(a,b){var c=this.getWaiRole(a);return b?c.indexOf(b)>-1:c.length>0},getWaiRole:function(a){return dojo.trim((dojo.attr(a,"role")||"").replace(this._XhtmlRoles,
"").replace("wairole:",""))},setWaiRole:function(a,b){var c=dojo.attr(a,"role")||"";if(this._XhtmlRoles.test(c)){if((" "+c+" ").indexOf(" "+b+" ")<0){var d=dojo.trim(c.replace(this._XhtmlRoles,""));c=dojo.trim(c.replace(d,""));dojo.attr(a,"role",c+(c?" ":"")+b)}}else dojo.attr(a,"role",b)},removeWaiRole:function(a,b){var c=dojo.attr(a,"role");if(c)if(b){c=dojo.trim((" "+c+" ").replace(" "+b+" "," "));dojo.attr(a,"role",c)}else a.removeAttribute("role")},hasWaiState:function(a,b){return a.hasAttribute?
a.hasAttribute("aria-"+b):!!a.getAttribute("aria-"+b)},getWaiState:function(a,b){return a.getAttribute("aria-"+b)||""},setWaiState:function(a,b,c){a.setAttribute("aria-"+b,c)},removeWaiState:function(a,b){a.removeAttribute("aria-"+b)}})}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base")}
if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.require("dijit._base");dojo.connect(dojo,"_connect",function(a,b){a&&dojo.isFunction(a._onConnect)&&a._onConnect(b)});dijit._connectOnUseEventHandler=function(){};dijit._lastKeyDownNode=null;dojo.isIE?function(){var a=function(b){dijit._lastKeyDownNode=b.srcElement};dojo.doc.attachEvent("onkeydown",a);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",a)})}():dojo.doc.addEventListener("keydown",
function(a){dijit._lastKeyDownNode=a.target},true);(function(){var a={},b=function(c){var d=c.declaredClass;if(!a[d]){var e=[],f;c=c.constructor.prototype;for(var g in c)if(dojo.isFunction(c[g])&&(f=g.match(/^_set([a-zA-Z]*)Attr$/))&&f[1])e.push(f[1].charAt(0).toLowerCase()+f[1].substr(1));a[d]=e}return a[d]||[]};dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"",
"class":"",style:"",title:""},_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,
onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(c,d){this.create(c,d)},create:function(c,d){this.srcNodeRef=dojo.byId(d);this._connects=[];this._subscribes=[];this._deferredConnects=dojo.clone(this._deferredConnects);for(var e in this.attributeMap)delete this._deferredConnects[e];
for(e in this._deferredConnects)this[e]!==dijit._connectOnUseEventHandler&&delete this._deferredConnects[e];if(this.srcNodeRef&&typeof this.srcNodeRef.id=="string")this.id=this.srcNodeRef.id;if(c){this.params=c;dojo.mixin(this,c)}this.postMixInProperties();if(!this.id)this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var f=this.srcNodeRef;f&&f.parentNode&&f.parentNode.replaceChild(this.domNode,f);
for(e in this.params)this._onConnect(e)}this.domNode&&this.domNode.setAttribute("widgetId",this.id);this.postCreate();this.srcNodeRef&&!this.srcNodeRef.parentNode&&delete this.srcNodeRef;this._created=true},_applyAttributes:function(){var c=function(e,f){if(f.params&&e in f.params||f[e])f.set(e,f[e])},d;for(d in this.attributeMap)c(d,this);dojo.forEach(b(this),function(e){e in this.attributeMap||c(e,this)},this)},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||
dojo.create("div")},postCreate:function(){if(this.baseClass){var c=this.baseClass.split(" ");this.isLeftToRight()||(c=c.concat(dojo.map(c,function(d){return d+"Rtl"})));dojo.addClass(this.domNode,c)}},startup:function(){this._started=true},destroyRecursive:function(c){this._beingDestroyed=true;this.destroyDescendants(c);this.destroy(c)},destroy:function(c){this._beingDestroyed=true;this.uninitialize();var d=dojo,e=d.forEach,f=d.unsubscribe;e(this._connects,function(g){e(g,d.disconnect)});e(this._subscribes,
function(g){f(g)});e(this._supportingWidgets||[],function(g){if(g.destroyRecursive)g.destroyRecursive();else g.destroy&&g.destroy()});this.destroyRendering(c);dijit.registry.remove(this.id);this._destroyed=true},destroyRendering:function(c){if(this.bgIframe){this.bgIframe.destroy(c);delete this.bgIframe}if(this.domNode){c?dojo.removeAttr(this.domNode,"widgetId"):dojo.destroy(this.domNode);delete this.domNode}if(this.srcNodeRef){c||dojo.destroy(this.srcNodeRef);delete this.srcNodeRef}},destroyDescendants:function(c){dojo.forEach(this.getChildren(),
function(d){d.destroyRecursive&&d.destroyRecursive(c)})},uninitialize:function(){return false},onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()},_onConnect:function(c){if(c in this._deferredConnects){this.connect(this[this._deferredConnects[c]||"domNode"],c.toLowerCase(),c);delete this._deferredConnects[c]}},_setClassAttr:function(c){var d=this[this.attributeMap["class"]||"domNode"];dojo.removeClass(d,this["class"]);this["class"]=c;dojo.addClass(d,
c)},_setStyleAttr:function(c){var d=this[this.attributeMap.style||"domNode"];if(dojo.isObject(c))dojo.style(d,c);else if(d.style.cssText)d.style.cssText+="; "+c;else d.style.cssText=c;this.style=c},setAttribute:function(c,d){dojo.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(c,d)},_attrToDom:function(c,d){var e=this.attributeMap[c];dojo.forEach(dojo.isArray(e)?e:[e],function(f){var g=this[f.node||f||"domNode"];switch(f.type||"attribute"){case "attribute":if(dojo.isFunction(d))d=
dojo.hitch(this,d);f=f.attribute?f.attribute:/^on[A-Z][a-zA-Z]*$/.test(c)?c.toLowerCase():c;dojo.attr(g,f,d);break;case "innerText":g.innerHTML="";g.appendChild(dojo.doc.createTextNode(d));break;case "innerHTML":g.innerHTML=d;break;case "class":dojo.removeClass(g,this[c]);dojo.addClass(g,d)}},this);this[c]=d},attr:function(c){if(dojo.config.isDebug){var d=arguments.callee._ach||(arguments.callee._ach={}),e=(arguments.callee.caller||"unknown caller").toString();if(!d[e]){dojo.deprecated(this.declaredClass+
"::attr() is deprecated. Use get() or set() instead, called from "+e,"","2.0");d[e]=true}}return arguments.length>=2||typeof c==="object"?this.set.apply(this,arguments):this.get(c)},get:function(c){var d=this._getAttrNames(c);return this[d.g]?this[d.g]():this[c]},set:function(c,d){if(typeof c==="object"){for(var e in c)this.set(e,c[e]);return this}e=this._getAttrNames(c);if(this[e.s])var f=this[e.s].apply(this,Array.prototype.slice.call(arguments,1));else{c in this.attributeMap&&this._attrToDom(c,
d);this[c]=d}return f||this},_attrPairNames:{},_getAttrNames:function(c){var d=this._attrPairNames;if(d[c])return d[c];var e=c.charAt(0).toUpperCase()+c.substr(1);return d[c]={n:c+"Node",s:"_set"+e+"Attr",g:"_get"+e+"Attr"}},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[]},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):
[]},nodesWithKeyClick:["input","button"],connect:function(c,d,e){var f=dojo,g=f._connect,h=[];if(d=="ondijitclick"){if(dojo.indexOf(this.nodesWithKeyClick,c.nodeName.toLowerCase())==-1){var i=f.hitch(this,e);h.push(g(c,"onkeydown",this,function(j){if((j.keyCode==f.keys.ENTER||j.keyCode==f.keys.SPACE)&&!j.ctrlKey&&!j.shiftKey&&!j.altKey&&!j.metaKey){dijit._lastKeyDownNode=j.target;j.preventDefault()}}),g(c,"onkeyup",this,function(j){if((j.keyCode==f.keys.ENTER||j.keyCode==f.keys.SPACE)&&j.target===
dijit._lastKeyDownNode&&!j.ctrlKey&&!j.shiftKey&&!j.altKey&&!j.metaKey){dijit._lastKeyDownNode=null;return i(j)}}))}d="onclick"}h.push(g(c,d,this,e));this._connects.push(h);return h},disconnect:function(c){for(var d=0;d<this._connects.length;d++)if(this._connects[d]==c){dojo.forEach(c,dojo.disconnect);this._connects.splice(d,1);break}},subscribe:function(c,d){var e=dojo.subscribe(c,this,d);this._subscribes.push(e);return e},unsubscribe:function(c){for(var d=0;d<this._subscribes.length;d++)if(this._subscribes[d]==
c){dojo.unsubscribe(c);this._subscribes.splice(d,1);break}},isLeftToRight:function(){return this.dir?this.dir=="ltr":dojo._isBodyLtr()},isFocusable:function(){return this.focus&&dojo.style(this.domNode,"display")!="none"},placeAt:function(c,d){c.declaredClass&&c.addChild?c.addChild(this,d):dojo.place(this.domNode,c,d);return this},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return true}})})()}
if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.rep=function(a,b){if(b<=0||!a)return"";for(var c=[];;){b&1&&c.push(a);if(!(b>>=1))break;a+=a}return c.join("")};dojo.string.pad=function(a,b,c,d){c||(c="0");a=String(a);b=dojo.string.rep(c,Math.ceil((b-a.length)/c.length));return d?a+b:b+a};dojo.string.substitute=function(a,b,c,d){d=d||dojo.global;c=c?dojo.hitch(d,c):function(e){return e};return a.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,
function(e,f,g){e=dojo.getObject(f,false,b);if(g)e=dojo.getObject(g,false,d).call(d,e,f);return c(e,f).toString()})};dojo.string.trim=String.prototype.trim?dojo.trim:function(a){a=a.replace(/^\s+/,"");for(var b=a.length-1;b>=0;b--)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a}}
if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(a,b){if(!dojo.date.stamp._isoRegExp)dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;var c=dojo.date.stamp._isoRegExp.exec(a),d=null;if(c){c.shift();c[1]&&c[1]--;if(c[6])c[6]*=1E3;if(b){b=new Date(b);dojo.forEach(dojo.map(["FullYear","Month","Date","Hours",
"Minutes","Seconds","Milliseconds"],function(g){return b["get"+g]()}),function(g,h){c[h]=c[h]||g})}d=new Date(c[0]||1970,c[1]||0,c[2]||1,c[3]||0,c[4]||0,c[5]||0,c[6]||0);if(c[0]<100)d.setFullYear(c[0]||1970);var e=0,f=c[7]&&c[7].charAt(0);if(f!="Z"){e=(c[8]||0)*60+(Number(c[9])||0);if(f!="-")e*=-1}if(f)e-=d.getTimezoneOffset();e&&d.setTime(d.getTime()+e*6E4)}return d};dojo.date.stamp.toISOString=function(a,b){var c=function(h){return h<10?"0"+h:h};b=b||{};var d=[],e=b.zulu?"getUTC":"get",f="";if(b.selector!=
"time"){f=a[e+"FullYear"]();f=["0000".substr((f+"").length)+f,c(a[e+"Month"]()+1),c(a[e+"Date"]())].join("-")}d.push(f);if(b.selector!="date"){f=[c(a[e+"Hours"]()),c(a[e+"Minutes"]()),c(a[e+"Seconds"]())].join(":");e=a[e+"Milliseconds"]();if(b.milliseconds)f+="."+(e<100?"0":"")+c(e);if(b.zulu)f+="Z";else if(b.selector!="time"){e=a.getTimezoneOffset();var g=Math.abs(e);f+=(e>0?"-":"+")+c(Math.floor(g/60))+":"+c(g%60)}d.push(f)}return d.join("T")}}
if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");dojo.parser=new function(){function a(f){if(d.isString(f))return"string";if(typeof f=="number")return"number";if(typeof f=="boolean")return"boolean";if(d.isFunction(f))return"function";if(d.isArray(f))return"array";if(f instanceof Date)return"date";if(f instanceof d._Url)return"url";return"object"}function b(f,g){switch(g){case "string":return f;case "number":return f.length?Number(f):NaN;case "boolean":return typeof f==
"boolean"?f:f.toLowerCase()!="false";case "function":if(d.isFunction(f)){f=f.toString();f=d.trim(f.substring(f.indexOf("{")+1,f.length-1))}try{return f===""||f.search(/[^\w\.]+/i)!=-1?new Function(f):d.getObject(f,false)||new Function(f)}catch(h){return new Function}case "array":return f?f.split(/\s*,\s*/):[];case "date":switch(f){case "":return new Date("");case "now":return new Date;default:return d.date.stamp.fromISOString(f)}case "url":return d.baseUrl+f;default:return d.fromJson(f)}}function c(f){if(!e[f]){var g=
d.getObject(f);if(!g)return null;var h=g.prototype,i={},j={},k;for(k in h)if(k.charAt(0)!="_")k in j||(i[k]=a(h[k]));e[f]={cls:g,params:i}}return e[f]}var d=dojo;this._attrName=d._scopeName+"Type";this._query="["+this._attrName+"]";var e={};dojo.connect(dojo,"extend",function(){e={}});this._functionFromScript=function(f){var g="",h="",i=f.getAttribute("args");i&&d.forEach(i.split(/\s*,\s*/),function(j,k){g+="var "+j+" = arguments["+k+"]; "});(i=f.getAttribute("with"))&&i.length&&d.forEach(i.split(/\s*,\s*/),
function(j){g+="with("+j+"){";h+="}"});return new Function(g+f.innerHTML+h)};this.instantiate=function(f,g,h){var i=[],j=dojo.parser;g=g||{};h=h||{};d.forEach(f,function(k){if(k){var l,n,m,o,q;if(k.node){l=k.node;n=k.type;o=(m=k.clsInfo||n&&c(n))&&m.cls;q=k.scripts}else{l=k;q=(o=(m=(n=j._attrName in g?g[j._attrName]:l.getAttribute(j._attrName))&&c(n))&&m.cls)&&(o._noScript||o.prototype._noScript)?[]:d.query("> script[type^='dojo/']",l)}if(!m)throw Error("Could not load class '"+n);var p={};n=l.attributes;
h.defaults&&dojo.mixin(p,h.defaults);k.inherited&&dojo.mixin(p,k.inherited);for(var r in m.params){k=r in g?{value:g[r],specified:true}:n.getNamedItem(r);if(!(!k||!k.specified&&(!dojo.isIE||r.toLowerCase()!="value"))){k=k.value;switch(r){case "class":k="className"in g?g.className:l.className;break;case "style":k="style"in g?g.style:l.style&&l.style.cssText}var s=m.params[r];p[r]=typeof k=="string"?b(k,s):k}}var u=[],x=[];d.forEach(q,function(t){l.removeChild(t);var y=t.getAttribute("event"),v=t.getAttribute("type");
t=d.parser._functionFromScript(t);if(y)if(v=="dojo/connect")u.push({event:y,func:t});else p[y]=t;else x.push(t)});var w=(m=o.markupFactory||o.prototype&&o.prototype.markupFactory)?m(p,l,o):new o(p,l);i.push(w);(o=l.getAttribute("jsId"))&&d.setObject(o,w);d.forEach(u,function(t){d.connect(w,t.event,null,t.func)});d.forEach(x,function(t){t.call(w)})}});g._started||d.forEach(i,function(k){if(!h.noStart&&k&&k.startup&&!k._started&&(!k.getParent||!k.getParent()))k.startup()});return i};this.parse=function(f,
g){function h(l,n){var m=dojo.clone(l.inherited);dojo.forEach(["dir","lang"],function(s){var u=l.node.getAttribute(s);if(u)m[s]=u});for(var o=l.scripts,q=!l.clsInfo||!l.clsInfo.cls.prototype.stopParser,p=l.node.firstChild;p;p=p.nextSibling)if(p.nodeType==1){var r=q&&p.getAttribute(j);if(r){r={type:r,clsInfo:c(r),node:p,scripts:[],inherited:m};n.push(r);h(r,n)}else if(o&&p.nodeName.toLowerCase()=="script")(r=p.getAttribute("type"))&&/^dojo\//i.test(r)&&o.push(p);else q&&h({node:p,inherited:m},n)}}
var i;if(!g&&f&&f.rootNode){g=f;i=g.rootNode}else i=f;var j=this._attrName,k=[];h({node:i?dojo.byId(i):dojo.body(),inherited:g&&g.inherited||{dir:dojo._isBodyLtr()?"ltr":"rtl"}},k);return this.instantiate(k,null,g)}};(function(){var a=function(){dojo.config.parseOnLoad&&dojo.parser.parse()};dojo.exists("dijit.wai.onload")&&dijit.wai.onload===dojo._loaders[0]?dojo._loaders.splice(1,0,a):dojo._loaders.unshift(a)})()}
if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=true;dojo.provide("dojo.cache");(function(){var a={};dojo.cache=function(b,c,d){if(typeof b=="string")b=dojo.moduleUrl(b,c);else d=c;c=b.toString();b=d;if(d!=undefined&&!dojo.isString(d))b="value"in d?d.value:undefined;d=d&&d.sanitize?true:false;if(typeof b=="string")b=a[c]=d?dojo.cache._sanitize(b):b;else if(b===null)delete a[c];else{if(!(c in a)){b=dojo._getText(c);a[c]=d?dojo.cache._sanitize(b):b}b=a[c]}return b};dojo.cache._sanitize=
function(b){if(b){b=b.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var c=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(c)b=c[1]}else b="";return b}})()}
if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[]},_stringRepl:function(a){var b=this.declaredClass,c=this;return dojo.string.substitute(a,this,function(d,e){if(e.charAt(0)=="!")d=dojo.getObject(e.substr(1),false,c);if(typeof d=="undefined")throw Error(b+
" template:"+e);if(d==null)return"";return e.charAt(0)=="!"?d:d.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){var a=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache),b;if(dojo.isString(a)){b=dojo._toDom(this._stringRepl(a));if(b.nodeType!=1)throw Error("Invalid template: "+a);}else b=a.cloneNode(true);this.domNode=b;this._attachTemplateNodes(b);if(this.widgetsInTemplate){a=dojo.parser;var c,d;if(a._query!="[dojoType]"){c=a._query;d=
a._attrName;a._query="[dojoType]";a._attrName="dojoType"}var e=this._startupWidgets=dojo.parser.parse(b,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}});if(c){a._query=c;a._attrName=d}this._supportingWidgets=dijit.findWidgets(b);this._attachTemplateNodes(e,function(f,g){return f[g]})}this._fillContent(this.srcNodeRef)},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)},_attachTemplateNodes:function(a,b){b=b||
function(j,k){return j.getAttribute(k)};for(var c=dojo.isArray(a)?a:a.all||a.getElementsByTagName("*"),d=dojo.isArray(a)?0:-1;d<c.length;d++){var e=d==-1?a:c[d];if(!(this.widgetsInTemplate&&b(e,"dojoType"))){var f=b(e,"dojoAttachPoint");if(f)for(var g=f.split(/\s*,\s*/);f=g.shift();){if(dojo.isArray(this[f]))this[f].push(e);else this[f]=e;this._attachPoints.push(f)}if(f=b(e,"dojoAttachEvent")){g=f.split(/\s*,\s*/);for(var h=dojo.trim;f=g.shift();)if(f){var i=null;if(f.indexOf(":")!=-1){i=f.split(":");
f=h(i[0]);i=h(i[1])}else f=h(f);i||(i=f);this.connect(e,f,i)}}(f=b(e,"waiRole"))&&dijit.setWaiRole(e,f);(f=b(e,"waiState"))&&dojo.forEach(f.split(/\s*,\s*/),function(j){if(j.indexOf("-")!=-1){j=j.split("-");dijit.setWaiState(e,j[0],j[1])}})}}},startup:function(){dojo.forEach(this._startupWidgets,function(a){a&&!a._started&&a.startup&&a.startup()});this.inherited(arguments)},destroyRendering:function(){dojo.forEach(this._attachPoints,function(a){delete this[a]},this);this._attachPoints=[];this.inherited(arguments)}});
dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(a,b,c){var d=dijit._Templated._templateCache,e=b||a,f=d[e];if(f){try{if(!f.ownerDocument||f.ownerDocument==dojo.doc)return f}catch(g){}dojo.destroy(f)}b||(b=dojo.cache(a,{sanitize:true}));b=dojo.string.trim(b);if(c||b.match(/\$\{([^\}]+)\}/g))return d[e]=b;else{a=dojo._toDom(b);if(a.nodeType!=1)throw Error("Invalid template: "+b);return d[e]=a}};dojo.isIE&&dojo.addOnWindowUnload(function(){var a=dijit._Templated._templateCache,
b;for(b in a){var c=a[b];typeof c=="object"&&dojo.destroy(c);delete a[b]}});dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""})}
if(!dojo._hasResource["dijit._CssStateMixin"]){dojo._hasResource["dijit._CssStateMixin"]=true;dojo.provide("dijit._CssStateMixin");dojo.declare("dijit._CssStateMixin",[],{cssStateNodes:{},postCreate:function(){this.inherited(arguments);dojo.forEach(["onmouseenter","onmouseleave","onmousedown"],function(b){this.connect(this.domNode,b,"_cssMouseEvent")},this);this.connect(this,"set",function(b){arguments.length>=2&&{disabled:true,readOnly:true,checked:true,selected:true}[b]&&this._setStateClass()});
dojo.forEach(["_onFocus","_onBlur"],function(b){this.connect(this,b,"_setStateClass")},this);for(var a in this.cssStateNodes)this._trackMouseState(this[a],this.cssStateNodes[a]);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled){switch(a.type){case "mouseenter":case "mouseover":this._hovering=true;this._active=this._mouseDown;break;case "mouseleave":case "mouseout":this._active=this._hovering=false;break;case "mousedown":this._mouseDown=this._active=true;var b=this.connect(dojo.body(),
"onmouseup",function(){this._mouseDown=this._active=false;this._setStateClass();this.disconnect(b)})}this._setStateClass()}},_setStateClass:function(){function a(g){b=b.concat(dojo.map(b,function(h){return h+g}),"dijit"+g)}var b=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");this.checked&&a("Checked");this.state&&a(this.state);this.selected&&a("Selected");if(this.disabled)a("Disabled");else if(this.readOnly)a("ReadOnly");else if(this._active)a("Active");else this._hovering&&a("Hover");this._focused&&
a("Focused");var c=this.stateNode||this.domNode,d={};dojo.forEach(c.className.split(" "),function(g){d[g]=true});"_stateClasses"in this&&dojo.forEach(this._stateClasses,function(g){delete d[g]});dojo.forEach(b,function(g){d[g]=true});var e=[],f;for(f in d)e.push(f);c.className=e.join(" ");this._stateClasses=b},_trackMouseState:function(a,b){function c(){var i="disabled"in g&&g.disabled||"readonly"in g&&g.readonly;dojo.toggleClass(a,b+"Hover",d&&!e&&!i);dojo.toggleClass(a,b+"Active",e&&!i);dojo.toggleClass(a,
b+"Focused",f&&!i)}var d=false,e=false,f=false,g=this,h=dojo.hitch(this,"connect",a);h("onmouseenter",function(){d=true;c()});h("onmouseleave",function(){e=d=false;c()});h("onmousedown",function(){e=true;c()});h("onmouseup",function(){e=false;c()});h("onfocus",function(){f=true;c()});h("onblur",function(){f=false;c()});this.connect(this,"set",function(i){if(i=="disabled"||i=="readOnly")c()})}})}
if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode",title:"focusNode"}),postMixInProperties:function(){this.nameAttrSetting=
this.name?'name="'+this.name.replace(/'/g,"&quot;")+'"':"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousedown","_onMouseDown")},_setDisabledAttr:function(a){this.disabled=a;dojo.attr(this.focusNode,"disabled",a);this.valueNode&&dojo.attr(this.valueNode,"disabled",a);dijit.setWaiState(this.focusNode,"disabled",a);if(a){this._active=this._hovering=false;a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"focusNode";dojo.forEach(dojo.isArray(a)?
a:[a],function(b){b=this[b];dojo.isWebKit||dijit.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)}else this.focusNode.setAttribute("tabIndex",this.tabIndex)},setDisabled:function(a){dojo.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",a)},_onFocus:function(){this.scrollOnFocus&&dojo.window.scrollIntoView(this.domNode);this.inherited(arguments)},isFocusable:function(){return!this.disabled&&!this.readOnly&&
this.focusNode&&dojo.style(this.domNode,"display")!="none"},focus:function(){dijit.focus(this.focusNode)},compare:function(a,b){return typeof a=="number"&&typeof b=="number"?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:false,_handleOnChange:function(a,b){this._lastValue=a;if(this._lastValueReported==undefined&&(b===null||!this._onChangeActive))this._resetValue=this._lastValueReported=a;if((this.intermediateChanges||b||b===undefined)&&(typeof a!=typeof this._lastValueReported||
this.compare(a,this._lastValueReported)!=0)){this._lastValueReported=a;if(this._onChangeActive){this._onChangeHandle&&clearTimeout(this._onChangeHandle);this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(a)}),0)}}},create:function(){this.inherited(arguments);this._onChangeActive=true},destroy:function(){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);this.onChange(this._lastValueReported)}this.inherited(arguments)},setValue:function(a){dojo.deprecated("dijit.form._FormWidget:setValue("+
a+") is deprecated.  Use set('value',"+a+") instead.","","2.0");this.set("value",a)},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_onMouseDown:function(a){if(!a.ctrlKey&&this.isFocusable())var b=this.connect(dojo.body(),"onmouseup",function(){this.isFocusable()&&this.focus();this.disconnect(b)})}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,
{value:"",readOnly:"focusNode"}),_setReadOnlyAttr:function(a){this.readOnly=a;dojo.attr(this.focusNode,"readOnly",a);dijit.setWaiState(this.focusNode,"readonly",a)},postCreate:function(){this.inherited(arguments);if(dojo.isIE)this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);if(this._resetValue===undefined)this._resetValue=this.value},_setValueAttr:function(a,b){this.value=a;this._handleOnChange(a,b)},_getValueAttr:function(){return this._lastValue},undo:function(){this._setValueAttr(this._lastValueReported,
false)},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true)},_onKeyDown:function(a){if(a.keyCode==dojo.keys.ESCAPE&&!(a.ctrlKey||a.altKey||a.metaKey)){var b;if(dojo.isIE){a.preventDefault();b=document.createEventObject();b.keyCode=dojo.keys.ESCAPE;b.shiftKey=a.shiftKey;a.srcElement.fireEvent("onkeypress",b)}}},_layoutHackIE7:function(){if(dojo.isIE==7)for(var a=this.domNode,b=a.parentNode,c=a.firstChild||a,d=c.style.filter,e=this;b&&b.clientHeight==0;){(function(){var f=
e.connect(b,"onscroll",function(){e.disconnect(f);c.style.filter=(new Date).getMilliseconds();setTimeout(function(){c.style.filter=d},0)})})();b=b.parentNode}}})}
if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");dojo.declare("dijit._Container",null,{isContainer:true,buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode},addChild:function(a,b){var c=this.containerNode;if(b&&typeof b=="number"){var d=this.getChildren();if(d&&d.length>=b){c=d[b-1].domNode;b="after"}}dojo.place(a.domNode,c,b);this._started&&!a._started&&a.startup()},removeChild:function(a){if(typeof a==
"number"&&a>0)a=this.getChildren()[a];if(a)(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},hasChildren:function(){return this.getChildren().length>0},destroyDescendants:function(a){dojo.forEach(this.getChildren(),function(b){b.destroyRecursive(a)})},_getSiblingOfChild:function(a,b){var c=a.domNode,d=b>0?"nextSibling":"previousSibling";do c=c[d];while(c&&(c.nodeType!=1||!dijit.byNode(c)));return c&&dijit.byNode(c)},getIndexOfChild:function(a){return dojo.indexOf(this.getChildren(),a)},startup:function(){if(!this._started){dojo.forEach(this.getChildren(),
function(a){a.startup()});this.inherited(arguments)}}})}
if(!dojo._hasResource["dijit._HasDropDown"]){dojo._hasResource["dijit._HasDropDown"]=true;dojo.provide("dijit._HasDropDown");dojo.declare("dijit._HasDropDown",null,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(){if(!(this.disabled||this.readOnly)){this._docHandler=this.connect(dojo.doc,"onmouseup","_onDropDownMouseUp");this.toggleDropDown()}},
_onDropDownMouseUp:function(a){a&&this._docHandler&&this.disconnect(this._docHandler);var b=this.dropDown,c=false;if(a&&this._opened){var d=dojo.position(this._buttonNode,true);if(!(a.pageX>=d.x&&a.pageX<=d.x+d.w)||!(a.pageY>=d.y&&a.pageY<=d.y+d.h)){for(d=a.target;d&&!c;)if(dojo.hasClass(d,"dijitPopup"))c=true;else d=d.parentNode;if(c){d=a.target;if(b.onItemClick){for(var e;d&&!(e=dijit.byNode(d));)d=d.parentNode;if(e&&e.onClick&&e.getParent)e.getParent().onItemClick(e,a)}return}}}this._opened&&b.focus&&
window.setTimeout(dojo.hitch(b,"focus"),1)},_onDropDownClick:function(a){this._stopClickEvents&&dojo.stopEvent(a)},_setupDropdown:function(){this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;this._aroundNode=this._aroundNode||this.domNode;this.connect(this._buttonNode,"onmousedown","_onDropDownMouseDown");this.connect(this._buttonNode,"onclick","_onDropDownClick");this.connect(this._buttonNode,"onkeydown","_onDropDownKeydown");
this.connect(this._buttonNode,"onkeyup","_onKey");if(this._setStateClass){this.connect(this,"openDropDown","_setStateClass");this.connect(this,"closeDropDown","_setStateClass")}var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";dojo.addClass(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this._setupDropdown();
this.inherited(arguments)},destroyDescendants:function(){if(this.dropDown){this.dropDown._destroyed||this.dropDown.destroyRecursive();delete this.dropDown}this.inherited(arguments)},_onDropDownKeydown:function(a){if(a.keyCode==dojo.keys.DOWN_ARROW||a.keyCode==dojo.keys.ENTER||a.keyCode==dojo.keys.SPACE)a.preventDefault()},_onKey:function(a){if(!(this.disabled||this.readOnly)){var b=this.dropDown;if(b&&this._opened&&b.handleKey)if(b.handleKey(a)===false)return;if(b&&this._opened&&a.keyCode==dojo.keys.ESCAPE)this.toggleDropDown();
else if(b&&!this._opened&&(a.keyCode==dojo.keys.DOWN_ARROW||a.keyCode==dojo.keys.ENTER||a.keyCode==dojo.keys.SPACE)){this.toggleDropDown();b.focus&&setTimeout(dojo.hitch(b,"focus"),1)}}},_onBlur:function(){this.closeDropDown();this.inherited(arguments)},isLoaded:function(){return true},loadDropDown:function(a){a()},toggleDropDown:function(){if(!(this.disabled||this.readOnly)){this.focus();if(this.dropDown)if(this._opened)this.closeDropDown();else this.isLoaded()?this.openDropDown():this.loadDropDown(dojo.hitch(this,
"openDropDown"))}},openDropDown:function(){var a=this.dropDown,b=a.domNode,c=this;if(!this._preparedNode){dijit.popup.moveOffScreen(b);this._preparedNode=true;if(b.style.width)this._explicitDDWidth=true;if(b.style.height)this._explicitDDHeight=true}if(this.maxHeight||this.forceWidth||this.autoWidth){var d={display:"",visibility:"hidden"};if(!this._explicitDDWidth)d.width="";if(!this._explicitDDHeight)d.height="";dojo.style(b,d);d=dojo.marginBox(b);var e=this.maxHeight&&d.h>this.maxHeight;dojo.style(b,
{overflowX:"hidden",overflowY:e?"auto":"hidden"});if(e){d.h=this.maxHeight;if("w"in d)d.w+=16}else delete d.h;delete d.t;delete d.l;if(this.forceWidth)d.w=this.domNode.offsetWidth;else if(this.autoWidth)d.w=Math.max(d.w,this.domNode.offsetWidth);else delete d.w;dojo.isFunction(a.resize)?a.resize(d):dojo.marginBox(b,d)}a=dijit.popup.open({parent:this,popup:a,around:this._aroundNode,orient:dijit.getPopupAroundAlignment(this.dropDownPosition&&this.dropDownPosition.length?this.dropDownPosition:["below"],
this.isLeftToRight()),onExecute:function(){c.closeDropDown(true)},onCancel:function(){c.closeDropDown(true)},onClose:function(){dojo.attr(c._popupStateNode,"popupActive",false);dojo.removeClass(c._popupStateNode,"dijitHasDropDownOpen");c._opened=false;c.state=""}});dojo.attr(this._popupStateNode,"popupActive","true");dojo.addClass(c._popupStateNode,"dijitHasDropDownOpen");this._opened=true;this.state="Opened";return a},closeDropDown:function(a){if(this._opened){a&&this.focus();dijit.popup.close(this.dropDown);
this._opened=false;this.state=""}}})}
if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:dojo.cache("dijit.form","templates/Button.html",'<span class="dijit dijitReset dijitInline"\r\n\t><span class="dijitReset dijitInline dijitButtonNode"\r\n\t\tdojoAttachEvent="ondijitclick:_onButtonClick"\r\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdojoAttachPoint="titleNode,focusNode"\r\n\t\t\twaiRole="button" waiState="labelledby-${id}_label"\r\n\t\t\t><span class="dijitReset dijitInline dijitIcon" dojoAttachPoint="iconNode"></span\r\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\r\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid="${id}_label"\r\n\t\t\t\tdojoAttachPoint="containerNode"\r\n\t\t\t></span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\r\n\t\tdojoAttachPoint="valueNode"\r\n/></span>\r\n'),attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,
{value:"valueNode",iconClass:{node:"iconNode",type:"class"}}),_onClick:function(a){if(this.disabled)return false;this._clicked();return this.onClick(a)},_onButtonClick:function(a){if(this._onClick(a)===false)a.preventDefault();else if(this.type=="submit"&&!(this.valueNode||this.focusNode).form)for(var b=this.domNode;b.parentNode;b=b.parentNode){var c=dijit.byNode(b);if(c&&typeof c._onSubmit=="function"){c._onSubmit(a);break}}else if(this.valueNode){this.valueNode.click();a.preventDefault()}},_fillContent:function(a){if(a&&
(!this.params||!("label"in this.params)))this.set("label",a.innerHTML)},postCreate:function(){dojo.setSelectable(this.focusNode,false);this.inherited(arguments)},_setShowLabelAttr:function(a){this.containerNode&&dojo.toggleClass(this.containerNode,"dijitDisplayNone",!a);this.showLabel=a},onClick:function(){return true},_clicked:function(){},setLabel:function(a){dojo.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},_setLabelAttr:function(a){this.containerNode.innerHTML=
this.label=a;if(this.showLabel==false&&!this.params.title)this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"")}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container,dijit._HasDropDown],{baseClass:"dijitDropDownButton",templateString:dojo.cache("dijit.form","templates/DropDownButton.html",'<span class="dijit dijitReset dijitInline"\r\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdojoAttachEvent="ondijitclick:_onButtonClick" dojoAttachPoint="_buttonNode"\r\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdojoAttachPoint="focusNode,titleNode,_arrowWrapperNode"\r\n\t\t\twaiRole="button" waiState="haspopup-true,labelledby-${id}_label"\r\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdojoAttachPoint="iconNode"\r\n\t\t\t></span\r\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdojoAttachPoint="containerNode,_popupStateNode"\r\n\t\t\t\tid="${id}_label"\r\n\t\t\t></span\r\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\r\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\r\n\t\tdojoAttachPoint="valueNode"\r\n/></span>\r\n'),
_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(a);delete this.dropDownContainer}dijit.popup.moveOffScreen(this.dropDown.domNode);this.inherited(arguments)}},isLoaded:function(){var a=this.dropDown;return!a.href||a.isLoaded},
loadDropDown:function(){var a=this.dropDown;if(a)if(this.isLoaded())this.openDropDown();else{var b=dojo.connect(a,"onLoad",this,function(){dojo.disconnect(b);this.openDropDown()});a.refresh()}},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:dojo.cache("dijit.form","templates/ComboButton.html",'<table class="dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing=\'0\' cellpadding=\'0\' waiRole="presentation"\r\n\t><tbody waiRole="presentation"><tr waiRole="presentation"\r\n\t\t><td class="dijitReset dijitStretch dijitButtonNode" dojoAttachPoint="buttonNode" dojoAttachEvent="ondijitclick:_onButtonClick,onkeypress:_onButtonKeyPress"\r\n\t\t><div id="${id}_button" class="dijitReset dijitButtonContents"\r\n\t\t\tdojoAttachPoint="titleNode"\r\n\t\t\twaiRole="button" waiState="labelledby-${id}_label"\r\n\t\t\t><div class="dijitReset dijitInline dijitIcon" dojoAttachPoint="iconNode" waiRole="presentation"></div\r\n\t\t\t><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode" waiRole="presentation"></div\r\n\t\t></div\r\n\t\t></td\r\n\t\t><td id="${id}_arrow" class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdojoAttachPoint="_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdojoAttachEvent="onkeypress:_onArrowKeyPress"\r\n\t\t\ttitle="${optionsTitle}"\r\n\t\t\twaiRole="button" waiState="haspopup-true"\r\n\t\t\t><div class="dijitReset dijitArrowButtonInner" waiRole="presentation"></div\r\n\t\t\t><div class="dijitReset dijitArrowButtonChar" waiRole="presentation">&#9660;</div\r\n\t\t></td\r\n\t\t><td style="display:none !important;"\r\n\t\t\t><input ${!nameAttrSetting} type="${type}" value="${value}" dojoAttachPoint="valueNode"\r\n\t\t/></td></tr></tbody\r\n></table>\r\n'),
attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{id:"",tabIndex:["focusNode","titleNode"],title:"titleNode"}),optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyPress:function(a){if(a.charOrCode==dojo.keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){dijit.focus(this._popupStateNode);dojo.stopEvent(a)}},_onArrowKeyPress:function(a){if(a.charOrCode==
dojo.keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){dijit.focus(this.titleNode);dojo.stopEvent(a)}},focus:function(a){dijit.focus(a=="start"?this.titleNode:this._popupStateNode)}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:false,attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(){this.set("checked",!this.checked)},_setCheckedAttr:function(a,b){this.checked=a;dojo.attr(this.focusNode||
this.domNode,"checked",a);dijit.setWaiState(this.focusNode||this.domNode,"pressed",a);this._handleOnChange(a,b)},setChecked:function(a){dojo.deprecated("setChecked("+a+") is deprecated. Use set('checked',"+a+") instead.","","2.0");this.set("checked",a)},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false)}})}
if(!dojo._hasResource["dijit._editor._Plugin"]){dojo._hasResource["dijit._editor._Plugin"]=true;dojo.provide("dijit._editor._Plugin");dojo.declare("dijit._editor._Plugin",null,{constructor:function(a){this.params=a||{};dojo.mixin(this,this.params);this._connects=[]},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:dijit.form.Button,getLabel:function(a){return this.editor.commands[a]},_initButton:function(){if(this.command.length){var a=this.getLabel(this.command),
b=this.editor,c=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button)this.button=new this.buttonClass(dojo.mixin({label:a,dir:b.dir,lang:b.lang,showLabel:false,iconClass:c,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}))}},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);this.dropDown&&this.dropDown.destroyRecursive()},connect:function(a,b,c){this._connects.push(dojo.connect(a,b,this,c))},updateState:function(){var a=
this.editor,b=this.command,c,d;if(!(!a||!a.isLoaded||!b.length))if(this.button)try{d=a.queryCommandEnabled(b);if(this.enabled!==d){this.enabled=d;this.button.set("disabled",!d)}if(typeof this.button.checked=="boolean"){c=a.queryCommandState(b);if(this.checked!==c){this.checked=c;this.button.set("checked",a.queryCommandState(b))}}}catch(e){console.log(e)}},setEditor:function(a){this.editor=a;this._initButton();if(this.button&&this.useDefaultCommand)if(this.editor.queryCommandAvailable(this.command))this.connect(this.button,
"onClick",dojo.hitch(this.editor,"execCommand",this.command,this.commandArg));else this.button.domNode.style.display="none";this.connect(this.editor,"onNormalizedDisplayChanged","updateState")},setToolbar:function(a){this.button&&a.addChild(this.button)}})}
if(!dojo._hasResource["dijit._editor.range"]){dojo._hasResource["dijit._editor.range"]=true;dojo.provide("dijit._editor.range");dijit.range={};dijit.range.getIndex=function(a,b){for(var c=[],d=[],e=a,f,g;a!=b;){var h=0;for(f=a.parentNode;g=f.childNodes[h++];)if(g===a){--h;break}c.unshift(h);d.unshift(h-f.childNodes.length);a=f}if(c.length>0&&e.nodeType==3){for(g=e.previousSibling;g&&g.nodeType==3;){c[c.length-1]--;g=g.previousSibling}for(g=e.nextSibling;g&&g.nodeType==3;){d[d.length-1]++;g=g.nextSibling}}return{o:c,
r:d}};dijit.range.getNode=function(a,b){if(!dojo.isArray(a)||a.length==0)return b;var c=b;dojo.every(a,function(d){if(d>=0&&d<c.childNodes.length)c=c.childNodes[d];else{c=null;return false}return true});return c};dijit.range.getCommonAncestor=function(a,b,c){c=c||a.ownerDocument.body;var d=function(g){for(var h=[];g;){h.unshift(g);if(g!==c)g=g.parentNode;else break}return h};a=d(a);b=d(b);d=Math.min(a.length,b.length);for(var e=a[0],f=1;f<d;f++)if(a[f]===b[f])e=a[f];else break;return e};dijit.range.getAncestor=
function(a,b,c){for(c=c||a.ownerDocument.body;a&&a!==c;){var d=a.nodeName.toUpperCase();if(b.test(d))return a;a=a.parentNode}return null};dijit.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;dijit.range.getBlockAncestor=function(a,b,c){c=c||a.ownerDocument.body;b=b||dijit.range.BlockTagNames;for(var d=null,e;a&&a!==c;){var f=a.nodeName.toUpperCase();if(!d&&b.test(f))d=a;if(!e&&/^(?:BODY|TD|TH|CAPTION)$/.test(f))e=a;a=a.parentNode}return{blockNode:d,blockContainer:e||
a.ownerDocument.body}};dijit.range.atBeginningOfContainer=function(a,b,c){var d=false,e=c==0;if(!e&&b.nodeType==3)if(/^[\s\xA0]+$/.test(b.nodeValue.substr(0,c)))e=true;if(e)for(d=true;b&&b!==a;){if(b.previousSibling){d=false;break}b=b.parentNode}return d};dijit.range.atEndOfContainer=function(a,b,c){var d=false,e=c==(b.length||b.childNodes.length);if(!e&&b.nodeType==3)if(/^[\s\xA0]+$/.test(b.nodeValue.substr(c)))e=true;if(e)for(d=true;b&&b!==a;){if(b.nextSibling){d=false;break}b=b.parentNode}return d};
dijit.range.adjacentNoneTextNode=function(a,b){for(var c=a,d=0-a.length||0,e=b?"nextSibling":"previousSibling";c;){if(c.nodeType!=3)break;d+=c.length;c=c[e]}return[c,d]};dijit.range._w3c=Boolean(window.getSelection);dijit.range.create=function(a){return dijit.range._w3c?(a||dojo.global).document.createRange():new dijit.range.W3CRange};dijit.range.getSelection=function(a,b){if(dijit.range._w3c)return a.getSelection();else{var c=new dijit.range.ie.selection(a);b||c._getCurrentSelection();return c}};
if(!dijit.range._w3c){dijit.range.ie={cachedSelection:{},selection:function(a){this._ranges=[];this.addRange=function(b,c){this._ranges.push(b);c||b._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(b){return this._ranges[b]};this._getCurrentSelection=function(){this.removeAllRanges();var b;b=a.document.selection.createRange();(b=a.document.selection.type.toUpperCase()=="CONTROL"?new dijit.range.W3CRange(dijit.range.ie.decomposeControlRange(b)):
new dijit.range.W3CRange(dijit.range.ie.decomposeTextRange(b)))&&this.addRange(b,true)}},decomposeControlRange:function(a){var b=a.item(0),c=a.item(a.length-1);a=b.parentNode;var d=c.parentNode;b=dijit.range.getIndex(b,a).o;c=dijit.range.getIndex(c,d).o+1;return[a,b,d,c]},getEndPoint:function(a,b){var c=a.duplicate();c.collapse(!b);var d="EndTo"+(b?"End":"Start"),e=c.parentElement(),f,g,h;if(e.childNodes.length>0)dojo.every(e.childNodes,function(j,k){var l;if(j.nodeType!=3){c.moveToElementText(j);
if(c.compareEndPoints(d,a)>0)if(h&&h.nodeType==3){f=h;l=true}else{f=e;g=k;return false}else if(k==e.childNodes.length-1){f=e;g=e.childNodes.length;return false}}else if(k==e.childNodes.length-1){f=j;l=true}if(l&&f){f=(l=dijit.range.adjacentNoneTextNode(f)[0])?l.nextSibling:e.firstChild;var n=dijit.range.adjacentNoneTextNode(f);l=n[0];n=n[1];if(l){c.moveToElementText(l);c.collapse(false)}else c.moveToElementText(e);c.setEndPoint(d,a);g=c.text.length-n;return false}h=j;return true});else{f=e;g=0}if(!b&&
f.nodeType==1&&g==f.childNodes.length){var i=f.nextSibling;if(i&&i.nodeType==3){f=i;g=0}}return[f,g]},setEndPoint:function(a,b,c){a=a.duplicate();var d;if(b.nodeType!=3)if(c>0){if(d=b.childNodes[c-1])if(d.nodeType==3){b=d;c=d.length}else if(d.nextSibling&&d.nextSibling.nodeType==3){b=d.nextSibling;c=0}else{a.moveToElementText(d.nextSibling?d:b);var e=d.parentNode;d=e.insertBefore(d.ownerDocument.createTextNode(" "),d.nextSibling);a.collapse(false);e.removeChild(d)}}else{a.moveToElementText(b);a.collapse(true)}if(b.nodeType==
3){d=dijit.range.adjacentNoneTextNode(b);e=d[0];d=d[1];if(e){a.moveToElementText(e);a.collapse(false);e.contentEditable!="inherit"&&d++}else{a.moveToElementText(b.parentNode);a.collapse(true)}c+=d;c>0&&a.move("character",c)!=c&&console.error("Error when moving!")}return a},decomposeTextRange:function(a){var b=dijit.range.ie.getEndPoint(a),c=b[0],d=b[1],e=b[0];b=b[1];if(a.htmlText.length)if(a.htmlText==a.text)b=d+a.text.length;else{b=dijit.range.ie.getEndPoint(a,true);e=b[0];b=b[1]}return[c,d,e,b]},
setRange:function(a,b,c,d,e,f){b=dijit.range.ie.setEndPoint(a,b,c);a.setEndPoint("StartToStart",b);if(!f)var g=dijit.range.ie.setEndPoint(a,d,e);a.setEndPoint("EndToEnd",g||b);return a}};dojo.declare("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3])}else{this.startContainer=this.commonAncestorContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true}},
_updateInternal:function(){this.commonAncestorContainer=this.startContainer!==this.endContainer?dijit.range.getCommonAncestor(this.startContainer,this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(a,b){b=parseInt(b);if(!(this.startContainer===a&&this.startOffset==b)){delete this._cachedBookmark;this.startContainer=a;this.startOffset=b;this.endContainer?this._updateInternal():this.setEnd(a,b)}},setEnd:function(a,
b){b=parseInt(b);if(!(this.endContainer===a&&this.endOffset==b)){delete this._cachedBookmark;this.endContainer=a;this.endOffset=b;this.startContainer?this._updateInternal():this.setStart(a,b)}},setStartAfter:function(a,b){this._setPoint("setStart",a,b,1)},setStartBefore:function(a,b){this._setPoint("setStart",a,b,0)},setEndAfter:function(a,b){this._setPoint("setEnd",a,b,1)},setEndBefore:function(a,b){this._setPoint("setEnd",a,b,0)},_setPoint:function(a,b,c,d){c=dijit.range.getIndex(b,b.parentNode).o;
this[a](b.parentNode,c.pop()+d)},_getIERange:function(){var a=(this._body||this.endContainer.ownerDocument.body).createTextRange();dijit.range.ie.setRange(a,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return a},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){this._getIERange().pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;
this.collapsed=true},cloneRange:function(){var a=new dijit.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);a._body=this._body;return a},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true}})}}
if(!dojo._hasResource["dijit._editor.selection"]){dojo._hasResource["dijit._editor.selection"]=true;dojo.provide("dijit._editor.selection");dojo.mixin(dijit._editor.selection,{getType:function(){if(dojo.isIE)return dojo.doc.selection.type.toLowerCase();else{var a="text",b;try{b=dojo.global.getSelection()}catch(c){}if(b&&b.rangeCount==1){b=b.getRangeAt(0);if(b.startContainer==b.endContainer&&b.endOffset-b.startOffset==1&&b.startContainer.nodeType!=3)a="control"}return a}},getSelectedText:function(){if(dojo.isIE){if(dijit._editor.selection.getType()==
"control")return null;return dojo.doc.selection.createRange().text}else{var a=dojo.global.getSelection();if(a)return a.toString()}return""},getSelectedHtml:function(){if(dojo.isIE){if(dijit._editor.selection.getType()=="control")return null;return dojo.doc.selection.createRange().htmlText}else{var a=dojo.global.getSelection();if(a&&a.rangeCount){var b,c="";for(b=0;b<a.rangeCount;b++){var d=a.getRangeAt(b).cloneContents(),e=dojo.doc.createElement("div");e.appendChild(d);c+=e.innerHTML}return c}return null}},
getSelectedElement:function(){if(dijit._editor.selection.getType()=="control")if(dojo.isIE){var a=dojo.doc.selection.createRange();if(a&&a.item)return dojo.doc.selection.createRange().item(0)}else{a=dojo.global.getSelection();return a.anchorNode.childNodes[a.anchorOffset]}return null},getParentElement:function(){if(dijit._editor.selection.getType()=="control"){var a=this.getSelectedElement();if(a)return a.parentNode}else if(dojo.isIE){a=dojo.doc.selection.createRange();a.collapse(true);return a.parentElement()}else if(a=
dojo.global.getSelection()){for(a=a.anchorNode;a&&a.nodeType!=1;)a=a.parentNode;return a}return null},hasAncestorElement:function(){return this.getAncestorElement.apply(this,arguments)!=null},getAncestorElement:function(){return this.getParentOfType(this.getSelectedElement()||this.getParentElement(),arguments)},isTag:function(a,b){if(a&&a.tagName)for(var c=a.tagName.toLowerCase(),d=0;d<b.length;d++){var e=String(b[d]).toLowerCase();if(c==e)return e}return""},getParentOfType:function(a,b){for(;a;){if(this.isTag(a,
b).length)return a;a=a.parentNode}return null},collapse:function(a){if(window.getSelection){var b=dojo.global.getSelection();if(b.removeAllRanges)a?b.collapseToStart():b.collapseToEnd();else b.collapse(a)}else if(dojo.isIE){b=dojo.doc.selection.createRange();b.collapse(a);b.select()}},remove:function(){var a=dojo.doc.selection;if(dojo.isIE)a.type.toLowerCase()!="none"&&a.clear();else{a=dojo.global.getSelection();a.deleteFromDocument()}return a},selectElementChildren:function(a,b){var c=dojo.global,
d=dojo.doc;a=dojo.byId(a);if(d.selection&&dojo.isIE&&dojo.body().createTextRange){d=a.ownerDocument.body.createTextRange();d.moveToElementText(a);if(!b)try{d.select()}catch(e){}}else if(c.getSelection){c=dojo.global.getSelection();if(dojo.isOpera){d=c.rangeCount?c.getRangeAt(0):d.createRange();d.setStart(a,0);d.setEnd(a,a.nodeType==3?a.length:a.childNodes.length);c.addRange(d)}else c.selectAllChildren(a)}},selectElement:function(a,b){var c,d=dojo.doc,e=dojo.global;a=dojo.byId(a);if(dojo.isIE&&dojo.body().createTextRange)try{c=
dojo.body().createControlRange();c.addElement(a);b||c.select()}catch(f){this.selectElementChildren(a,b)}else if(dojo.global.getSelection){e=e.getSelection();c=d.createRange();if(e.removeAllRanges){if(dojo.isOpera)if(e.getRangeAt(0))c=e.getRangeAt(0);c.selectNode(a);e.removeAllRanges();e.addRange(c)}}},inSelection:function(a){if(a){var b,c=dojo.doc,d;if(dojo.global.getSelection){var e=dojo.global.getSelection();if(e&&e.rangeCount>0)d=e.getRangeAt(0);if(d&&d.compareBoundaryPoints&&c.createRange)try{b=
c.createRange();b.setStart(a,0);if(d.compareBoundaryPoints(d.START_TO_END,b)===1)return true}catch(f){}}else if(c.selection){d=c.selection.createRange();try{(b=a.ownerDocument.body.createControlRange())&&b.addElement(a)}catch(g){try{b=a.ownerDocument.body.createTextRange();b.moveToElementText(a)}catch(h){}}if(d&&b)if(d.compareEndPoints("EndToStart",b)===1)return true}}return false}})}
if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(a,b){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(c){if(b&&b.indexOf(c)!=-1)return c;return"\\"+c})};dojo.regexp.buildGroupRE=function(a,b,c){if(!(a instanceof Array))return b(a);for(var d=[],e=0;e<a.length;e++)d.push(b(a[e]));return dojo.regexp.group(d.join("|"),c)};dojo.regexp.group=function(a,b){return"("+(b?"?:":"")+a+")"}}
if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.data.util.sorter.basicComparator=function(a,b){var c=-1;if(a===null)a=undefined;if(b===null)b=undefined;if(a==b)c=0;else if(a>b||a==null)c=1;return c};dojo.data.util.sorter.createSortFunction=function(a,b){function c(k,l,n,m){return function(o,q){var p=m.getValue(o,k),r=m.getValue(q,k);return l*n(p,r)}}for(var d=[],e,f=b.comparatorMap,g=dojo.data.util.sorter.basicComparator,
h=0;h<a.length;h++){e=a[h];var i=e.attribute;if(i){e=e.descending?-1:1;var j=g;if(f){if(typeof i!=="string"&&"toString"in i)i=i.toString();j=f[i]||g}d.push(c(i,e,j,b))}}return function(k,l){for(var n=0;n<d.length;){var m=d[n++](k,l);if(m!==0)return m}return 0}}}
if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.data.util.simpleFetch.fetch=function(a){a=a||{};if(!a.store)a.store=this;var b=this;this._fetchItems(a,function(c,d){var e=d.abort||null,f=false,g=d.start?d.start:0,h=d.count&&d.count!==Infinity?g+d.count:c.length;d.abort=function(){f=true;e&&e.call(d)};var i=d.scope||dojo.global;if(!d.store)d.store=b;d.onBegin&&d.onBegin.call(i,c.length,d);d.sort&&
c.sort(dojo.data.util.sorter.createSortFunction(d.sort,b));if(d.onItem)for(var j=g;j<c.length&&j<h;++j){var k=c[j];f||d.onItem.call(i,k,d)}if(d.onComplete&&!f){j=null;d.onItem||(j=c.slice(g,h));d.onComplete.call(i,j,d)}},function(c,d){if(d.onError)d.onError.call(d.scope||dojo.global,c,d)});return a}}
if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.data.util.filter.patternToRegExp=function(a,b){for(var c="^",d=null,e=0;e<a.length;e++){d=a.charAt(e);switch(d){case "\\":c+=d;e++;c+=a.charAt(e);break;case "*":c+=".*";break;case "?":c+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":c+="\\";default:c+=d}}c+="$";return b?RegExp(c,"mi"):RegExp(c,
"m")}}
if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.i18n.getLocalization=function(a,b,c){c=dojo.i18n.normalizeLocale(c);var d=c.split("-"),e=[a,"nls",b].join(".");if(e=dojo._loadedModules[e]){for(var f,g=d.length;g>0;g--){var h=d.slice(0,g).join("_");if(e[h]){f=e[h];break}}if(!f)f=e.ROOT;if(f){a=function(){};a.prototype=f;return new a}}throw Error("Bundle not found: "+b+" in "+a+" , locale="+c);};dojo.i18n.normalizeLocale=function(a){a=a?a.toLowerCase():dojo.locale;
if(a=="root")a="ROOT";return a};dojo.i18n._requireLocalization=function(a,b,c,d){c=dojo.i18n.normalizeLocale(c);var e=[a,"nls",b].join("."),f="";if(d){for(var g=d.split(","),h=0;h<g.length;h++)if(c.indexOf(g[h])==0)if(g[h].length>f.length)f=g[h];f||(f="ROOT")}g=d?f:c;var i=dojo._loadedModules[e];h=null;if(i){if(dojo.config.localizationComplete&&i._built)return;h=g.replace(/-/g,"_");h=dojo._loadedModules[e+"."+h]}if(!h){i=dojo.provide(e);var j=dojo._getModuleSymbols(a).concat("nls").join("/"),k;dojo.i18n._searchLocalePath(g,
d,function(l){var n=l.replace(/-/g,"_"),m=e+"."+n,o=false;if(dojo._loadedModules[m])o=true;else{dojo.provide(m);m=[j];l!="ROOT"&&m.push(l);m.push(b);l=m.join("/")+".js";o=dojo._loadPath(l,null,function(q){var p=function(){};p.prototype=k;i[n]=new p;for(var r in q)i[n][r]=q[r]})}if(o&&i[n])k=i[n];else i[n]=k;if(d)return true})}if(d&&c!=f)i[c.replace(/-/g,"_")]=i[f.replace(/-/g,"_")]};(function(){var a=dojo.config.extraLocale;if(a){if(!a instanceof Array)a=[a];var b=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=
function(c,d,e,f){b(c,d,e,f);if(!e)for(e=0;e<a.length;e++)b(c,d,a[e],f)}}})();dojo.i18n._searchLocalePath=function(a,b,c){a=dojo.i18n.normalizeLocale(a);var d=a.split("-");a=[];for(var e=d.length;e>0;e--)a.push(d.slice(0,e).join("-"));a.push(false);b&&a.reverse();for(b=a.length-1;b>=0;b--)if(c(a[b]||"ROOT"))break};dojo.i18n._preloadLocalizations=function(a,b){function c(f){f=dojo.i18n.normalizeLocale(f);dojo.i18n._searchLocalePath(f,true,function(g){for(var h=0;h<b.length;h++)if(b[h]==g){dojo.require(a+
"_"+g);return true}return false})}c();for(var d=dojo.config.extraLocale||[],e=0;e<d.length;e++)c(d[e])}}
if(!dojo._hasResource["dijit.form.TextBox"]){dojo._hasResource["dijit.form.TextBox"]=true;dojo.provide("dijit.form.TextBox");dojo.declare("dijit.form.TextBox",dijit.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",templateString:dojo.cache("dijit.form","templates/TextBox.html",'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" waiRole="presentation"\r\n\t><div class="dijitReset dijitInputField dijitInputContainer"\r\n\t\t><input class="dijitReset dijitInputInner" dojoAttachPoint=\'textbox,focusNode\' autocomplete="off"\r\n\t\t\t${!nameAttrSetting} type=\'${type}\'\r\n\t/></div\r\n></div>\r\n'),_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" dojoAttachPoint="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',
_buttonInputDisabled:dojo.isIE?"disabled":"",baseClass:"dijitTextBox",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{maxLength:"focusNode"}),postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString.toLowerCase()=="input"||(a=="hidden"||a=="file")&&this.templateString==dijit.form.TextBox.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},_setPlaceHolderAttr:function(a){this.placeHolder=a;if(!this._phspan){this._attachPoints.push("_phspan");
this._phspan=dojo.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after")}this._phspan.innerHTML="";this._phspan.appendChild(document.createTextNode(a));this._updatePlaceHolder()},_updatePlaceHolder:function(){if(this._phspan)this._phspan.style.display=this.placeHolder&&!this._focused&&!this.textbox.value?"":"none"},_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var d;if(a!==undefined){d=this.filter(a);
if(typeof c!="string")c=d!==null&&(typeof d!="number"||!isNaN(d))?this.filter(this.format(d,this.constraints)):""}if(c!=null&&c!=undefined&&(typeof c!="number"||!isNaN(c))&&this.textbox.value!=c)this.textbox.value=c;this._updatePlaceHolder();this.inherited(arguments,[d,b])},displayedValue:"",getDisplayedValue:function(){dojo.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use set('displayedValue') instead.","","2.0");return this.get("displayedValue")},_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},
setDisplayedValue:function(a){dojo.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",a)},_setDisplayedValueAttr:function(a){if(a===null||a===undefined)a="";else if(typeof a!="string")a=String(a);this.textbox.value=a;this._setValueAttr(this.get("value"),undefined,a)},format:function(a){return a==null||a==undefined?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},_onInput:function(a){if(a&&
a.type&&/key/i.test(a.type)&&a.keyCode)switch(a.keyCode){case dojo.keys.SHIFT:case dojo.keys.ALT:case dojo.keys.CTRL:case dojo.keys.TAB:return}if(this.intermediateChanges){var b=this;setTimeout(function(){b._handleOnChange(b.get("value"),false)},0)}this._refreshState()},postCreate:function(){if(dojo.isIE){var a=dojo.getComputedStyle(this.domNode);if(a)if(a=a.fontFamily){var b=this.domNode.getElementsByTagName("INPUT");if(b)for(var c=0;c<b.length;c++)b[c].style.fontFamily=a}}this.textbox.setAttribute("value",
this.textbox.value);this.inherited(arguments);if(dojo.isMoz||dojo.isOpera)this.connect(this.textbox,"oninput",this._onInput);else{this.connect(this.textbox,"onkeydown",this._onInput);this.connect(this.textbox,"onkeyup",this._onInput);this.connect(this.textbox,"onpaste",this._onInput);this.connect(this.textbox,"oncut",this._onInput)}},_blankValue:"",filter:function(a){if(a===null)return this._blankValue;if(typeof a!="string")return a;if(this.trim)a=dojo.trim(a);if(this.uppercase)a=a.toUpperCase();
if(this.lowercase)a=a.toLowerCase();if(this.propercase)a=a.replace(/[^\s]+/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)});return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),true)},_onBlur:function(){if(!this.disabled){this._setBlurValue();this.inherited(arguments);this._selectOnClickHandle&&this.disconnect(this._selectOnClickHandle);if(this.selectOnClick&&dojo.isMoz)this.textbox.selectionStart=this.textbox.selectionEnd=undefined;this._updatePlaceHolder()}},
_onFocus:function(a){if(!(this.disabled||this.readOnly)){if(this.selectOnClick&&a=="mouse")this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);var b;if(dojo.isIE){b=dojo.doc.selection.createRange();b=b.parentElement()==this.textbox&&b.text.length==0}else b=this.textbox.selectionStart==this.textbox.selectionEnd;b&&dijit.selectInputText(this.textbox)});this._updatePlaceHolder();this._refreshState();this.inherited(arguments)}},reset:function(){this.textbox.value=
"";this.inherited(arguments)}});dijit.selectInputText=function(a,b,c){var d=dojo.global,e=dojo.doc;a=dojo.byId(a);if(isNaN(b))b=0;if(isNaN(c))c=a.value?a.value.length:0;dijit.focus(a);if(e.selection&&dojo.body().createTextRange){if(a.createTextRange){a=a.createTextRange();with(a){collapse(true);moveStart("character",-99999);moveStart("character",b);moveEnd("character",c-b);select()}}}else d.getSelection&&a.setSelectionRange&&a.setSelectionRange(b,c)}}
if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:dojo.cache("dijit","templates/Tooltip.html",'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip">\r\n\t<div class="dijitTooltipContainer dijitTooltipContents" dojoAttachPoint="containerNode" waiRole=\'alert\'></div>\r\n\t<div class="dijitTooltipConnector"></div>\r\n</div>\r\n'),
postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")})},show:function(a,b,c,d){if(!(this.aroundNode&&this.aroundNode===b))if(this.fadeOut.status()=="playing")this._onDeck=arguments;else{this.containerNode.innerHTML=a;dijit.placeOnScreenAroundElement(this.domNode,
b,dijit.getPopupAroundAlignment(c&&c.length?c:dijit.Tooltip.defaultPosition,!d),dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=b}},orient:function(a,b,c){a.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+
"-"+c]},_onShow:function(){if(dojo.isIE)this.domNode.style.filter=""},hide:function(a){if(this._onDeck&&this._onDeck[1]==a)this._onDeck=null;else if(this.aroundNode===a){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play()}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null}}});dijit.showTooltip=function(a,b,c,d){if(!dijit._masterTT)dijit._masterTT=new dijit._MasterTooltip;
return dijit._masterTT.show(a,b,c,d)};dijit.hideTooltip=function(a){if(!dijit._masterTT)dijit._masterTT=new dijit._MasterTooltip;return dijit._masterTT.hide(a)};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],constructor:function(){this._nodeConnectionsById={}},_setConnectIdAttr:function(a){for(var b in this._nodeConnectionsById)this.removeTarget(b);dojo.forEach(dojo.isArrayLike(a)?a:[a],this.addTarget,this)},_getConnectIdAttr:function(){var a=[],b;for(b in this._nodeConnectionsById)a.push(b);
return a},addTarget:function(a){if(a=dojo.byId(a))a.id in this._nodeConnectionsById||(this._nodeConnectionsById[a.id]=[this.connect(a,"onmouseenter","_onTargetMouseEnter"),this.connect(a,"onmouseleave","_onTargetMouseLeave"),this.connect(a,"onfocus","_onTargetFocus"),this.connect(a,"onblur","_onTargetBlur")])},removeTarget:function(a){a=a.id||a;if(a in this._nodeConnectionsById){dojo.forEach(this._nodeConnectionsById[a],this.disconnect,this);delete this._nodeConnectionsById[a]}},postCreate:function(){dojo.addClass(this.domNode,
"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;dojo.forEach(dojo.isArrayLike(a)?a:[a],this.addTarget,this)},_onTargetMouseEnter:function(a){this._onHover(a)},_onTargetMouseLeave:function(a){this._onUnHover(a)},_onTargetFocus:function(a){this._focus=true;this._onHover(a)},_onTargetBlur:function(a){this._focus=false;this._onUnHover(a)},_onHover:function(a){if(!this._showTimer){var b=a.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(b)}),
this.showDelay)}},_onUnHover:function(){if(!this._focus){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}this.close()}},open:function(a){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}dijit.showTooltip(this.label||this.domNode.innerHTML,a,this.position,!this.isLeftToRight());this._connectNode=a;this.onShow(a,this.position)},close:function(){if(this._connectNode){dijit.hideTooltip(this._connectNode);delete this._connectNode;this.onHide()}if(this._showTimer){clearTimeout(this._showTimer);
delete this._showTimer}},onShow:function(){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments)}});dijit.Tooltip.defaultPosition=["after","before"]}
if(!dojo._hasResource["dijit.form.ValidationTextBox"]){dojo._hasResource["dijit.form.ValidationTextBox"]=true;dojo.provide("dijit.form.ValidationTextBox");dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:dojo.cache("dijit.form","templates/ValidationTextBox.html",'<div class="dijit dijitReset dijitInlineTable dijitLeft"\r\n\tid="widget_${id}" waiRole="presentation"\r\n\t><div class=\'dijitReset dijitValidationContainer\'\r\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&Chi; " type="text" tabIndex="-1" readOnly waiRole="presentation"\r\n\t/></div\r\n\t><div class="dijitReset dijitInputField dijitInputContainer"\r\n\t\t><input class="dijitReset dijitInputInner" dojoAttachPoint=\'textbox,focusNode\' autocomplete="off"\r\n\t\t\t${!nameAttrSetting} type=\'${type}\'\r\n\t/></div\r\n></div>\r\n'),baseClass:"dijitTextBox dijitValidationTextBox",
required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",constraints:{},regExp:".*",regExpGen:function(){return this.regExp},state:"",tooltipPosition:[],_setValueAttr:function(){this.inherited(arguments);this.validate(this._focused)},validator:function(a,b){return RegExp("^(?:"+this.regExpGen(b)+")"+(this.required?"":"?")+"$").test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||this.parse(a,b)!==undefined)},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==
0},isValid:function(){return this.validator(this.textbox.value,this.constraints)},_isEmpty:function(a){return/^\s*$/.test(a)},getErrorMessage:function(){return this.required&&this._isEmpty(this.textbox.value)?this.missingMessage:this.invalidMessage},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:true,validate:function(a){var b="",c=this.disabled||this.isValid(a);if(c)this._maskValidSubsetError=true;var d=this._isEmpty(this.textbox.value),e=!c&&!d&&a&&this._isValidSubset();
this.state=(c||(!this._hasBeenBlurred||a)&&d||e)&&this._maskValidSubsetError?"":"Error";if(this.state=="Error")this._maskValidSubsetError=a;this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",c?"false":"true");if(a){b=this.state=="Error"?this.getErrorMessage(true):this.getPromptMessage(true);this._maskValidSubsetError=true}this.displayMessage(b);return c},_message:"",displayMessage:function(a){if(this._message!=a){this._message=a;dijit.hideTooltip(this.domNode);a&&dijit.showTooltip(a,
this.domNode,this.tooltipPosition,!this.isLeftToRight())}},_refreshState:function(){this.validate(this._focused);this.inherited(arguments)},constructor:function(){this.constraints={}},_setConstraintsAttr:function(a){if(!a.locale&&this.lang)a.locale=this.lang;this.constraints=a;this._computePartialRE()},_computePartialRE:function(){var a=this.regExpGen(this.constraints);this.regExp=a;var b="";a!=".*"&&this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(d){switch(d.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":b+=
d;break;case ")":b+="|$)";break;default:b+="(?:"+d+"|$)"}});try{"".search(b)}catch(c){b=this.regExp;console.warn("RegExp error in "+this.declaredClass+": "+this.regExp)}this._partialre="^(?:"+b+")$"},postMixInProperties:function(){this.inherited(arguments);this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$")this.invalidMessage=this.messages.invalidMessage;if(!this.invalidMessage)this.invalidMessage=this.promptMessage;if(this.missingMessage==
"$_unset_$")this.missingMessage=this.messages.missingMessage;if(!this.missingMessage)this.missingMessage=this.invalidMessage;this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this.required=a;dijit.setWaiState(this.focusNode,"required",a);this._refreshState()},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)}});
dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},serialize:function(a){return a.toString?a.toString():""},toString:function(){var a=this.filter(this.get("value"));return a!=null?typeof a=="string"?a:this.serialize(a,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=dojo.place("<input type='hidden'"+
(this.name?" name='"+this.name+"'":"")+">",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}});dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",rangeCheck:function(a,b){return("min"in b?this.compare(a,b.min)>=0:true)&&("max"in b?this.compare(a,b.max)<=0:true)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var a=this.get("value"),b=false,c=false;if("min"in
this.constraints){b=this.constraints.min;b=this.compare(a,typeof b=="number"&&b>=0&&a!=0?0:b);b=typeof b=="number"&&b<0}if("max"in this.constraints){c=this.constraints.max;c=this.compare(a,typeof c!="number"||c>0?c:0);c=typeof c=="number"&&c>0}return b||c},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(a){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(a))},getErrorMessage:function(a){var b=
this.get("value");if(b!==null&&b!==""&&b!==undefined&&(typeof b!="number"||!isNaN(b))&&!this.isInRange(a))return this.rangeMessage;return this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage}},_setConstraintsAttr:function(){this.inherited(arguments);if(this.focusNode){this.constraints.min!==undefined?dijit.setWaiState(this.focusNode,
"valuemin",this.constraints.min):dijit.removeWaiState(this.focusNode,"valuemin");this.constraints.max!==undefined?dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max):dijit.removeWaiState(this.focusNode,"valuemax")}},_setValueAttr:function(a){dijit.setWaiState(this.focusNode,"valuenow",a);this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.form.ComboBox"]){dojo._hasResource["dijit.form.ComboBox"]=true;dojo.provide("dijit.form.ComboBox");dojo.declare("dijit.form.ComboBoxMixin",null,{item:null,pageSize:Infinity,store:null,fetchProperties:{},query:{},autoComplete:true,highlightMatch:"first",searchDelay:100,searchAttr:"name",labelAttr:"",labelType:"text",queryExpr:"${0}*",ignoreCase:true,hasDownArrow:true,templateString:dojo.cache("dijit.form","templates/ComboBox.html",'<div class="dijit dijitReset dijitInlineTable dijitLeft"\r\n\tid="widget_${id}"\r\n\tdojoAttachPoint="comboNode" waiRole="combobox"\r\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\r\n\t\tdojoAttachPoint="downArrowNode" waiRole="presentation"\r\n\t\tdojoAttachEvent="onmousedown:_onArrowMouseDown"\r\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readOnly waiRole="presentation"\r\n\t\t\t${_buttonInputDisabled}\r\n\t/></div\r\n\t><div class=\'dijitReset dijitValidationContainer\'\r\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&Chi; " type="text" tabIndex="-1" readOnly waiRole="presentation"\r\n\t/></div\r\n\t><div class="dijitReset dijitInputField dijitInputContainer"\r\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\r\n\t\t\tdojoAttachEvent="onkeypress:_onKeyPress,compositionend"\r\n\t\t\tdojoAttachPoint="textbox,focusNode" waiRole="textbox" waiState="haspopup-true,autocomplete-list"\r\n\t/></div\r\n></div>\r\n'),
baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{downArrowNode:"dijitDownArrowButton"},_getCaretPos:function(a){var b=0;if(typeof a.selectionStart=="number")b=a.selectionStart;else if(dojo.isIE){var c=dojo.doc.selection.createRange().duplicate();a=a.createTextRange();c.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",c);b=String(a.text).replace(/\r/g,"").length}catch(d){}}return b},_setCaretPos:function(a,b){b=parseInt(b);dijit.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments);
dijit.setWaiState(this.comboNode,"disabled",a)},_abortQuery:function(){if(this.searchTimer){clearTimeout(this.searchTimer);this.searchTimer=null}if(this._fetchHandle){this._fetchHandle.abort&&this._fetchHandle.abort();this._fetchHandle=null}},_onInput:function(a){if(!this.searchTimer&&(a.type=="paste"||a.type=="input")&&this._lastInput!=this.textbox.value)this.searchTimer=setTimeout(dojo.hitch(this,function(){this._onKeyPress({charOrCode:229})}),100);this.inherited(arguments)},_onKeyPress:function(a){var b=
a.charOrCode;if(!(a.altKey||(a.ctrlKey||a.metaKey)&&b!="x"&&b!="v"||b==dojo.keys.SHIFT)){var c=false,d="_startSearchFromInput",e=this._popupWidget,f=dojo.keys,g=null;this._prev_key_backspace=false;this._abortQuery();if(this._isShowingNow){e.handleKey(b);g=e.getHighlightedOption()}switch(b){case f.PAGE_DOWN:case f.DOWN_ARROW:case f.PAGE_UP:case f.UP_ARROW:if(this._isShowingNow)this._announceOption(g);else{c=true;d="_startSearchAll"}dojo.stopEvent(a);break;case f.ENTER:if(g)if(g==e.nextButton){this._nextSearch(1);
dojo.stopEvent(a);break}else{if(g==e.previousButton){this._nextSearch(-1);dojo.stopEvent(a);break}}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length)}a.preventDefault();case f.TAB:a=this.get("displayedValue");if(e&&(a==e._messages.previousMessage||a==e._messages.nextMessage))break;g&&this._selectOption();if(this._isShowingNow){this._lastQuery=null;this._hideResultList()}break;case " ":if(g){dojo.stopEvent(a);this._selectOption();this._hideResultList()}else c=true;
break;case f.ESCAPE:if(this._isShowingNow){dojo.stopEvent(a);this._hideResultList()}break;case f.DELETE:case f.BACKSPACE:c=this._prev_key_backspace=true;break;default:c=typeof b=="string"||b==229}if(c){this.item=undefined;this.searchTimer=setTimeout(dojo.hitch(this,d),1)}}},_autoCompleteText:function(a){var b=this.focusNode;dijit.selectInputText(b,b.value.length);var c=this.ignoreCase?"toLowerCase":"substr";if(a[c](0).indexOf(this.focusNode.value[c](0))==0){c=this._getCaretPos(b);if(c+1>b.value.length){b.value=
a;dijit.selectInputText(b,c)}}else{b.value=a;dijit.selectInputText(b)}},_openResultList:function(a,b){this._fetchHandle=null;if(!(this.disabled||this.readOnly||b.query[this.searchAttr]!=this._lastQuery)){this._popupWidget.clearResultList();if(!a.length&&!this._maxOptions)this._hideResultList();else{b._maxOptions=this._maxOptions;var c=this._popupWidget.createOptions(a,b,dojo.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if(b.direction){if(1==b.direction)this._popupWidget.highlightFirstOption();
else-1==b.direction&&this._popupWidget.highlightLastOption();this._announceOption(this._popupWidget.getHighlightedOption())}else this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(b.query[this.searchAttr])&&this._announceOption(c[1])}}},_showResultList:function(){this._hideResultList();this.displayMessage("");dojo.style(this._popupWidget.domNode,{width:"",height:""});var a=this.open(),b=dojo.marginBox(this._popupWidget.domNode);this._popupWidget.domNode.style.overflow=a.h==b.h&&a.w==b.w?
"hidden":"auto";b=a.w;if(a.h<this._popupWidget.domNode.scrollHeight)b+=16;dojo.marginBox(this._popupWidget.domNode,{h:a.h,w:Math.max(b,this.domNode.offsetWidth)});if(b<this.domNode.offsetWidth)this._popupWidget.domNode.parentNode.style.left=dojo.position(this.domNode,true).x+"px";dijit.setWaiState(this.comboNode,"expanded","true")},_hideResultList:function(){this._abortQuery();if(this._isShowingNow){dijit.popup.close(this._popupWidget);this._isShowingNow=false;dijit.setWaiState(this.comboNode,"expanded",
"false");dijit.removeWaiState(this.focusNode,"activedescendant")}},_setBlurValue:function(){var a=this.get("displayedValue"),b=this._popupWidget;if(b&&(a==b._messages.previousMessage||a==b._messages.nextMessage))this._setValueAttr(this._lastValueReported,true);else if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",a)}else{this.value!=this._lastValueReported&&dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);this._refreshState()}},_onBlur:function(){this._hideResultList();
this.inherited(arguments)},_setItemAttr:function(a,b,c){c||(c=this.labelFunc(a,this.store));this.value=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c;this.item=a;dijit.form.ComboBox.superclass._setValueAttr.call(this,this.value,b,c)},_announceOption:function(a){if(a){var b;if(a==this._popupWidget.nextButton||a==this._popupWidget.previousButton){b=a.innerHTML;this.item=undefined;this.value=""}else{b=this.labelFunc(a.item,this.store);this.set("item",a.item,false,b)}this.focusNode.value=
this.focusNode.value.substring(0,this._lastInput.length);dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(a,"id"));this._autoCompleteText(b)}},_selectOption:function(a){a&&this._announceOption(a.target);this._hideResultList();this._setCaretPos(this.focusNode,this.focusNode.value.length);dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true)},_onArrowMouseDown:function(a){if(!(this.disabled||this.readOnly)){dojo.stopEvent(a);this.focus();this._isShowingNow?this._hideResultList():
this._startSearchAll()}},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"))},_getQueryString:function(a){return dojo.string.substitute(this.queryExpr,[a])},_startSearch:function(a){if(!this._popupWidget){var b=this.id+"_popup";this._popupWidget=new dijit.form._ComboBoxMenu({onChange:dojo.hitch(this,this._selectOption),id:b,dir:this.dir});dijit.removeWaiState(this.focusNode,"activedescendant");dijit.setWaiState(this.textbox,
"owns",b)}b=dojo.clone(this.query);this._lastInput=a;this._lastQuery=b[this.searchAttr]=this._getQueryString(a);this.searchTimer=setTimeout(dojo.hitch(this,function(c,d){this.searchTimer=null;var e={queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:c,onBegin:dojo.hitch(this,"_setMaxOptions"),onComplete:dojo.hitch(this,"_openResultList"),onError:function(f){d._fetchHandle=null;console.error("dijit.form.ComboBox: "+f);dojo.hitch(d,"_hideResultList")()},start:0,count:this.pageSize};dojo.mixin(e,
d.fetchProperties);this._fetchHandle=d.store.fetch(e);this._nextSearch=this._popupWidget.onPage=dojo.hitch(this,function(f,g){f.start+=f.count*g;f.direction=g;this._fetchHandle=this.store.fetch(f)},this._fetchHandle)},b,this),this.searchDelay)},_setMaxOptions:function(a){this._maxOptions=a},_getValueField:function(){return this.searchAttr},compositionend:function(){this._onKeyPress({charOrCode:229})},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){this.store=
new dijit.form._ComboBoxDataStore(this.srcNodeRef);if(!("value"in this.params)){var a=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=b!=this.searchAttr?this.store.getValue(a,b):this.labelFunc(a,this.store)}}}this.inherited(arguments)},postCreate:function(){if(!this.hasDownArrow)this.downArrowNode.style.display="none";var a=dojo.query('label[for="'+this.id+'"]');if(a.length){a[0].id=this.id+"_label";dijit.setWaiState(this.comboNode,"labelledby",a[0].id)}this.inherited(arguments)},
uninitialize:function(){if(this._popupWidget&&!this._popupWidget._destroyed){this._hideResultList();this._popupWidget.destroy()}this.inherited(arguments)},_getMenuLabelFromItem:function(a){a=this.labelAttr?this.store.getValue(a,this.labelAttr):this.labelFunc(a,this.store);var b=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){a=this.doHighlight(a,this._escapeHtml(this._lastInput));b="html"}return{html:b=="html",label:a}},doHighlight:function(a,b){var c="i"+(this.highlightMatch==
"all"?"g":""),d=this._escapeHtml(a);b=dojo.regexp.escapeString(b);return d.replace(RegExp("(^|\\s)("+b+")",c),'$1<span class="dijitComboBoxHighlightMatch">$2</span>')},_escapeHtml:function(a){return a=String(a).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},open:function(){this._isShowingNow=true;return dijit.popup.open({popup:this._popupWidget,around:this.domNode,parent:this})},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(a,
b){return b.getValue(a,this.searchAttr).toString()}});dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:"<ul class='dijitReset dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' tabIndex='-1' style='overflow: \"auto\"; overflow-x: \"hidden\";'><li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton' waiRole='option'></li><li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton' waiRole='option'></li></ul>",
_messages:null,baseClass:"dijitComboBoxMenu",postMixInProperties:function(){this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang);this.inherited(arguments)},_setValueAttr:function(a){this.value=a;this.onChange(a)},onChange:function(){},onPage:function(){},postCreate:function(){this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage;this.inherited(arguments)},onClose:function(){this._blurOptionNode()},_createOption:function(a,
b){var c=b(a),d=dojo.doc.createElement("li");dijit.setWaiRole(d,"option");if(c.html)d.innerHTML=c.label;else d.appendChild(dojo.doc.createTextNode(c.label));if(d.innerHTML=="")d.innerHTML="&nbsp;";d.item=a;return d},createOptions:function(a,b,c){this.previousButton.style.display=b.start==0?"none":"";dojo.attr(this.previousButton,"id",this.id+"_prev");dojo.forEach(a,function(e,f){var g=this._createOption(e,c);g.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");dojo.attr(g,
"id",this.id+f);this.domNode.insertBefore(g,this.nextButton)},this);var d=false;if(b._maxOptions&&b._maxOptions!=-1)if(b.start+b.count<b._maxOptions)d=true;else{if(b.start+b.count>b._maxOptions&&b.count==a.length)d=true}else if(b.count==a.length)d=true;this.nextButton.style.display=d?"":"none";dojo.attr(this.nextButton,"id",this.id+"_next");return this.domNode.childNodes},clearResultList:function(){for(;this.domNode.childNodes.length>2;)this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-
2])},_onMouseDown:function(a){dojo.stopEvent(a)},_onMouseUp:function(a){if(!(a.target===this.domNode||!this._highlighted_option))if(a.target==this.previousButton)this.onPage(-1);else if(a.target==this.nextButton)this.onPage(1);else{for(a=a.target;!a.item;)a=a.parentNode;this._setValueAttr({target:a},true)}},_onMouseOver:function(a){if(a.target!==this.domNode){a=a.target;if(!(a==this.previousButton||a==this.nextButton))for(;!a.item;)a=a.parentNode;this._focusOptionNode(a)}},_onMouseOut:function(a){a.target!==
this.domNode&&this._blurOptionNode()},_focusOptionNode:function(a){if(this._highlighted_option!=a){this._blurOptionNode();this._highlighted_option=a;dojo.addClass(this._highlighted_option,"dijitMenuItemSelected")}},_blurOptionNode:function(){if(this._highlighted_option){dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected");this._highlighted_option=null}},_highlightNextOption:function(){if(this.getHighlightedOption()){var a=this._highlighted_option.nextSibling;a&&a.style.display!="none"?
this._focusOptionNode(a):this.highlightFirstOption()}else{a=this.domNode.firstChild;this._focusOptionNode(a.style.display=="none"?a.nextSibling:a)}dojo.window.scrollIntoView(this._highlighted_option)},highlightFirstOption:function(){var a=this.domNode.firstChild,b=a.nextSibling;this._focusOptionNode(b.style.display=="none"?a:b);dojo.window.scrollIntoView(this._highlighted_option)},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dojo.window.scrollIntoView(this._highlighted_option)},
_highlightPrevOption:function(){if(this.getHighlightedOption()){var a=this._highlighted_option.previousSibling;a&&a.style.display!="none"?this._focusOptionNode(a):this.highlightLastOption()}else{a=this.domNode.lastChild;this._focusOptionNode(a.style.display=="none"?a.previousSibling:a)}dojo.window.scrollIntoView(this._highlighted_option)},_page:function(a){var b=0,c=this.domNode.scrollTop,d=dojo.style(this.domNode,"height");for(this.getHighlightedOption()||this._highlightNextOption();b<d;){if(a){if(!this.getHighlightedOption().previousSibling||
this._highlighted_option.previousSibling.style.display=="none")break;this._highlightPrevOption()}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none")break;this._highlightNextOption()}var e=this.domNode.scrollTop;b+=(e-c)*(a?-1:1);c=e}},pageUp:function(){this._page(true)},pageDown:function(){this._page(false)},getHighlightedOption:function(){var a=this._highlighted_option;return a&&a.parentNode?a:null},handleKey:function(a){switch(a){case dojo.keys.DOWN_ARROW:this._highlightNextOption();
break;case dojo.keys.PAGE_DOWN:this.pageDown();break;case dojo.keys.UP_ARROW:this._highlightPrevOption();break;case dojo.keys.PAGE_UP:this.pageUp()}}});dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{_setValueAttr:function(a,b,c){this.item=null;a||(a="");dijit.form.ValidationTextBox.prototype._setValueAttr.call(this,a,b,c)}});dojo.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(a){this.root=a;if(a.tagName!="SELECT"&&a.firstChild){a=dojo.query("select",
a);if(a.length>0)a=a[0];else{this.root.innerHTML="<SELECT>"+this.root.innerHTML+"</SELECT>";a=this.root.firstChild}this.root=a}dojo.query("> option",a).forEach(function(b){b.innerHTML=dojo.trim(b.innerHTML)})},getValue:function(a,b){return b=="value"?a.value:a.innerText||a.textContent||""},isItemLoaded:function(){return true},getFeatures:function(){return{"dojo.data.api.Read":true,"dojo.data.api.Identity":true}},_fetchItems:function(a,b){if(!a.query)a.query={};if(!a.query.name)a.query.name="";if(!a.queryOptions)a.queryOptions=
{};var c=dojo.data.util.filter.patternToRegExp(a.query.name,a.queryOptions.ignoreCase),d=dojo.query("> option",this.root).filter(function(e){return(e.innerText||e.textContent||"").match(c)});a.sort&&d.sort(dojo.data.util.sorter.createSortFunction(a.sort,this));b(d,a)},close:function(){},getLabel:function(a){return a.innerHTML},getIdentity:function(a){return dojo.attr(a,"value")},fetchItemByIdentity:function(a){var b=dojo.query("> option[value='"+a.identity+"']",this.root)[0];a.onItem(b)},fetchSelectedItem:function(){var a=
this.root,b=a.selectedIndex;return typeof b=="number"?dojo.query("> option:nth-child("+(b!=-1?b+1:1)+")",a)[0]:null}});dojo.extend(dijit.form._ComboBoxDataStore,dojo.data.util.simpleFetch)}
if(!dojo._hasResource["dijit.form.FilteringSelect"]){dojo._hasResource["dijit.form.FilteringSelect"]=true;dojo.provide("dijit.form.FilteringSelect");dojo.declare("dijit.form.FilteringSelect",[dijit.form.MappedTextBox,dijit.form.ComboBoxMixin],{_isvalid:true,required:true,_lastDisplayedValue:"",isValid:function(){return this._isvalid||!this.required&&this.get("displayedValue")==""},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(a,b,c){if(!(b&&b.query[this.searchAttr]!=
this._lastQuery||!b&&a.length&&this.store.getIdentity(a[0])!=this._lastQuery))if(a.length)this.set("item",a[0],c);else{this.valueNode.value="";dijit.form.TextBox.superclass._setValueAttr.call(this,"",c||c===undefined&&!this._focused);this._isvalid=false;this.validate(this._focused);this.item=null}},_openResultList:function(a,b){if(b.query[this.searchAttr]==this._lastQuery){if(this.item===undefined){this._isvalid=a.length!=0||this._maxOptions!=0;this.validate(true)}dijit.form.ComboBoxMixin.prototype._openResultList.apply(this,
arguments)}},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(a,b){this._onChangeActive||(b=null);this._lastQuery=a;if(a===null||a==="")this._setDisplayedValueAttr("",b);else{var c=this;this.store.fetchItemByIdentity({identity:a,onItem:function(d){c._callbackSetLabel(d?[d]:[],undefined,b)}})}},_setItemAttr:function(){this._isvalid=true;this.inherited(arguments);this.valueNode.value=this.value;this._lastDisplayedValue=this.textbox.value},
_getDisplayQueryString:function(a){return a.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(a,b){this._created||(b=false);if(this.store){this._hideResultList();var c=dojo.clone(this.query);this._lastQuery=c[this.searchAttr]=this._getDisplayQueryString(a);this._lastDisplayedValue=this.textbox.value=a;var d=this;c={query:c,queryOptions:{ignoreCase:this.ignoreCase,deep:true},onComplete:function(e,f){d._fetchHandle=null;dojo.hitch(d,"_callbackSetLabel")(e,f,b)},onError:function(e){d._fetchHandle=
null;console.error("dijit.form.FilteringSelect: "+e);dojo.hitch(d,"_callbackSetLabel")([],undefined,false)}};dojo.mixin(c,this.fetchProperties);this._fetchHandle=this.store.fetch(c)}},postMixInProperties:function(){this.inherited(arguments);this._isvalid=!this.required},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})}
if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(a){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this.url=this._ccUrl=this._jsonFileUrl=a.url;this._jsonData=a.data;this.data=null;this._datatypeMap=a.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(b){return dojo.date.stamp.fromISOString(b)}});
this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(a.urlPreventCache!==undefined)this.urlPreventCache=a.urlPreventCache?true:false;if(a.hierarchical!==undefined)this.hierarchical=a.hierarchical?true:false;if(a.clearOnClose)this.clearOnClose=true;if("failOk"in a)this.failOk=a.failOk?true:
false},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(a){if(!this.isItem(a))throw Error("dojo.data.ItemFileReadStore: Invalid item argument.");},_assertIsAttribute:function(a){if(typeof a!=="string")throw Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");},getValue:function(a,b,c){a=this.getValues(a,b);return a.length>0?a[0]:c},getValues:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);
return(a[b]||[]).slice(0)},getAttributes:function(a){this._assertIsItem(a);var b=[],c;for(c in a)c!==this._storeRefPropName&&c!==this._itemNumPropName&&c!==this._rootItemPropName&&c!==this._reverseRefMap&&b.push(c);return b},hasAttribute:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return b in a},containsValue:function(a,b,c){var d=undefined;if(typeof c==="string")d=dojo.data.util.filter.patternToRegExp(c,false);return this._containsValue(a,b,c,d)},_containsValue:function(a,b,c,
d){return dojo.some(this.getValues(a,b),function(e){if(e!==null&&!dojo.isObject(e)&&d){if(e.toString().match(d))return true}else if(c===e)return true})},isItem:function(a){if(a&&a[this._storeRefPropName]===this)if(this._arrayOfAllItems[a[this._itemNumPropName]]===a)return true;return false},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,
this._labelAttr)},getLabelAttributes:function(){if(this._labelAttr)return[this._labelAttr];return null},_fetchItems:function(a,b,c){var d=this,e=function(i,j){var k=[],l,n;if(i.query){var m;l=i.queryOptions?i.queryOptions.ignoreCase:false;var o={};for(n in i.query){m=i.query[n];if(typeof m==="string")o[n]=dojo.data.util.filter.patternToRegExp(m,l);else if(m instanceof RegExp)o[n]=m}for(l=0;l<j.length;++l){var q=true,p=j[l];if(p===null)q=false;else for(n in i.query){m=i.query[n];d._containsValue(p,
n,m,o[n])||(q=false)}q&&k.push(p)}}else for(l=0;l<j.length;++l){n=j[l];n!==null&&k.push(n)}b(k,i)};if(this._loadFinished)e(a,this._getItemsArray(a.queryOptions));else{if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this.url=this._ccUrl=this._jsonFileUrl}else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(this.data!=null&&this._jsonData==
null){this._jsonData=this.data;this.data=null}if(this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a,filter:e});else{this._loadInProgress=true;var f=dojo.xhrGet({url:d._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});f.addCallback(function(i){try{d._getItemsFromLoadedData(i);d._loadFinished=true;d._loadInProgress=false;e(a,d._getItemsArray(a.queryOptions));d._handleQueuedFetches()}catch(j){d._loadFinished=true;d._loadInProgress=
false;c(j,a)}});f.addErrback(function(i){d._loadInProgress=false;c(i,a)});var g=null;if(a.abort)g=a.abort;a.abort=function(){f&&f.fired===-1&&f.cancel();g&&g.call(a)}}else if(this._jsonData)try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;e(a,this._getItemsArray(a.queryOptions))}catch(h){c(h,a)}else c(Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),a)}},_handleQueuedFetches:function(){if(this._queuedFetches.length>
0){for(var a=0;a<this._queuedFetches.length;a++){var b=this._queuedFetches[a],c=b.args;(b=b.filter)?b(c,this._getItemsArray(c.queryOptions)):this.fetchItemByIdentity(c)}this._queuedFetches=[]}},_getItemsArray:function(a){if(a&&a.deep)return this._arrayOfAllItems;return this._arrayOfTopLevelItems},close:function(){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null)&&this.data==null)console.debug("dojo.data.ItemFileReadStore: WARNING!  Data reload  information has not been provided.  Please set 'url' or 'data' to the appropriate value before the next fetch");
this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[]}},_getItemsFromLoadedData:function(a){function b(o){return o!==null&&typeof o==="object"&&(!dojo.isArray(o)||d)&&!dojo.isFunction(o)&&(o.constructor==Object||dojo.isArray(o))&&typeof o._reference==="undefined"&&typeof o._type==="undefined"&&typeof o._value==="undefined"&&e.hierarchical}function c(o){e._arrayOfAllItems.push(o);for(var q in o){var p=
o[q];if(p)if(dojo.isArray(p))for(var r=0;r<p.length;++r){var s=p[r];b(s)&&c(s)}else b(p)&&c(p)}}var d=false,e=this;this._labelAttr=a.label;var f,g;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=a.items;for(f=0;f<this._arrayOfTopLevelItems.length;++f){g=this._arrayOfTopLevelItems[f];if(dojo.isArray(g))d=true;c(g);g[this._rootItemPropName]=true}var h={},i;for(f=0;f<this._arrayOfAllItems.length;++f){g=this._arrayOfAllItems[f];for(i in g){if(i!==this._rootItemPropName){var j=g[i];if(j!==null)dojo.isArray(j)||
(g[i]=[j]);else g[i]=[null]}h[i]=i}}for(;h[this._storeRefPropName];)this._storeRefPropName+="_";for(;h[this._itemNumPropName];)this._itemNumPropName+="_";for(;h[this._reverseRefMap];)this._reverseRefMap+="_";if(h=a.identifier){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=h;for(f=0;f<this._arrayOfAllItems.length;++f){g=this._arrayOfAllItems[f];a=g[h];a=a[0];if(this._itemsByIdentity[a])if(this._jsonFileUrl)throw Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+
this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+h+"].  Value collided: ["+a+"]");else{if(this._jsonData)throw Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+h+"].  Value collided: ["+a+"]");}else this._itemsByIdentity[a]=g}}else this._features["dojo.data.api.Identity"]=Number;for(f=0;f<this._arrayOfAllItems.length;++f){g=this._arrayOfAllItems[f];g[this._storeRefPropName]=this;
g[this._itemNumPropName]=f}for(f=0;f<this._arrayOfAllItems.length;++f){g=this._arrayOfAllItems[f];for(i in g){a=g[i];for(h=0;h<a.length;++h){j=a[h];if(j!==null&&typeof j=="object"){if("_type"in j&&"_value"in j){var k=j._type,l=this._datatypeMap[k];if(l)if(dojo.isFunction(l))a[h]=new l(j._value);else if(dojo.isFunction(l.deserialize))a[h]=l.deserialize(j._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");
else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+k+"'");}if(j._reference){j=j._reference;if(dojo.isObject(j))for(k=0;k<this._arrayOfAllItems.length;++k){l=this._arrayOfAllItems[k];var n=true,m;for(m in j)if(l[m]!=j[m])n=false;if(n)a[h]=l}else a[h]=this._getItemByIdentity(j);if(this.referenceIntegrity){j=a[h];this.isItem(j)&&this._addReferenceToMap(j,g,i)}}else this.isItem(j)&&this.referenceIntegrity&&this._addReferenceToMap(j,
g,i)}}}}},_addReferenceToMap:function(){},getIdentity:function(a){var b=this._features["dojo.data.api.Identity"];if(b===Number)return a[this._itemNumPropName];else if(a=a[b])return a[0];return null},fetchItemByIdentity:function(a){var b,c;if(this._loadFinished){b=this._getItemByIdentity(a.identity);if(a.onItem){c=a.scope?a.scope:dojo.global;a.onItem.call(c,b)}}else{var d=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");
this.url=this._ccUrl=this._jsonFileUrl}else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null}if(this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a});else{this._loadInProgress=true;c=dojo.xhrGet({url:d._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});c.addCallback(function(e){var f=a.scope?a.scope:dojo.global;try{d._getItemsFromLoadedData(e);
d._loadFinished=true;d._loadInProgress=false;b=d._getItemByIdentity(a.identity);a.onItem&&a.onItem.call(f,b);d._handleQueuedFetches()}catch(g){d._loadInProgress=false;a.onError&&a.onError.call(f,g)}});c.addErrback(function(e){d._loadInProgress=false;if(a.onError)a.onError.call(a.scope?a.scope:dojo.global,e)})}else if(this._jsonData){d._getItemsFromLoadedData(d._jsonData);d._jsonData=null;d._loadFinished=true;b=d._getItemByIdentity(a.identity);if(a.onItem){c=a.scope?a.scope:dojo.global;a.onItem.call(c,
b)}}}},_getItemByIdentity:function(a){var b=null;b=this._itemsByIdentity?this._itemsByIdentity[a]:this._arrayOfAllItems[a];if(b===undefined)b=null;return b},getIdentityAttributes:function(){var a=this._features["dojo.data.api.Identity"];return a===Number?null:[a]},_forceLoad:function(){var a=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");
this.url=this._ccUrl=this._jsonFileUrl}else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null}if(this._jsonFileUrl){var b=dojo.xhrGet({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true});b.addCallback(function(c){try{if(a._loadInProgress!==true&&!a._loadFinished){a._getItemsFromLoadedData(c);a._loadFinished=true}else if(a._loadInProgress)throw Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.");
}catch(d){console.log(d);throw d;}});b.addErrback(function(c){throw c;})}else if(this._jsonData){a._getItemsFromLoadedData(a._jsonData);a._jsonData=null;a._loadFinished=true}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch)}
if(!dojo._hasResource["dijit._editor.plugins.FontChoice"]){dojo._hasResource["dijit._editor.plugins.FontChoice"]=true;dojo.provide("dijit._editor.plugins.FontChoice");dojo.declare("dijit._editor.plugins._FontDropDown",[dijit._Widget,dijit._Templated],{label:"",widgetsInTemplate:true,plainText:false,templateString:"<span style='white-space: nowrap' class='dijit dijitReset dijitInline'><label class='dijitLeft dijitInline' for='${selectId}'>${label}</label><input dojoType='dijit.form.FilteringSelect' required=false labelType=html labelAttr=label searchAttr=name tabIndex='-1' id='${selectId}' dojoAttachPoint='select' value=''/></span>",
postMixInProperties:function(){this.inherited(arguments);this.strings=dojo.i18n.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){var a=dojo.map(this.values,function(b){var c=this.strings[b]||b;return{label:this.getLabel(b,c),name:c,value:b}},this);this.select.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",
items:a}});this.select.set("value","",false);this.disabled=this.select.get("disabled")},_setValueAttr:function(a,b){b=b!==false?true:false;this.select.set("value",dojo.indexOf(this.values,a)<0?"":a,b);if(!b)this.select._lastValueReported=null},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(a){this.disabled=a;this.select.set("disabled",a)}});dojo.declare("dijit._editor.plugins._FontNameDropDown",dijit._editor.plugins._FontDropDown,
{generic:false,command:"fontName",postMixInProperties:function(){if(!this.values)this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"];this.inherited(arguments)},getLabel:function(a,b){return this.plainText?b:"<div style='font-family: "+a+"'>"+b+"</div>"},_setValueAttr:function(a,b){if(this.generic)a={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive",
"Apple Chancery":"cursive",Courier:"monospace","Courier New":"monospace",Papyrus:"fantasy"}[a]||a;this.inherited(arguments,[a,b!==false?true:false])}});dojo.declare("dijit._editor.plugins._FontSizeDropDown",dijit._editor.plugins._FontDropDown,{command:"fontSize",values:[1,2,3,4,5,6,7],getLabel:function(a,b){return this.plainText?b:"<font size="+a+"'>"+b+"</font>"},_setValueAttr:function(a,b){b=b!==false?true:false;if(a.indexOf&&a.indexOf("px")!=-1)a={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[parseInt(a,
10)]||a;this.inherited(arguments,[a,b])}});dojo.declare("dijit._editor.plugins._FormatBlockDropDown",dijit._editor.plugins._FontDropDown,{command:"formatBlock",values:["noFormat","p","h1","h2","h3","pre"],postCreate:function(){this.inherited(arguments);this.set("value","noFormat",false)},getLabel:function(a,b){return this.plainText?b:"<"+a+">"+b+"</"+a+">"},_execCommand:function(a,b,c){if(c==="noFormat"){var d;if((b=dijit.range.getSelection(a.window))&&b.rangeCount>0){c=b.getRangeAt(0);var e;if(c){b=
c.startContainer;for(d=c.endContainer;b&&b!==a.editNode&&b!==a.document.body&&b.nodeType!==1;)b=b.parentNode;for(;d&&d!==a.editNode&&d!==a.document.body&&d.nodeType!==1;)d=d.parentNode;var f=dojo.hitch(this,function(i,j){if(i.childNodes&&i.childNodes.length){var k;for(k=0;k<i.childNodes.length;k++){var l=i.childNodes[k];if(l.nodeType==1)if(dojo.withGlobal(a.window,"inSelection",dijit._editor.selection,[l])){var n=l.tagName?l.tagName.toLowerCase():"";dojo.indexOf(this.values,n)!==-1&&j.push(l);f(l,
j)}}}});c=dojo.hitch(this,function(i){if(i&&i.length){for(a.beginEditing();i.length;)this._removeFormat(a,i.pop());a.endEditing()}});var g=[];if(b==d){var h;for(d=b;d&&d!==a.editNode&&d!==a.document.body;){if(d.nodeType==1){e=d.tagName?d.tagName.toLowerCase():"";if(dojo.indexOf(this.values,e)!==-1){h=d;break}}d=d.parentNode}f(b,g);if(h)g=[h].concat(g)}else for(d=b;dojo.withGlobal(a.window,"inSelection",dijit._editor.selection,[d]);){if(d.nodeType==1){e=d.tagName?d.tagName.toLowerCase():"";dojo.indexOf(this.values,
e)!==-1&&g.push(d);f(d,g)}d=d.nextSibling}c(g);a.onDisplayChanged()}}}else a.execCommand(b,c)},_removeFormat:function(a,b){if(a.customUndo){for(;b.firstChild;)dojo.place(b.firstChild,b,"before");b.parentNode.removeChild(b)}else{dojo.withGlobal(a.window,"selectElementChildren",dijit._editor.selection,[b]);var c=dojo.withGlobal(a.window,"getSelectedHtml",dijit._editor.selection,[null]);dojo.withGlobal(a.window,"selectElement",dijit._editor.selection,[b]);a.execCommand("inserthtml",c||"")}}});dojo.declare("dijit._editor.plugins.FontChoice",
dijit._editor._Plugin,{useDefaultCommand:false,_initButton:function(){var a={fontName:dijit._editor.plugins._FontNameDropDown,fontSize:dijit._editor.plugins._FontSizeDropDown,formatBlock:dijit._editor.plugins._FormatBlockDropDown}[this.command],b=this.params;if(this.params.custom)b.values=this.params.custom;var c=this.editor;this.button=new a(dojo.delegate({dir:c.dir,lang:c.lang},b));this.connect(this.button.select,"onChange",function(d){this.editor.focus();if(this.command=="fontName"&&d.indexOf(" ")!=
-1)d="'"+d+"'";this.button._execCommand?this.button._execCommand(this.editor,this.command,d):this.editor.execCommand(this.command,d);this.editor.customUndo=this.editor.customUndo||dojo.isWebKit})},updateState:function(){var a=this.editor,b=this.command;if(!(!a||!a.isLoaded||!b.length))if(this.button){var c;try{c=a.queryCommandValue(b)||""}catch(d){c=""}var e=dojo.isString(c)&&c.match(/'([^']*)'/);if(e)c=e[1];if(b==="formatBlock")if(!c||c=="p"){c=null;var f;if((b=dijit.range.getSelection(this.editor.window))&&
b.rangeCount>0)if(b=b.getRangeAt(0))f=b.endContainer;for(;f&&f!==a.editNode&&f!==a.document;){if((b=f.tagName?f.tagName.toLowerCase():"")&&dojo.indexOf(this.button.values,b)>-1){c=b;break}f=f.parentNode}c||(c="noFormat")}else if(dojo.indexOf(this.button.values,c)<0)c="noFormat";c!==this.button.get("value")&&this.button.set("value",c,false)}}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin)switch(a.args.name){case "fontName":case "fontSize":case "formatBlock":a.plugin=
new dijit._editor.plugins.FontChoice({command:a.args.name,plainText:a.args.plainText?a.args.plainText:false})}})}
if(!dojo._hasResource["dijit._Contained"]){dojo._hasResource["dijit._Contained"]=true;dojo.provide("dijit._Contained");dojo.declare("dijit._Contained",null,{getParent:function(){var a=dijit.getEnclosingWidget(this.domNode.parentNode);return a&&a.isContainer?a:null},_getSibling:function(a){var b=this.domNode;do b=b[a+"Sibling"];while(b&&b.nodeType!=1);return b&&dijit.byNode(b)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},
getIndexInParent:function(){var a=this.getParent();if(!a||!a.getIndexOfChild)return-1;return a.getIndexOfChild(this)}})}
if(!dojo._hasResource["dijit.layout._LayoutWidget"]){dojo._hasResource["dijit.layout._LayoutWidget"]=true;dojo.provide("dijit.layout._LayoutWidget");dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,postCreate:function(){dojo.addClass(this.domNode,"dijitContainer");this.inherited(arguments)},startup:function(){if(!this._started){this.inherited(arguments);var a=this.getParent&&this.getParent();if(!(a&&
a.isLayoutContainer)){this.resize();this.connect(dojo.isIE?this.domNode:dojo.global,"onresize",function(){this.resize()})}}},resize:function(a,b){var c=this.domNode;if(a){dojo.marginBox(c,a);if(a.t)c.style.top=a.t+"px";if(a.l)c.style.left=a.l+"px"}var d=b||{};dojo.mixin(d,a||{});if(!("h"in d)||!("w"in d))d=dojo.mixin(dojo.marginBox(c),d);var e=dojo.getComputedStyle(c),f=dojo._getMarginExtents(c,e),g=dojo._getBorderExtents(c,e);d=this._borderBox={w:d.w-(f.w+g.w),h:d.h-(f.h+g.h)};f=dojo._getPadExtents(c,
e);this._contentBox={l:dojo._toPixelValue(c,e.paddingLeft),t:dojo._toPixelValue(c,e.paddingTop),w:d.w-f.w,h:d.h-f.h};this.layout()},layout:function(){},_setupChild:function(a){dojo.addClass(a.domNode,this.baseClass+"-child");a.baseClass&&dojo.addClass(a.domNode,this.baseClass+"-"+a.baseClass)},addChild:function(a){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(a){dojo.removeClass(a.domNode,this.baseClass+"-child");a.baseClass&&dojo.removeClass(a.domNode,this.baseClass+
"-"+a.baseClass);this.inherited(arguments)}});dijit.layout.marginBox2contentBox=function(a,b){var c=dojo.getComputedStyle(a),d=dojo._getMarginExtents(a,c),e=dojo._getPadBorderExtents(a,c);return{l:dojo._toPixelValue(a,c.paddingLeft),t:dojo._toPixelValue(a,c.paddingTop),w:b.w-(d.w+e.w),h:b.h-(d.h+e.h)}};(function(){var a=function(b,c){b.resize?b.resize(c):dojo.marginBox(b.domNode,c);dojo.mixin(b,dojo.marginBox(b.domNode));dojo.mixin(b,c)};dijit.layout.layoutChildren=function(b,c,d){c=dojo.mixin({},
c);dojo.addClass(b,"dijitLayoutContainer");d=dojo.filter(d,function(e){return e.layoutAlign!="client"}).concat(dojo.filter(d,function(e){return e.layoutAlign=="client"}));dojo.forEach(d,function(e){var f=e.domNode,g=e.layoutAlign,h=f.style;h.left=c.l+"px";h.top=c.t+"px";h.bottom=h.right="auto";dojo.addClass(f,"dijitAlign"+(g.substring(0,1).toUpperCase()+g.substring(1)));if(g=="top"||g=="bottom"){a(e,{w:c.w});c.h-=e.h;if(g=="top")c.t+=e.h;else h.top=c.t+c.h+"px"}else if(g=="left"||g=="right"){a(e,
{h:c.h});c.w-=e.w;if(g=="left")c.l+=e.w;else h.left=c.l+c.w+"px"}else g=="client"&&a(e,c)})}})()}
if(!dojo._hasResource["dojo.html"]){dojo._hasResource["dojo.html"]=true;dojo.provide("dojo.html");(function(){var a=0,b=dojo;dojo.html._secureForInnerHtml=function(c){return c.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};dojo.html._emptyNode=dojo.empty;dojo.html._setNodeContent=function(c,d){b.empty(c);if(d){if(typeof d=="string")d=b._toDom(d,c.ownerDocument);if(!d.nodeType&&b.isArrayLike(d))for(var e=d.length,f=0;f<d.length;f=e==d.length?f+1:0)b.place(d[f],c,"last");else b.place(d,
c,"last")}return c};dojo.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,constructor:function(c,d){dojo.mixin(this,c||{});d=this.node=dojo.byId(this.node||d);if(!this.id)this.id=["Setter",d?d.id||d.tagName:"",a++].join("_")},set:function(c,d){if(undefined!==c)this.content=c;d&&this._mixin(d);this.onBegin();this.setContent();this.onEnd();return this.node},setContent:function(){var c=this.node;if(!c)throw Error(this.declaredClass+
": setContent given no node");try{c=dojo.html._setNodeContent(c,this.content)}catch(d){var e=this.onContentError(d);try{c.innerHTML=e}catch(f){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+f.message,f)}}this.node=c},empty:function(){if(this.parseResults&&this.parseResults.length){dojo.forEach(this.parseResults,function(c){c.destroy&&c.destroy()});delete this.parseResults}dojo.html._emptyNode(this.node)},onBegin:function(){var c=this.content;if(dojo.isString(c)){if(this.cleanContent)c=
dojo.html._secureForInnerHtml(c);if(this.extractContent){var d=c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(d)c=d[1]}}this.empty();this.content=c;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.node;delete this.content},onContentError:function(c){return"Error occured setting content: "+c},_mixin:function(c){var d={},e;for(e in c)e in d||(this[e]=c[e])},_parse:function(){var c=this.node;try{this.parseResults=
dojo.parser.parse({rootNode:c,dir:this.dir,lang:this.lang})}catch(d){this._onError("Content",d,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(c,d,e){c=this["on"+c+"Error"].call(this,d);if(e)console.error(e,d);else c&&dojo.html._setNodeContent(this.node,c,true)}});dojo.html.set=function(c,d,e){if(undefined==d){console.warn("dojo.html.set: no cont argument provided, using empty string");d=""}return e?(new dojo.html._ContentSetter(dojo.mixin(e,{content:d,node:c}))).set():dojo.html._setNodeContent(c,
d,true)}})()}
if(!dojo._hasResource["dijit.layout.ContentPane"]){dojo._hasResource["dijit.layout.ContentPane"]=true;dojo.provide("dijit.layout.ContentPane");dojo.declare("dijit.layout.ContentPane",dijit._Widget,{href:"",extractContent:false,parseOnLoad:true,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",doLayout:true,
ioArgs:{},isContainer:true,isLayoutContainer:true,onLoadDeferred:null,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[]}),postMixInProperties:function(){this.inherited(arguments);var a=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,a);this.errorMessage=dojo.string.substitute(this.errorMessage,a);if(!this.href&&this.srcNodeRef&&this.srcNodeRef.innerHTML)this.isLoaded=true},buildRendering:function(){this.inherited(arguments);
if(!this.containerNode)this.containerNode=this.domNode},postCreate:function(){this.domNode.title="";dojo.attr(this.domNode,"role")||dijit.setWaiRole(this.domNode,"group");dojo.addClass(this.domNode,this.baseClass)},startup:function(){if(!this._started){var a=dijit._Contained.prototype.getParent.call(this);this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.isLoaded&&dojo.forEach(this.getChildren(),function(b){b.startup()});if(this._isShown()||this.preload)this._onShow();
this.inherited(arguments)}},_checkIfSingleChild:function(){var a=dojo.query("> *",this.containerNode).filter(function(d){return d.tagName!=="SCRIPT"}),b=a.filter(function(d){return dojo.hasAttr(d,"dojoType")||dojo.hasAttr(d,"widgetId")}),c=dojo.filter(b.map(dijit.byNode),function(d){return d&&d.domNode&&d.resize});if(a.length==b.length&&c.length==1)this._singleChild=c[0];else delete this._singleChild;dojo.toggleClass(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},setHref:function(a){dojo.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this.href=a;if(this._created&&(this.preload||this._isShown()))this._load();else this._hrefChanged=true;return this.onLoadDeferred},setContent:function(a){dojo.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this.href="";this.cancel();this.onLoadDeferred=
new dojo.Deferred(dojo.hitch(this,"cancel"));this._setContent(a||"");this._isDownloaded=false;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&this._xhrDfd.fired==-1&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},uninitialize:function(){this._beingDestroyed&&this.cancel();this.inherited(arguments)},destroyRecursive:function(){this._beingDestroyed||this.inherited(arguments)},resize:function(a,b){this._wasShown||
this._onShow();this._resizeCalled=true;a&&dojo.marginBox(this.domNode,a);var c=this.containerNode;if(c===this.domNode){var d=b||{};dojo.mixin(d,a||{});if(!("h"in d)||!("w"in d))d=dojo.mixin(dojo.marginBox(c),d);this._contentBox=dijit.layout.marginBox2contentBox(c,d)}else this._contentBox=dojo.contentBox(c);this._layoutChildren()},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open"in this)return this.open;return this._resizeCalled}else if("open"in this)return this.open;
else{var a=this.domNode;return a.style.display!="none"&&a.style.visibility!="hidden"&&!dojo.hasClass(a,"dijitHidden")}},_onShow:function(){if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))this.refresh()}else!this._childOfLayoutWidget&&this._needLayout&&this._layoutChildren();this.inherited(arguments);this._wasShown=true},refresh:function(){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this._load();return this.onLoadDeferred},
_load:function(){this._setContent(this.onDownloadStart(),true);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};dojo.isObject(this.ioArgs)&&dojo.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||dojo.xhrGet)(b);c.addCallback(function(d){try{a._isDownloaded=true;a._setContent(d,false);a.onDownloadEnd()}catch(e){a._onError("Content",e)}delete a._xhrDfd;return d});c.addErrback(function(d){c.canceled||a._onError("Download",d);delete a._xhrDfd;return d});
delete this._hrefChanged},_onLoadHandler:function(a){this.isLoaded=true;try{this.onLoadDeferred.callback(a);this.onLoad(a)}catch(b){console.error("Error "+this.widgetId+" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this.isLoaded=false;try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(){this.isLoaded&&this._onUnloadHandler();var a=this._contentSetter;dojo.forEach(this.getChildren(),
function(b){b.destroyRecursive&&b.destroyRecursive()});if(a){dojo.forEach(a.parseResults,function(b){b.destroyRecursive&&b.domNode&&b.domNode.parentNode==dojo.body()&&b.destroyRecursive()});delete a.parseResults}dojo.html._emptyNode(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var c=this._contentSetter;if(!(c&&c instanceof dojo.html._ContentSetter))c=this._contentSetter=new dojo.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,
this._onError),onContentError:dojo.hitch(this,function(e){e=this.onContentError(e);try{this.containerNode.innerHTML=e}catch(f){console.error("Fatal "+this.id+" could not change content due to "+f.message,f)}})});var d=dojo.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:this.parseOnLoad,dir:this.dir,lang:this.lang},this._contentSetterParams||{});dojo.mixin(c,d);c.set(dojo.isObject(a)&&a.domNode?a.domNode:a);delete this._contentSetterParams;if(!b){dojo.forEach(this.getChildren(),
function(e){if(!this.parseOnLoad||e.getParent)e.startup()},this);this._scheduleLayout();this._onLoadHandler(a)}},_onError:function(a,b,c){this.onLoadDeferred.errback(b);a=this["on"+a+"Error"].call(this,b);if(c)console.error(c,b);else a&&this._setContent(a,true)},_scheduleLayout:function(){if(this._isShown())this._layoutChildren();else this._needLayout=true},_layoutChildren:function(){this.doLayout&&this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||
dojo.contentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else dojo.forEach(this.getChildren(),function(b){b.resize&&b.resize()});delete this._needLayout},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})}
if(!dojo._hasResource["dijit.form._FormMixin"]){dojo._hasResource["dijit.form._FormMixin"]=true;dojo.provide("dijit.form._FormMixin");dojo.declare("dijit.form._FormMixin",null,{reset:function(){dojo.forEach(this.getDescendants(),function(a){a.reset&&a.reset()})},validate:function(){var a=false;return dojo.every(dojo.map(this.getDescendants(),function(b){b._hasBeenBlurred=true;var c=b.disabled||!b.validate||b.validate();if(!c&&!a){dojo.window.scrollIntoView(b.containerNode||b.domNode);b.focus();a=
true}return c}),function(b){return b})},setValues:function(a){dojo.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(a){var b={};dojo.forEach(this.getDescendants(),function(f){if(f.name)(b[f.name]||(b[f.name]=[])).push(f)});for(var c in b)if(b.hasOwnProperty(c)){var d=b[c],e=dojo.getObject(c,false,a);if(e!==undefined){dojo.isArray(e)||(e=[e]);if(typeof d[0].checked=="boolean")dojo.forEach(d,function(f){f.set("value",
dojo.indexOf(e,f.value)!=-1)});else d[0].multiple?d[0].set("value",e):dojo.forEach(d,function(f,g){f.set("value",e[g])})}}},getValues:function(){dojo.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var a={};dojo.forEach(this.getDescendants(),function(b){var c=b.name;if(!(!c||b.disabled)){var d=b.get("value");if(typeof b.checked=="boolean")if(/Radio/.test(b.declaredClass))if(d!==false)dojo.setObject(c,
d,a);else{d=dojo.getObject(c,false,a);d===undefined&&dojo.setObject(c,null,a)}else{b=dojo.getObject(c,false,a);if(!b){b=[];dojo.setObject(c,b,a)}d!==false&&b.push(d)}else{b=dojo.getObject(c,false,a);if(typeof b!="undefined")dojo.isArray(b)?b.push(d):dojo.setObject(c,[b,d],a);else dojo.setObject(c,d,a)}}});return a},isValid:function(){this._invalidWidgets=dojo.filter(this.getDescendants(),function(a){return!a.disabled&&a.isValid&&!a.isValid()});return!this._invalidWidgets.length},onValidStateChange:function(){},
_widgetChange:function(a){var b=this._lastValidState;if(!a||this._lastValidState===undefined){b=this.isValid();if(this._lastValidState===undefined)this._lastValidState=b}else if(a.isValid){this._invalidWidgets=dojo.filter(this._invalidWidgets||[],function(c){return c!=a},this);!a.isValid()&&!a.get("disabled")&&this._invalidWidgets.push(a);b=this._invalidWidgets.length===0}if(b!==this._lastValidState){this._lastValidState=b;this.onValidStateChange(b)}},connectChildren:function(){dojo.forEach(this._changeConnections,
dojo.hitch(this,"disconnect"));var a=this,b=this._changeConnections=[];dojo.forEach(dojo.filter(this.getDescendants(),function(c){return c.validate}),function(c){b.push(a.connect(c,"validate",dojo.hitch(a,"_widgetChange",c)));b.push(a.connect(c,"_setDisabledAttr",dojo.hitch(a,"_widgetChange",c)))});this._widgetChange(null)},startup:function(){this.inherited(arguments);this._changeConnections=[];this.connectChildren()}})}
if(!dojo._hasResource["dijit._DialogMixin"]){dojo._hasResource["dijit._DialogMixin"]=true;dojo.provide("dijit._DialogMixin");dojo.declare("dijit._DialogMixin",null,{attributeMap:dijit._Widget.prototype.attributeMap,execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(a){var b=dijit._getTabNavigable(dojo.byId(a));this._firstFocusItem=b.lowest||b.first||a;this._lastFocusItem=b.last||b.highest||
this._firstFocusItem;if(dojo.isMoz&&this._firstFocusItem.tagName.toLowerCase()=="input"&&dojo.getNodeProp(this._firstFocusItem,"type").toLowerCase()=="file"){dojo.attr(a,"tabIndex","0");this._firstFocusItem=a}}})}
if(!dojo._hasResource["dijit.TooltipDialog"]){dojo._hasResource["dijit.TooltipDialog"]=true;dojo.provide("dijit.TooltipDialog");dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:dojo.cache("dijit","templates/TooltipDialog.html",'<div waiRole="presentation">\r\n\t<div class="dijitTooltipContainer" waiRole="presentation">\r\n\t\t<div class ="dijitTooltipContents dijitTooltipFocusNode" dojoAttachPoint="containerNode" tabindex="-1" waiRole="dialog"></div>\r\n\t</div>\r\n\t<div class="dijitTooltipConnector" waiRole="presentation"></div>\r\n</div>\r\n'),
postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey");this.containerNode.title=this.title},orient:function(a,b,c){(a=this._currentOrientClass)&&dojo.removeClass(this.domNode,a);a="dijitTooltipAB"+(c.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(c.charAt(0)=="T"?"Below":"Above");dojo.addClass(this.domNode,a);this._currentOrientClass=a},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);this._onShow();if(this.autofocus){this._getFocusItems(this.containerNode);
dijit.focus(this._firstFocusItem)}},onClose:function(){this.onHide()},_onKey:function(a){var b=a.target,c=dojo.keys;a.charOrCode===c.TAB&&this._getFocusItems(this.containerNode);var d=this._firstFocusItem==this._lastFocusItem;if(a.charOrCode==c.ESCAPE){setTimeout(dojo.hitch(this,"onCancel"),0);dojo.stopEvent(a)}else if(b==this._firstFocusItem&&a.shiftKey&&a.charOrCode===c.TAB){d||dijit.focus(this._lastFocusItem);dojo.stopEvent(a)}else if(b==this._lastFocusItem&&a.charOrCode===c.TAB&&!a.shiftKey){d||
dijit.focus(this._firstFocusItem);dojo.stopEvent(a)}else a.charOrCode===c.TAB&&a.stopPropagation()}})}
if(!dojo._hasResource["dijit.form._FormSelectWidget"]){dojo._hasResource["dijit.form._FormSelectWidget"]=true;dojo.provide("dijit.form._FormSelectWidget");dojo.declare("dijit.form._FormSelectWidget",dijit.form._FormValueWidget,{multiple:false,options:null,store:null,query:null,queryOptions:null,onFetch:null,sortByLabel:true,loadChildrenOnOpen:false,getOptions:function(a){var b=a,c=this.options||[],d=c.length;if(b===undefined)return c;if(dojo.isArray(b))return dojo.map(b,"return this.getOptions(item);",
this);if(dojo.isObject(a))dojo.some(this.options,function(e,f){if(e===b||e.value&&e.value===b.value){b=f;return true}return false})||(b=-1);if(typeof b=="string")for(a=0;a<d;a++)if(c[a].value===b){b=a;break}if(typeof b=="number"&&b>=0&&b<d)return this.options[b];return null},addOption:function(a){dojo.isArray(a)||(a=[a]);dojo.forEach(a,function(b){b&&dojo.isObject(b)&&this.options.push(b)},this);this._loadChildren()},removeOption:function(a){dojo.isArray(a)||(a=[a]);a=this.getOptions(a);dojo.forEach(a,
function(b){if(b){this.options=dojo.filter(this.options,function(c){return c.value!==b.value});this._removeOptionItem(b)}},this);this._loadChildren()},updateOption:function(a){dojo.isArray(a)||(a=[a]);dojo.forEach(a,function(b){var c=this.getOptions(b),d;if(c)for(d in b)c[d]=b[d]},this);this._loadChildren()},setStore:function(a,b,c){var d=this.store;c=c||{};if(d!==a){dojo.forEach(this._notifyConnections||[],dojo.disconnect);delete this._notifyConnections;if(a&&a.getFeatures()["dojo.data.api.Notification"])this._notifyConnections=
[dojo.connect(a,"onNew",this,"_onNewItem"),dojo.connect(a,"onDelete",this,"_onDeleteItem"),dojo.connect(a,"onSet",this,"_onSetItem")];this.store=a}this._onChangeActive=false;this.options&&this.options.length&&this.removeOption(this.options);if(a){var e=dojo.mixin({onComplete:function(f){this.sortByLabel&&!c.sort&&f.length&&f.sort(dojo.data.util.sorter.createSortFunction([{attribute:a.getLabelAttributes(f[0])[0]}],a));if(c.onFetch)f=c.onFetch(f);dojo.forEach(f,function(g){this._addOptionForItem(g)},
this);this._loadingStore=false;this.set("value","_pendingValue"in this?this._pendingValue:b);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(f):this._loadChildren();this._fetchedWith=e;this._lastValueReported=this.multiple?[]:null;this._onChangeActive=true;this.onSetStore();this._handleOnChange(this.value)},scope:this},c);this._loadingStore=true;a.fetch(e)}else delete this._fetchedWith;return d},_setValueAttr:function(a,b){if(this._loadingStore)this._pendingValue=a;else{var c=
this.getOptions()||[];dojo.isArray(a)||(a=[a]);dojo.forEach(a,function(f,g){dojo.isObject(f)||(f+="");if(typeof f==="string")a[g]=dojo.filter(c,function(h){return h.value===f})[0]||{value:"",label:""}},this);a=dojo.filter(a,function(f){return f&&f.value});if(!this.multiple&&(!a[0]||!a[0].value)&&c.length)a[0]=c[0];dojo.forEach(c,function(f){f.selected=dojo.some(a,function(g){return g.value===f.value})});var d=dojo.map(a,function(f){return f.value}),e=dojo.map(a,function(f){return f.label});this.value=
this.multiple?d:d[0];this._setDisplay(this.multiple?e:e[0]);this._updateSelection();this._handleOnChange(this.value,b)}},_getDisplayedValueAttr:function(){var a=this.get("value");dojo.isArray(a)||(a=[a]);a=dojo.map(this.getOptions(a),function(b){if(b&&"label"in b)return b.label;else if(b)return b.value;return null},this);return this.multiple?a:a[0]},_getValueDeprecated:false,getValue:function(){return this._lastValue},undo:function(){this._setValueAttr(this._lastValueReported,false)},_loadChildren:function(){if(!this._loadingStore){dojo.forEach(this._getChildren(),
function(a){a.destroyRecursive()});dojo.forEach(this.options,this._addOptionItem,this);this._updateSelection()}},_updateSelection:function(){var a=this.value=this._getValueFromOpts();dojo.isArray(a)||(a=[a]);a&&a[0]&&dojo.forEach(this._getChildren(),function(b){var c=dojo.some(a,function(d){return b.option&&d===b.option.value});dojo.toggleClass(b.domNode,this.baseClass+"SelectedOption",c);dijit.setWaiState(b.domNode,"selected",c)},this);this._handleOnChange(this.value)},_getValueFromOpts:function(){var a=
this.getOptions()||[];if(!this.multiple&&a.length){var b=dojo.filter(a,function(c){return c.selected})[0];if(b&&b.value)return b.value;else{a[0].selected=true;return a[0].value}}else if(this.multiple)return dojo.map(dojo.filter(a,function(c){return c.selected}),function(c){return c.value})||[];return""},_onNewItem:function(a,b){if(!b||!b.parent)this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption(this.store.getIdentity(a))},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},
_getOptionObjForItem:function(a){var b=this.store,c=b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded(a)?this.addOption(this._getOptionObjForItem(a)):b.loadItem({item:a,onComplete:function(){this._addOptionForItem(a)},scope:this})},constructor:function(a){this._oValue=(a||{}).value||null},_fillContent:function(){var a=this.options;if(!a)a=this.options=this.srcNodeRef?dojo.query(">",this.srcNodeRef).map(function(b){if(b.getAttribute("type")===
"separator")return{value:"",label:"",selected:false,disabled:false};return{value:b.getAttribute("value"),label:String(b.innerHTML),selected:b.getAttribute("selected")||false,disabled:b.getAttribute("disabled")||false}},this):[];if(this.value){if(this.multiple&&typeof this.value=="string")this.value=this.value.split(",")}else this.value=this._getValueFromOpts()},postCreate:function(){dojo.setSelectable(this.focusNode,false);this.inherited(arguments);this.connect(this,"onChange","_updateSelection");
this.connect(this,"startup","_loadChildren");this._setValueAttr(this.value,null)},startup:function(){this.inherited(arguments);var a=this.store,b={};dojo.forEach(["query","queryOptions","onFetch"],function(c){if(this[c])b[c]=this[c];delete this[c]},this);if(a&&a.getFeatures()["dojo.data.api.Identity"]){this.store=null;this.setStore(a,this._oValue,b)}},destroy:function(){dojo.forEach(this._notifyConnections||[],dojo.disconnect);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},
_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions(this.get("value"))},_pseudoLoadChildren:function(){},onSetStore:function(){}})}
if(!dojo._hasResource["dijit._KeyNavContainer"]){dojo._hasResource["dijit._KeyNavContainer"]=true;dojo.provide("dijit._KeyNavContainer");dojo.declare("dijit._KeyNavContainer",dijit._Container,{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(a,b){var c=this._keyNavCodes={},d=dojo.hitch(this,this.focusPrev),e=dojo.hitch(this,this.focusNext);dojo.forEach(a,function(f){c[f]=d});dojo.forEach(b,function(f){c[f]=e});this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,
"onfocus","_onContainerFocus")},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"))},addChild:function(a){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(a)},focus:function(){this.focusFirstChild()},focusFirstChild:function(){var a=this._getFirstFocusableChild();a&&this.focusChild(a)},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,
-1),true)},focusChild:function(a,b){this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild);a.focus(b?"end":"start");this.focusedChild=a},_startupChild:function(a){a.set("tabIndex","-1");this.connect(a,"_onFocus",function(){a.set("tabIndex",this.tabIndex)});this.connect(a,"_onBlur",function(){a.set("tabIndex","-1")})},_onContainerFocus:function(a){if(a.target===this.domNode){this.focusFirstChild();dojo.attr(this.domNode,"tabIndex","-1")}},_onBlur:function(){this.tabIndex&&dojo.attr(this.domNode,
"tabIndex",this.tabIndex);this.inherited(arguments)},_onContainerKeypress:function(a){if(!(a.ctrlKey||a.altKey)){var b=this._keyNavCodes[a.charOrCode];if(b){b();dojo.stopEvent(a)}}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getNextFocusableChild:function(a,b){if(a)a=this._getSiblingOfChild(a,b);for(var c=this.getChildren(),d=0;d<c.length;d++){a||(a=c[b>0?0:c.length-1]);if(a.isFocusable())return a;a=this._getSiblingOfChild(a,b)}return null}})}
if(!dojo._hasResource["dijit.MenuItem"]){dojo._hasResource["dijit.MenuItem"]=true;dojo.provide("dijit.MenuItem");dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/MenuItem.html",'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" waiRole="menuitem" tabIndex="-1"\r\n\t\tdojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">\r\n\t<td class="dijitReset dijitMenuItemIconCell" waiRole="presentation">\r\n\t\t<img src="${_blankGif}" alt="" class="dijitIcon dijitMenuItemIcon" dojoAttachPoint="iconNode"/>\r\n\t</td>\r\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode"></td>\r\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td>\r\n\t<td class="dijitReset dijitMenuArrowCell" waiRole="presentation">\r\n\t\t<div dojoAttachPoint="arrowWrapper" style="visibility: hidden">\r\n\t\t\t<img src="${_blankGif}" alt="" class="dijitMenuExpand"/>\r\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\r\n\t\t</div>\r\n\t</td>\r\n</tr>\r\n'),
attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),baseClass:"dijitMenuItem",label:"",iconClass:"",accelKey:"",disabled:false,_fillContent:function(a){a&&!("label"in this.params)&&this.set("label",a.innerHTML)},postCreate:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);var a=this.id+"_text";dojo.attr(this.containerNode,"id",a);if(this.accelKeyNode){dojo.attr(this.accelKeyNode,
"id",this.id+"_accel");a+=" "+this.id+"_accel"}dijit.setWaiState(this.domNode,"labelledby",a)},_onHover:function(){this.getParent().onItemHover(this)},_onUnhover:function(){this.getParent().onItemUnhover(this);this._hovering=false;this._setStateClass()},_onClick:function(a){this.getParent().onItemClick(this,a);dojo.stopEvent(a)},onClick:function(){},focus:function(){try{dojo.isIE==8&&this.containerNode.focus();dijit.focus(this.focusNode)}catch(a){}},_onFocus:function(){this._setSelected(true);this.getParent()._onItemFocus(this);
this.inherited(arguments)},_setSelected:function(a){dojo.toggleClass(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},setDisabled:function(a){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.disabled=a;dijit.setWaiState(this.focusNode,"disabled",a?"true":
"false")},_setAccelKeyAttr:function(a){this.accelKey=a;this.accelKeyNode.style.display=a?"":"none";this.accelKeyNode.innerHTML=a;dojo.attr(this.containerNode,"colSpan",a?"1":"2")}})}
if(!dojo._hasResource["dijit.PopupMenuItem"]){dojo._hasResource["dijit.PopupMenuItem"]=true;dojo.provide("dijit.PopupMenuItem");dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=
dijit.byNode(a)}dojo.body().appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&dojo.style(this.arrowWrapper,"visibility","");dijit.setWaiState(this.focusNode,"haspopup","true")}},destroyDescendants:function(){if(this.popup){this.popup._destroyed||this.popup.destroyRecursive();delete this.popup}this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.CheckedMenuItem"]){dojo._hasResource["dijit.CheckedMenuItem"]=true;dojo.provide("dijit.CheckedMenuItem");dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:dojo.cache("dijit","templates/CheckedMenuItem.html",'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" waiRole="menuitemcheckbox" tabIndex="-1"\r\n\t\tdojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">\r\n\t<td class="dijitReset dijitMenuItemIconCell" waiRole="presentation">\r\n\t\t<img src="${_blankGif}" alt="" class="dijitMenuItemIcon dijitCheckedMenuItemIcon" dojoAttachPoint="iconNode"/>\r\n\t\t<span class="dijitCheckedMenuItemIconChar">&#10003;</span>\r\n\t</td>\r\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode,labelNode"></td>\r\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td>\r\n\t<td class="dijitReset dijitMenuArrowCell" waiRole="presentation">&nbsp;</td>\r\n</tr>\r\n'),
checked:false,_setCheckedAttr:function(a){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",a);dijit.setWaiState(this.domNode,"checked",a);this.checked=a},onChange:function(){},_onClick:function(){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked)}this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.MenuSeparator"]){dojo._hasResource["dijit.MenuSeparator"]=true;dojo.provide("dijit.MenuSeparator");dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuSeparator.html",'<tr class="dijitMenuSeparator">\r\n\t<td class="dijitMenuSeparatorIconCell">\r\n\t\t<div class="dijitMenuSeparatorTop"></div>\r\n\t\t<div class="dijitMenuSeparatorBottom"></div>\r\n\t</td>\r\n\t<td colspan="3" class="dijitMenuSeparatorLabelCell">\r\n\t\t<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>\r\n\t\t<div class="dijitMenuSeparatorBottom"></div>\r\n\t</td>\r\n</tr>\r\n'),
postCreate:function(){dojo.setSelectable(this.domNode,false)},isFocusable:function(){return false}})}
if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){if(!this._started){dojo.forEach(this.getChildren(),function(a){a.startup()});this.startupKeyNavChildren();this.inherited(arguments)}},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.focusedChild._onClick(a);
else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var a=this.currentPopup.parentMenu;a.focusedChild&&a.focusedChild._setSelected(false);a.focusedChild=this.currentPopup.from_item;a.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup)}},onItemHover:function(a){if(this.isActive){this.focusChild(a);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer)this.hover_timer=
setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay)}this.focusedChild&&this.focusChild(a);this._hoveredChild=a},_onChildBlur:function(a){this._stopPopupTimer();a._setSelected(false);var b=a.popup;if(b){this._stopPendingCloseTimer(b);b._pendingClose_timer=setTimeout(function(){b._pendingClose_timer=null;if(b.parentMenu)b.parentMenu.currentPopup=null;dijit.popup.close(b)},this.popupDelay)}},onItemUnhover:function(a){this.isActive&&this._stopPopupTimer();if(this._hoveredChild==a)this._hoveredChild=
null},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null}},_stopPendingCloseTimer:function(a){if(a._pendingClose_timer){clearTimeout(a._pendingClose_timer);a._pendingClose_timer=null}},_stopFocusTimer:function(){if(this._focus_timer){clearTimeout(this._focus_timer);this._focus_timer=null}},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){typeof this.isShowingNow=="undefined"&&this._markActive();
this.focusChild(a);if(a.disabled)return false;if(a.popup)this._openPopup();else{this.onExecute();a.onClick(b)}},_openPopup:function(){this._stopPopupTimer();var a=this.focusedChild;if(a){var b=a.popup;if(!b.isShowingNow){if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);dijit.popup.close(this.currentPopup)}b.parentMenu=this;b.from_item=a;var c=this;dijit.popup.open({parent:this,popup:b,around:a.domNode,orient:this._orient||(this.isLeftToRight()?{TR:"TL",TL:"TR",BR:"BL",BL:"BR"}:
{TL:"TR",TR:"TL",BL:"BR",BR:"BL"}),onCancel:function(){c.focusChild(a);c._cleanUp();a._setSelected(true);c.focusedChild=a},onExecute:dojo.hitch(this,"_cleanUp")});this.currentPopup=b;b.connect(b.domNode,"onmouseenter",dojo.hitch(c,"_onPopupHover"));if(b.focus)b._focus_timer=setTimeout(dojo.hitch(b,function(){this._focus_timer=null;this.focus()}),0)}}},_markActive:function(){this.isActive=true;dojo.addClass(this.domNode,"dijitMenuActive");dojo.removeClass(this.domNode,"dijitMenuPassive")},onOpen:function(){this.isShowingNow=
true;this._markActive()},_markInactive:function(){this.isActive=false;dojo.removeClass(this.domNode,"dijitMenuActive");dojo.addClass(this.domNode,"dijitMenuPassive")},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=false;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();if(this.focusedChild){this.focusedChild._setSelected(false);this.focusedChild._onUnhover();this.focusedChild=null}if(this.currentPopup){dijit.popup.close(this.currentPopup);this.currentPopup=
null}},_onItemFocus:function(a){this._hoveredChild&&this._hoveredChild!=a&&this._hoveredChild._onUnhover()},_onBlur:function(){this._cleanUp();this.inherited(arguments)},_cleanUp:function(){this._closeChild();typeof this.isShowingNow=="undefined"&&this._markInactive()}});dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[]},templateString:dojo.cache("dijit","templates/Menu.html",'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" waiRole="menu" tabIndex="${tabIndex}" dojoAttachEvent="onkeypress:_onKeyPress" cellspacing=0>\r\n\t<tbody class="dijitReset" dojoAttachPoint="containerNode"></tbody>\r\n</table>\r\n'),
baseClass:"dijitMenu",targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(dojo.body()):dojo.forEach(this.targetNodeIds,this.bindDomNode,this);var a=dojo.keys,b=this.isLeftToRight();this._openSubMenuKey=b?a.RIGHT_ARROW:a.LEFT_ARROW;this._closeSubMenuKey=b?a.LEFT_ARROW:a.RIGHT_ARROW;this.connectKeyNavHandlers([a.UP_ARROW],[a.DOWN_ARROW])},_onKeyPress:function(a){if(!(a.ctrlKey||a.altKey))switch(a.charOrCode){case this._openSubMenuKey:this._moveToPopup(a);
dojo.stopEvent(a);break;case this._closeSubMenuKey:if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(false);else dojo.stopEvent(a)}},_iframeContentWindow:function(a){return dojo.window.get(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||a.name&&dojo.doc.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&dojo.doc.frames[a.name]&&dojo.doc.frames[a.name].document||
null},bindDomNode:function(a){a=dojo.byId(a);var b;if(a.tagName.toLowerCase()=="iframe"){var c=a,d=this._iframeContentWindow(c);b=dojo.withGlobal(d,dojo.body)}else b=a==dojo.body()?dojo.doc.documentElement:a;var e={node:a,iframe:c};dojo.attr(a,"_dijitMenu"+this.id,this._bindings.push(e));var f=dojo.hitch(this,function(g){return[dojo.connect(g,this.leftClickToOpen?"onclick":"oncontextmenu",this,function(h){dojo.stopEvent(h);this._scheduleOpen(h.target,c,{x:h.pageX,y:h.pageY})}),dojo.connect(g,"onkeydown",
this,function(h){if(h.shiftKey&&h.keyCode==dojo.keys.F10){dojo.stopEvent(h);this._scheduleOpen(h.target,c)}})]});e.connects=b?f(b):[];if(c){e.onloadHandler=dojo.hitch(this,function(){var g=this._iframeContentWindow(c);b=dojo.withGlobal(g,dojo.body);e.connects=f(b)});c.addEventListener?c.addEventListener("load",e.onloadHandler,false):c.attachEvent("onload",e.onloadHandler)}},unBindDomNode:function(a){var b;try{b=dojo.byId(a)}catch(c){return}a="_dijitMenu"+this.id;if(b&&dojo.hasAttr(b,a)){var d=dojo.attr(b,
a)-1,e=this._bindings[d];dojo.forEach(e.connects,dojo.disconnect);var f=e.iframe;if(f)f.removeEventListener?f.removeEventListener("load",e.onloadHandler,false):f.detachEvent("onload",e.onloadHandler);dojo.removeAttr(b,a);delete this._bindings[d]}},_scheduleOpen:function(a,b,c){if(!this._openTimer)this._openTimer=setTimeout(dojo.hitch(this,function(){delete this._openTimer;this._openMyself({target:a,iframe:b,coords:c})}),1)},_openMyself:function(a){function b(){i.refocus&&dijit.focus(j);dijit.popup.close(i)}
var c=a.target,d=a.iframe;if(a=a.coords){if(d){c=dojo.position(d,true);var e=this._iframeContentWindow(d);e=dojo.withGlobal(e,"_docScroll",dojo);var f=dojo.getComputedStyle(d),g=dojo._toPixelValue,h=(dojo.isIE&&dojo.isQuirks?0:g(d,f.paddingLeft))+(dojo.isIE&&dojo.isQuirks?g(d,f.borderLeftWidth):0);d=(dojo.isIE&&dojo.isQuirks?0:g(d,f.paddingTop))+(dojo.isIE&&dojo.isQuirks?g(d,f.borderTopWidth):0);a.x+=c.x+h-e.x;a.y+=c.y+d-e.y}}else{a=dojo.position(c,true);a.x+=10;a.y+=10}var i=this,j=dijit.getFocus(this);
dijit.popup.open({popup:this,x:a.x,y:a.y,onExecute:b,onCancel:b,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this)}},uninitialize:function(){dojo.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.form.Select"]){dojo._hasResource["dijit.form.Select"]=true;dojo.provide("dijit.form.Select");dojo.declare("dijit.form._SelectMenu",dijit.Menu,{buildRendering:function(){this.inherited(arguments);var a=this.menuTableNode=this.domNode,b=this.domNode=dojo.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}});a.parentNode&&a.parentNode.replaceChild(b,a);dojo.removeClass(a,"dijitMenuTable");b.className=a.className+" dijitSelectMenu";a.className="dijitReset dijitMenuTable";
dijit.setWaiRole(a,"listbox");dijit.setWaiRole(b,"presentation");b.appendChild(a)},resize:function(a){if(a){dojo.marginBox(this.domNode,a);if("w"in a)this.menuTableNode.style.width="100%"}}});dojo.declare("dijit.form.Select",[dijit.form._FormSelectWidget,dijit._HasDropDown],{baseClass:"dijitSelect",templateString:dojo.cache("dijit.form","templates/Select.html",'<table class="dijit dijitReset dijitInline dijitLeft"\r\n\tdojoAttachPoint="_buttonNode,tableNode,focusNode" cellspacing=\'0\' cellpadding=\'0\'\r\n\twaiRole="combobox" waiState="haspopup-true"\r\n\t><tbody waiRole="presentation"><tr waiRole="presentation"\r\n\t\t><td class="dijitReset dijitStretch dijitButtonContents dijitButtonNode" waiRole="presentation"\r\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"  dojoAttachPoint="containerNode,_popupStateNode"></span\r\n\t\t\t><input type="hidden" ${!nameAttrSetting} dojoAttachPoint="valueNode" value="${value}" waiState="hidden-true"\r\n\t\t/></td><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton"\r\n\t\t\t\tdojoAttachPoint="titleNode" waiRole="presentation"\r\n\t\t\t><div class="dijitReset dijitArrowButtonInner" waiRole="presentation"></div\r\n\t\t\t><div class="dijitReset dijitArrowButtonChar" waiRole="presentation">&#9660;</div\r\n\t\t></td\r\n\t></tr></tbody\r\n></table>\r\n'),
attributeMap:dojo.mixin(dojo.clone(dijit.form._FormSelectWidget.prototype.attributeMap),{style:"tableNode"}),required:false,state:"",tooltipPosition:[],emptyLabel:"",_isLoaded:false,_childrenLoaded:false,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex;this.value=this.options[a!=-1?a:0].value}this.dropDown=new dijit.form._SelectMenu({id:this.id+"_menu"});dojo.addClass(this.dropDown.domNode,this.baseClass+"Menu")},
_getMenuItemForOption:function(a){if(a.value){var b=dojo.hitch(this,"_setValueAttr",a);a=new dijit.MenuItem({option:a,label:a.label,onClick:b,disabled:a.disabled||false});dijit.setWaiRole(a.focusNode,"listitem");return a}else return new dijit.MenuSeparator},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){if(!this.dropDown)return[];return this.dropDown.getChildren()},_loadChildren:function(a){if(a===true){this.dropDown&&delete this.dropDown.focusedChild;
if(this.options.length)this.inherited(arguments);else{dojo.forEach(this._getChildren(),function(b){b.destroyRecursive()});this.dropDown.addChild(new dijit.MenuItem({label:"&nbsp;"}))}}else this._updateSelection();this._isLoaded=false;this._childrenLoaded=true;this._loadingStore||this._setValueAttr(this.value)},_setValueAttr:function(){this.inherited(arguments);dojo.attr(this.valueNode,"value",this.get("value"))},_setDisplay:function(a){this.containerNode.innerHTML='<span class="dijitReset dijitInline '+
this.baseClass+'Label">'+(a||this.emptyLabel||"&nbsp;")+"</span>";dijit.setWaiState(this.focusNode,"valuetext",a||this.emptyLabel||"&nbsp;")},validate:function(a){this.state=(a=this.isValid(a))?"":"Error";this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",a?"false":"true");var b=a?"":this._missingMsg;if(this._message!==b){this._message=b;dijit.hideTooltip(this.domNode);b&&dijit.showTooltip(b,this.domNode,this.tooltipPosition,!this.isLeftToRight())}return a},isValid:function(){return!this.required||
!/^\s*$/.test(this.value)},reset:function(){this.inherited(arguments);dijit.hideTooltip(this.domNode);this.state="";this._setStateClass();delete this._message},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=dojo.i18n.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.tableNode.style.width&&dojo.addClass(this.domNode,this.baseClass+"FixedWidth")},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(true);
this._isLoaded=true;a()},closeDropDown:function(){this.inherited(arguments);if(this.dropDown&&this.dropDown.menuTableNode)this.dropDown.menuTableNode.style.width=""},uninitialize:function(a){if(this.dropDown&&!this.dropDown._destroyed){this.dropDown.destroyRecursive(a);delete this.dropDown}this.inherited(arguments)}})}
if(!dojo._hasResource["dijit._editor.plugins.LinkDialog"]){dojo._hasResource["dijit._editor.plugins.LinkDialog"]=true;dojo.provide("dijit._editor.plugins.LinkDialog");dojo.declare("dijit._editor.plugins.LinkDialog",dijit._editor._Plugin,{buttonClass:dijit.form.DropDownButton,useDefaultCommand:false,urlRegExp:"((https?|ftps?|file)\\://|./|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",
emailRegExp:"<?(mailto\\:)([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*>?",htmlTemplate:'<a href="${urlInput}" _djrealurl="${urlInput}" target="${targetSelect}">${textInput}</a>',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,linkDialogTemplate:"<table><tr><td><label for='${id}_urlInput'>${url}</label></td><td><input dojoType='dijit.form.ValidationTextBox' required='true' id='${id}_urlInput' name='urlInput' intermediateChanges='true'></td></tr><tr><td><label for='${id}_textInput'>${text}</label></td><td><input dojoType='dijit.form.ValidationTextBox' required='true' id='${id}_textInput' name='textInput' intermediateChanges='true'></td></tr><tr><td><label for='${id}_targetSelect'>${target}</label></td><td><select id='${id}_targetSelect' name='targetSelect' dojoType='dijit.form.Select'><option selected='selected' value='_self'>${currentWindow}</option><option value='_blank'>${newWindow}</option><option value='_top'>${topWindow}</option><option value='_parent'>${parentWindow}</option></select></td></tr><tr><td colspan='2'><button dojoType='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button><button dojoType='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button></td></tr></table>",
_initButton:function(){var a=this;this.tag=this.command=="insertImage"?"img":"a";var b=dojo.mixin(dojo.i18n.getLocalization("dijit","common",this.lang),dojo.i18n.getLocalization("dijit._editor","LinkDialog",this.lang)),c=this.dropDown=new dijit.TooltipDialog({title:b[this.command+"Title"],execute:dojo.hitch(this,"setValue"),onOpen:function(){a._onOpenDialog();dijit.TooltipDialog.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(dojo.hitch(a,"_onCloseDialog"),0)}});b.urlRegExp=
this.urlRegExp;b.id=dijit.getUniqueId(this.editor.id);this._uniqueId=b.id;this._setContent(c.title+"<div style='border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'></div>"+dojo.string.substitute(this.linkDialogTemplate,b));c.startup();this._urlInput=dijit.byId(this._uniqueId+"_urlInput");this._textInput=dijit.byId(this._uniqueId+"_textInput");this._setButton=dijit.byId(this._uniqueId+"_setButton");this.connect(dijit.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel()});
this._urlInput&&this.connect(this._urlInput,"onChange","_checkAndFixInput");this._textInput&&this.connect(this._textInput,"onChange","_checkAndFixInput");this._urlRegExp=RegExp("^"+this.urlRegExp+"$","i");this._emailRegExp=RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=dojo.hitch(this,function(){var d=this._urlInput.get("value");return this._urlRegExp.test(d)||this._emailRegExp.test(d)});this._connectTagEvents();this.inherited(arguments)},_checkAndFixInput:function(){var a=this,b=this._urlInput.get("value");
if(this._delayedCheck){clearTimeout(this._delayedCheck);this._delayedCheck=null}this._delayedCheck=setTimeout(function(){var c=b,d=false,e=false;if(c&&c.length>1){c=dojo.trim(c);if(c.indexOf("mailto:")!==0)if(c.indexOf("/")>0){if(c.indexOf("://")===-1)if(c.charAt(0)!=="/"&&c.indexOf("./")!==0)if(a._hostRxp.test(c))d=true}else if(a._userAtRxp.test(c))e=true}d&&a._urlInput.set("value","http://"+c);e&&a._urlInput.set("value","mailto:"+c);a._setButton.set("disabled",!a._isValid())},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.addCallback(dojo.hitch(this,
function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick)}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(a){this.dropDown.set("content",a)},_checkValues:function(a){if(a&&a.urlInput)a.urlInput=a.urlInput.replace(/"/g,"&quot;");return a},setValue:function(a){this._onCloseDialog();if(dojo.isIE){var b=dijit.range.getSelection(this.editor.window).getRangeAt(0).endContainer;if(b.nodeType===3)b=b.parentNode;if(b&&b.nodeName&&b.nodeName.toLowerCase()!==
this.tag)b=dojo.withGlobal(this.editor.window,"getSelectedElement",dijit._editor.selection,[this.tag]);if(b&&b.nodeName&&b.nodeName.toLowerCase()===this.tag)if(this.editor.queryCommandEnabled("unlink")){dojo.withGlobal(this.editor.window,"selectElementChildren",dijit._editor.selection,[b]);this.editor.execCommand("unlink")}}a=this._checkValues(a);this.editor.execCommand("inserthtml",dojo.string.substitute(this.htmlTemplate,a))},_onCloseDialog:function(){this.editor.focus()},_getCurrentValues:function(a){var b,
c,d;if(a&&a.tagName.toLowerCase()===this.tag){b=a.getAttribute("_djrealurl")||a.getAttribute("href");d=a.getAttribute("target")||"_self";c=a.textContent||a.innerText;dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[a,true])}else c=dojo.withGlobal(this.editor.window,dijit._editor.selection.getSelectedText);return{urlInput:b||"",textInput:c||"",targetSelect:d||""}},_onOpenDialog:function(){var a;if(dojo.isIE){a=dijit.range.getSelection(this.editor.window).getRangeAt(0).endContainer;
if(a.nodeType===3)a=a.parentNode;if(a&&a.nodeName&&a.nodeName.toLowerCase()!==this.tag)a=dojo.withGlobal(this.editor.window,"getSelectedElement",dijit._editor.selection,[this.tag])}else a=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.tag]);this.dropDown.reset();this._setButton.set("disabled",true);this.dropDown.set("value",this._getCurrentValues(a))},_onDblClick:function(a){if(a&&a.target){a=a.target;if((a.tagName?a.tagName.toLowerCase():"")===this.tag&&dojo.attr(a,
"href")){dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[a]);this.editor.onDisplayChanged();setTimeout(dojo.hitch(this,function(){this.button.set("disabled",false);this.button.openDropDown()}),10)}}}});dojo.declare("dijit._editor.plugins.ImgLinkDialog",[dijit._editor.plugins.LinkDialog],{linkDialogTemplate:"<table><tr><td><label for='${id}_urlInput'>${url}</label></td><td><input dojoType='dijit.form.ValidationTextBox' regExp='${urlRegExp}' required='true' id='${id}_urlInput' name='urlInput' intermediateChanges='true'></td></tr><tr><td><label for='${id}_textInput'>${text}</label></td><td><input dojoType='dijit.form.ValidationTextBox' required='false' id='${id}_textInput' name='textInput' intermediateChanges='true'></td></tr><tr><td></td><td></td></tr><tr><td colspan='2'><button dojoType='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button><button dojoType='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button></td></tr></table>",
htmlTemplate:'<img src="${urlInput}" _djrealurl="${urlInput}" alt="${textInput}" />',tag:"img",_getCurrentValues:function(a){var b,c;if(a&&a.tagName.toLowerCase()===this.tag){b=a.getAttribute("_djrealurl")||a.getAttribute("src");c=a.getAttribute("alt");dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[a,true])}else c=dojo.withGlobal(this.editor.window,dijit._editor.selection.getSelectedText);return{urlInput:b||"",textInput:c||""}},_isValid:function(){return this._urlInput.isValid()},
_connectTagEvents:function(){this.inherited(arguments);this.editor.onLoadDeferred.addCallback(dojo.hitch(this,function(){this.connect(this.editor.editNode,"onmousedown",this._selectTag)}))},_selectTag:function(a){if(a&&a.target){a=a.target;(a.tagName?a.tagName.toLowerCase():"")===this.tag&&dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[a])}},_checkValues:function(a){if(a&&a.urlInput)a.urlInput=a.urlInput.replace(/"/g,"&quot;");if(a&&a.textInput)a.textInput=a.textInput.replace(/"/g,
"&quot;");return a},_onDblClick:function(a){if(a&&a.target){a=a.target;if((a.tagName?a.tagName.toLowerCase():"")===this.tag&&dojo.attr(a,"src")){dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[a]);this.editor.onDisplayChanged();setTimeout(dojo.hitch(this,function(){this.button.set("disabled",false);this.button.openDropDown()}),10)}}}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin)switch(a.args.name){case "createLink":a.plugin=new dijit._editor.plugins.LinkDialog({command:a.args.name});
break;case "insertImage":a.plugin=new dijit._editor.plugins.ImgLinkDialog({command:a.args.name})}})}
if(!dojo._hasResource["dojo.colors"]){dojo._hasResource["dojo.colors"]=true;dojo.provide("dojo.colors");(function(){var a=function(c,d,e){e<0&&++e;e>1&&--e;var f=6*e;if(f<1)return c+(d-c)*f;if(2*e<1)return d;if(3*e<2)return c+(d-c)*(2/3-e)*6;return c};dojo.colorFromRgb=function(c,d){var e=c.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(e){var f=e[2].split(/\s*,\s*/),g=f.length;e=e[1];if(e=="rgb"&&g==3||e=="rgba"&&g==4){e=f[0];if(e.charAt(e.length-1)=="%"){e=dojo.map(f,function(j){return parseFloat(j)*
2.56});if(g==4)e[3]=f[3];return dojo.colorFromArray(e,d)}return dojo.colorFromArray(f,d)}if(e=="hsl"&&g==3||e=="hsla"&&g==4){e=(parseFloat(f[0])%360+360)%360/360;var h=parseFloat(f[1])/100,i=parseFloat(f[2])/100;h=i<=0.5?i*(h+1):i+h-i*h;i=2*i-h;e=[a(i,h,e+1/3)*256,a(i,h,e)*256,a(i,h,e-1/3)*256,1];if(g==4)e[3]=f[3];return dojo.colorFromArray(e,d)}}return null};var b=function(c,d,e){c=Number(c);return isNaN(c)?e:c<d?d:c>e?e:c};dojo.Color.prototype.sanitize=function(){this.r=Math.round(b(this.r,0,255));
this.g=Math.round(b(this.g,0,255));this.b=Math.round(b(this.b,0,255));this.a=b(this.a,0,1);return this}})();dojo.colors.makeGrey=function(a,b){return dojo.colorFromArray([a,a,a,b])};dojo.mixin(dojo.Color.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,
105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,
79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,
230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,
50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],
orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,
144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],transparent:[0,0,0,0],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]})}
if(!dojo._hasResource["dijit._PaletteMixin"]){dojo._hasResource["dijit._PaletteMixin"]=true;dojo.provide("dijit._PaletteMixin");dojo.declare("dijit._PaletteMixin",[dijit._CssStateMixin],{defaultTimeout:500,timeoutChangeRate:0.9,value:null,_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:"",_preparePalette:function(a,b){this._cells=[];for(var c=this._blankGif,d=dojo.getObject(this.dyeClass),e=0;e<a.length;e++)for(var f=dojo.create("tr",{tabIndex:"-1"},this.gridNode),g=0;g<a[e].length;g++){var h=
a[e][g];if(h){var i=new d(h);h=dojo.create("td",{"class":this.cellClass,tabIndex:"-1",title:b[h]});i.fillCell(h,c);this.connect(h,"ondijitclick","_onCellClick");this._trackMouseState(h,this.cellClass);dojo.place(h,f);h.index=this._cells.length;this._cells.push({node:h,dye:i})}}this._xDim=a[0].length;this._yDim=a.length;var j={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1},k;for(k in j)this._connects.push(dijit.typematic.addKeyListener(this.domNode,
{charOrCode:dojo.keys[k],ctrlKey:false,altKey:false,shiftKey:false},this,function(){var l=j[k];return function(n){this._navigateByKey(l,n)}}(),this.timeoutChangeRate,this.defaultTimeout))},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node)},focus:function(){dijit.focus(this._currentFocus)},_onCellClick:function(a){var b=a.currentTarget,c=this._getDye(b).getValue();this._setCurrent(b);setTimeout(dojo.hitch(this,function(){dijit.focus(b);this._setValueAttr(c,true)}));
dojo.removeClass(b,"dijitPaletteCellHover");dojo.stopEvent(a)},_setCurrent:function(a){"_currentFocus"in this&&dojo.attr(this._currentFocus,"tabIndex","-1");(this._currentFocus=a)&&dojo.attr(a,"tabIndex",this.tabIndex)},_setValueAttr:function(a,b){this.value=null;this._selectedCell>=0&&dojo.removeClass(this._cells[this._selectedCell].node,"dijitPaletteCellSelected");this._selectedCell=-1;if(a)for(var c=0;c<this._cells.length;c++)if(a==this._cells[c].dye.getValue()){this._selectedCell=c;this.value=
a;dojo.addClass(this._cells[c].node,"dijitPaletteCellSelected");if(b||b===undefined)this.onChange(a);break}},onChange:function(){},_navigateByKey:function(a,b){if(b!=-1){var c=this._currentFocus.index+a;if(c<this._cells.length&&c>-1){c=this._cells[c].node;this._setCurrent(c);setTimeout(dojo.hitch(dijit,"focus",c),0)}}},_getDye:function(a){return this._cells[a.index].dye}})}
if(!dojo._hasResource["dijit.ColorPalette"]){dojo._hasResource["dijit.ColorPalette"]=true;dojo.provide("dijit.ColorPalette");dojo.declare("dijit.ColorPalette",[dijit._Widget,dijit._Templated,dijit._PaletteMixin],{palette:"7x10",_palettes:{"7x10":[["white","seashell","cornsilk","lemonchiffon","lightyellow","palegreen","paleturquoise","lightcyan","lavender","plum"],["lightgray","pink","bisque","moccasin","khaki","lightgreen","lightseagreen","lightskyblue","cornflowerblue","violet"],["silver","lightcoral",
"sandybrown","orange","palegoldenrod","chartreuse","mediumturquoise","skyblue","mediumslateblue","orchid"],["gray","red","orangered","darkorange","yellow","limegreen","darkseagreen","royalblue","slateblue","mediumorchid"],["dimgray","crimson","chocolate","coral","gold","forestgreen","seagreen","blue","blueviolet","darkorchid"],["darkslategray","firebrick","saddlebrown","sienna","olive","green","darkcyan","mediumblue","darkslateblue","darkmagenta"],["black","darkred","maroon","brown","darkolivegreen",
"darkgreen","midnightblue","navy","indigo","purple"]],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},_imagePaths:{"7x10":dojo.moduleUrl("dijit.themes","a11y/colors7x10.png"),"3x4":dojo.moduleUrl("dijit.themes","a11y/colors3x4.png"),"7x10-rtl":dojo.moduleUrl("dijit.themes","a11y/colors7x10-rtl.png"),"3x4-rtl":dojo.moduleUrl("dijit.themes","a11y/colors3x4-rtl.png")},templateString:dojo.cache("dijit","templates/ColorPalette.html",'<div class="dijitInline dijitColorPalette">\r\n\t<img class="dijitColorPaletteUnder" dojoAttachPoint="imageNode" waiRole="presentation" alt=""/>\r\n\t<table class="dijitPaletteTable" cellSpacing="0" cellPadding="0">\r\n\t\t<tbody dojoAttachPoint="gridNode"></tbody>\r\n\t</table>\r\n</div>\r\n'),
baseClass:"dijitColorPalette",dyeClass:"dijit._Color",buildRendering:function(){this.inherited(arguments);this.imageNode.setAttribute("src",this._imagePaths[this.palette+(this.isLeftToRight()?"":"-rtl")].toString());this._preparePalette(this._palettes[this.palette],dojo.i18n.getLocalization("dojo","colors",this.lang))}});dojo.declare("dijit._Color",dojo.Color,{constructor:function(a){this._alias=a;this.setColor(dojo.Color.named[a])},getValue:function(){return this.toHex()},fillCell:function(a,b){dojo.create("img",
{src:b,"class":"dijitPaletteImg",alt:this._alias},a)}})}
if(!dojo._hasResource["dijit._editor.plugins.TextColor"]){dojo._hasResource["dijit._editor.plugins.TextColor"]=true;dojo.provide("dijit._editor.plugins.TextColor");dojo.declare("dijit._editor.plugins.TextColor",dijit._editor._Plugin,{buttonClass:dijit.form.DropDownButton,useDefaultCommand:false,constructor:function(){this.dropDown=new dijit.ColorPalette;this.connect(this.dropDown,"onChange",function(a){this.editor.execCommand(this.command,a)})},updateState:function(){var a=this.editor,b=this.command;
if(!(!a||!a.isLoaded||!b.length)){if(this.button){var c;try{c=a.queryCommandValue(b)||""}catch(d){c=""}}if(c=="")c="#000000";if(c=="transparent")c="#ffffff";if(typeof c=="string"){if(c.indexOf("rgb")>-1)c=dojo.colorFromRgb(c).toHex()}else{c=((c&255)<<16|c&65280|(c&16711680)>>>16).toString(16);c="#000000".slice(0,7-c.length)+c}c!==this.dropDown.get("value")&&this.dropDown.set("value",c,false)}}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin)switch(a.args.name){case "foreColor":case "hiliteColor":a.plugin=
new dijit._editor.plugins.TextColor({command:a.args.name})}})}
if(!dojo._hasResource["dijit._editor.plugins.ViewSource"]){dojo._hasResource["dijit._editor.plugins.ViewSource"]=true;dojo.provide("dijit._editor.plugins.ViewSource");dojo.declare("dijit._editor.plugins.ViewSource",dijit._editor._Plugin,{stripScripts:true,stripComments:true,stripIFrames:true,readOnly:false,_fsPlugin:null,toggle:function(){if(dojo.isWebKit)this._vsFocused=true;this.button.set("checked",!this.button.get("checked"))},_initButton:function(){var a=dojo.i18n.getLocalization("dijit._editor",
"commands"),b=this.editor;this.button=new dijit.form.ToggleButton({label:a.viewSource,dir:b.dir,lang:b.lang,showLabel:false,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"ViewSource",tabIndex:"-1",onChange:dojo.hitch(this,"_showSource")});if(dojo.isIE==7)this._ieFixNode=dojo.create("div",{style:{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}},dojo.body());this.button.set("readOnly",false)},setEditor:function(a){this.editor=a;this._initButton();this.editor.addKeyHandler(dojo.keys.F12,
true,true,dojo.hitch(this,function(b){this.button.focus();this.toggle();dojo.stopEvent(b);setTimeout(dojo.hitch(this,function(){this.editor.focus()}),100)}))},_showSource:function(a){var b=this.editor,c=b._plugins,d;this._sourceShown=a;var e=this;try{this.sourceArea||this._createSourceView();if(a){b._sourceQueryCommandEnabled=b.queryCommandEnabled;b.queryCommandEnabled=function(h){return h.toLowerCase()==="viewsource"?true:false};this.editor.onDisplayChanged();d=b.get("value");d=this._filter(d);b.set("value",
d);this._pluginList=[];this._disabledPlugins=dojo.filter(c,function(h){if(h&&h.button&&!h.button.get("disabled")&&!(h instanceof dijit._editor.plugins.ViewSource)){h._vs_updateState=h.updateState;h.updateState=function(){return false};h.button.set("disabled",true);if(h.command)switch(h.command){case "bold":case "italic":case "underline":case "strikethrough":case "superscript":case "subscript":h.button.set("checked",false)}return true}});if(this._fsPlugin)this._fsPlugin._getAltViewNode=function(){return e.sourceArea};
this.sourceArea.value=d;var f=dojo.marginBox(b.iframe.parentNode);dojo.marginBox(this.sourceArea,{w:f.w,h:f.h});dojo.style(b.iframe,"display","none");dojo.style(this.sourceArea,{display:"block"});this._resizeHandle=dojo.connect(window,"onresize",this,function(){var h=dojo.window.getBox();if("_prevW"in this&&"_prevH"in this)if(h.w===this._prevW&&h.h===this._prevH)return;else{this._prevW=h.w;this._prevH=h.h}else{this._prevW=h.w;this._prevH=h.h}if(this._resizer){clearTimeout(this._resizer);delete this._resizer}this._resizer=
setTimeout(dojo.hitch(this,function(){delete this._resizer;this._resize()}),10)});setTimeout(dojo.hitch(this,this._resize),100);this.editor.onNormalizedDisplayChanged()}else{if(!b._sourceQueryCommandEnabled)return;dojo.disconnect(this._resizeHandle);delete this._resizeHandle;b.queryCommandEnabled=b._sourceQueryCommandEnabled;if(!this._readOnly){d=this.sourceArea.value;d=this._filter(d);b.beginEditing();b.set("value",d);b.endEditing()}dojo.forEach(this._disabledPlugins,function(h){h.button.set("disabled",
false);if(h._vs_updateState)h.updateState=h._vs_updateState});this._disabledPlugins=null;dojo.style(this.sourceArea,"display","none");dojo.style(b.iframe,"display","block");delete b._sourceQueryCommandEnabled;this.editor.onDisplayChanged()}setTimeout(dojo.hitch(this,function(){var h=b.domNode.parentNode;if(h)(h=dijit.getEnclosingWidget(h))&&h.resize&&h.resize();b.resize()}),300)}catch(g){console.log(g)}},_resize:function(){var a=this.editor,b=a.getHeaderHeight(),c=a.getFooterHeight(),d=dojo.position(a.domNode),
e=dojo._getPadBorderExtents(a.iframe.parentNode),f=dojo._getMarginExtents(a.iframe.parentNode),g=dojo._getPadBorderExtents(a.domNode),h=dojo._getMarginExtents(a.domNode);d={w:d.w-(g.w+h.w),h:d.h-(b+g.h+h.h+c)};if(this._fsPlugin&&this._fsPlugin.isFullscreen){h=dojo.window.getBox();d.w=h.w-g.w;d.h=h.h-(b+g.h+c)}if(dojo.isIE)d.h-=2;if(this._ieFixNode){b=-this._ieFixNode.offsetTop/1E3;d.w=Math.floor((d.w+0.9)/b);d.h=Math.floor((d.h+0.9)/b)}dojo.marginBox(this.sourceArea,{w:d.w-(e.w+f.w),h:d.h-(e.h+f.h)});
dojo.marginBox(a.iframe.parentNode,{h:d.h})},_createSourceView:function(){var a=this.editor,b=a._plugins;this.sourceArea=dojo.create("textarea");if(this.readOnly){dojo.attr(this.sourceArea,"readOnly",true);this._readOnly=true}dojo.style(this.sourceArea,{padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});dojo.place(this.sourceArea,a.iframe,"before");dojo.isIE&&a.iframe.parentNode.lastChild!==a.iframe&&dojo.style(a.iframe.parentNode.lastChild,{width:"0px",height:"0px",padding:"0px",margin:"0px",
borderWidth:"0px",borderStyle:"none"});a._viewsource_oldFocus=a.focus;var c=this;a.focus=function(){if(c._sourceShown)c.setSourceAreaCaret();else try{if(this._vsFocused){delete this._vsFocused;dijit.focus(a.editNode)}else a._viewsource_oldFocus()}catch(f){console.log(f)}};var d,e;for(d=0;d<b.length;d++)if((e=b[d])&&(e.declaredClass==="dijit._editor.plugins.FullScreen"||e.declaredClass===dijit._scopeName+"._editor.plugins.FullScreen")){this._fsPlugin=e;break}if(this._fsPlugin){this._fsPlugin._viewsource_getAltViewNode=
this._fsPlugin._getAltViewNode;this._fsPlugin._getAltViewNode=function(){return c._sourceShown?c.sourceArea:this._viewsource_getAltViewNode()}}this.connect(this.sourceArea,"onkeydown",dojo.hitch(this,function(f){if(this._sourceShown&&f.keyCode==dojo.keys.F12&&f.ctrlKey&&f.shiftKey){this.button.focus();this.button.set("checked",false);setTimeout(dojo.hitch(this,function(){a.focus()}),100);dojo.stopEvent(f)}}))},_stripScripts:function(a){if(a){a=a.replace(/<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>/ig,
"");a=a.replace(/<\s*script\b([^<>]|\s)*>?/ig,"");a=a.replace(/<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>/ig,"")}return a},_stripComments:function(a){if(a)a=a.replace(/<\!--(.|\s){1,}?--\>/g,"");return a},_stripIFrames:function(a){if(a)a=a.replace(/<\s*iframe[^>]*>((.|\s)*?)<\\?\/\s*iframe\s*>/ig,"");return a},_filter:function(a){if(a){if(this.stripScripts)a=this._stripScripts(a);if(this.stripComments)a=this._stripComments(a);if(this.stripIFrames)a=this._stripIFrames(a)}return a},setSourceAreaCaret:function(){var a=
dojo.global,b=this.sourceArea;dijit.focus(b);if(this._sourceShown&&!this.readOnly)if(dojo.isIE){if(this.sourceArea.createTextRange){a=b.createTextRange();a.collapse(true);a.moveStart("character",-99999);a.moveStart("character",0);a.moveEnd("character",0);a.select()}}else a.getSelection&&b.setSelectionRange&&b.setSelectionRange(0,0)},destroy:function(){this._ieFixNode&&dojo.body().removeChild(this._ieFixNode);if(this._resizer){clearTimeout(this._resizer);delete this._resizer}if(this._resizeHandle){dojo.disconnect(this._resizeHandle);
delete this._resizeHandle}this.inherited(arguments)}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin)if(a.args.name.toLowerCase()==="viewsource")a.plugin=new dijit._editor.plugins.ViewSource({readOnly:"readOnly"in a.args?a.args.readOnly:false,stripComments:"stripComments"in a.args?a.args.stripComments:true,stripScripts:"stripScripts"in a.args?a.args.stripScripts:true,stripIFrames:"stripIFrames"in a.args?a.args.stripIFrames:true})})}
if(!dojo._hasResource["dojo.dnd.common"]){dojo._hasResource["dojo.dnd.common"]=true;dojo.provide("dojo.dnd.common");dojo.dnd.getCopyKeyState=dojo.isCopyKey;dojo.dnd._uniqueId=0;dojo.dnd.getUniqueId=function(){var a;do a=dojo._scopeName+"Unique"+ ++dojo.dnd._uniqueId;while(dojo.byId(a));return a};dojo.dnd._empty={};dojo.dnd.isFormElement=function(a){a=a.target;if(a.nodeType==3)a=a.parentNode;return" button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+" ")>=0}}
if(!dojo._hasResource["dojo.dnd.autoscroll"]){dojo._hasResource["dojo.dnd.autoscroll"]=true;dojo.provide("dojo.dnd.autoscroll");dojo.dnd.getViewport=function(){var a=dojo.doc.documentElement,b=window,c=dojo.body();if(dojo.isMozilla)return{w:a.clientWidth,h:b.innerHeight};else if(!dojo.isOpera&&b.innerWidth)return{w:b.innerWidth,h:b.innerHeight};else if(!dojo.isOpera&&a&&a.clientWidth)return{w:a.clientWidth,h:a.clientHeight};else if(c.clientWidth)return{w:c.clientWidth,h:c.clientHeight};return null};
dojo.dnd.V_TRIGGER_AUTOSCROLL=32;dojo.dnd.H_TRIGGER_AUTOSCROLL=32;dojo.dnd.V_AUTOSCROLL_VALUE=16;dojo.dnd.H_AUTOSCROLL_VALUE=16;dojo.dnd.autoScroll=function(a){var b=dojo.dnd.getViewport(),c=0,d=0;if(a.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL)c=-dojo.dnd.H_AUTOSCROLL_VALUE;else if(a.clientX>b.w-dojo.dnd.H_TRIGGER_AUTOSCROLL)c=dojo.dnd.H_AUTOSCROLL_VALUE;if(a.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL)d=-dojo.dnd.V_AUTOSCROLL_VALUE;else if(a.clientY>b.h-dojo.dnd.V_TRIGGER_AUTOSCROLL)d=dojo.dnd.V_AUTOSCROLL_VALUE;
window.scrollBy(c,d)};dojo.dnd._validNodes={div:1,p:1,td:1};dojo.dnd._validOverflow={auto:1,scroll:1};dojo.dnd.autoScrollNodes=function(a){for(var b=a.target;b;){if(b.nodeType==1&&b.tagName.toLowerCase()in dojo.dnd._validNodes){var c=dojo.getComputedStyle(b);if(c.overflow.toLowerCase()in dojo.dnd._validOverflow){var d=dojo._getContentBox(b,c);c=dojo.position(b,true);var e=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,d.w/2),f=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,d.h/2),g=a.pageX-c.x,h=a.pageY-c.y,i=c=
0;if(dojo.isWebKit||dojo.isOpera){g+=dojo.body().scrollLeft;h+=dojo.body().scrollTop}if(g>0&&g<d.w)if(g<e)c=-e;else if(g>d.w-e)c=e;if(h>0&&h<d.h)if(h<f)i=-f;else if(h>d.h-f)i=f;d=b.scrollLeft;e=b.scrollTop;b.scrollLeft+=c;b.scrollTop+=i;if(d!=b.scrollLeft||e!=b.scrollTop)return}}try{b=b.parentNode}catch(j){b=null}}dojo.dnd.autoScroll(a)}}
if(!dojo._hasResource["dojo.dnd.Mover"]){dojo._hasResource["dojo.dnd.Mover"]=true;dojo.provide("dojo.dnd.Mover");dojo.declare("dojo.dnd.Mover",null,{constructor:function(a,b,c){this.node=dojo.byId(a);this.marginBox={l:b.pageX,t:b.pageY};this.mouseButton=b.button;b=this.host=c;a=a.ownerDocument;c=dojo.connect(a,"onmousemove",this,"onFirstMove");this.events=[dojo.connect(a,"onmousemove",this,"onMouseMove"),dojo.connect(a,"onmouseup",this,"onMouseUp"),dojo.connect(a,"ondragstart",dojo.stopEvent),dojo.connect(a.body,
"onselectstart",dojo.stopEvent),c];if(b&&b.onMoveStart)b.onMoveStart(this)},onMouseMove:function(a){dojo.dnd.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);dojo.stopEvent(a)},onMouseUp:function(a){if(dojo.isWebKit&&dojo.isMac&&this.mouseButton==2?a.button==0:this.mouseButton==a.button)this.destroy();dojo.stopEvent(a)},onFirstMove:function(a){var b=this.node.style,c,d=this.host;switch(b.position){case "relative":case "absolute":c=Math.round(parseFloat(b.left))||
0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=dojo.marginBox(this.node);c=dojo.doc.body;var e=dojo.getComputedStyle(c),f=dojo._getMarginBox(c,e);e=dojo._getContentBox(c,e);c=b.l-(e.l-f.l);b=b.t-(e.t-f.t)}this.marginBox.l=c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(d&&d.onFirstMove)d.onFirstMove(this,a);dojo.disconnect(this.events.pop())},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=
this.node=this.host=null}})}
if(!dojo._hasResource["dojo.dnd.Moveable"]){dojo._hasResource["dojo.dnd.Moveable"]=true;dojo.provide("dojo.dnd.Moveable");dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(a,b){this.node=dojo.byId(a);b||(b={});this.handle=b.handle?dojo.byId(b.handle):null;if(!this.handle)this.handle=this.node;this.delay=b.delay>0?b.delay:0;this.skip=b.skip;this.mover=b.mover?b.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,
"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")]},markupFactory:function(a,b){return new dojo.dnd.Moveable(b,a)},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null},onMouseDown:function(a){if(!(this.skip&&dojo.dnd.isFormElement(a))){if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"),dojo.connect(this.handle,"onmouseup",this,"onMouseUp"));this._lastX=a.pageX;this._lastY=
a.pageY}else this.onDragDetected(a);dojo.stopEvent(a)}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay){this.onMouseUp(a);this.onDragDetected(a)}dojo.stopEvent(a)},onMouseUp:function(a){for(var b=0;b<2;++b)dojo.disconnect(this.events.pop());dojo.stopEvent(a)},onSelectStart:function(a){if(!this.skip||!dojo.dnd.isFormElement(a))dojo.stopEvent(a)},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){dojo.publish("/dnd/move/start",
[a]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem")},onMoveStop:function(a){dojo.publish("/dnd/move/stop",[a]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})}
if(!dojo._hasResource["dojo.dnd.move"]){dojo._hasResource["dojo.dnd.move"]=true;dojo.provide("dojo.dnd.move");dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(a,b){return new dojo.dnd.move.constrainedMoveable(b,a)},constructor:function(a,b){b||(b={});this.constraints=b.constraints;this.within=b.within},onFirstMove:function(a){var b=this.constraintBox=this.constraints.call(this,a);b.r=b.l+b.w;b.b=b.t+b.h;if(this.within){a=
dojo.marginBox(a.node);b.r-=a.w;b.b-=a.h}},onMove:function(a,b){var c=this.constraintBox,d=a.node.style;d.left=(b.l<c.l?c.l:c.r<b.l?c.r:b.l)+"px";d.top=(b.t<c.t?c.t:c.b<b.t?c.b:b.t)+"px"}});dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(a,b){return new dojo.dnd.move.boxConstrainedMoveable(b,a)},constructor:function(a,b){var c=b&&b.box;this.constraints=function(){return c}}});dojo.declare("dojo.dnd.move.parentConstrainedMoveable",
dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(a,b){return new dojo.dnd.move.parentConstrainedMoveable(b,a)},constructor:function(a,b){var c=b&&b.area;this.constraints=function(){var d=this.node.parentNode,e=dojo.getComputedStyle(d),f=dojo._getMarginBox(d,e);if(c=="margin")return f;var g=dojo._getMarginExtents(d,e);f.l+=g.l;f.t+=g.t;f.w-=g.w;f.h-=g.h;if(c=="border")return f;g=dojo._getBorderExtents(d,e);f.l+=g.l;f.t+=g.t;f.w-=g.w;f.h-=g.h;if(c=="padding")return f;g=dojo._getPadExtents(d,
e);f.l+=g.l;f.t+=g.t;f.w-=g.w;f.h-=g.h;return f}}});dojo.dnd.move.constrainedMover=function(a,b){dojo.deprecated("dojo.dnd.move.constrainedMover, use dojo.dnd.move.constrainedMoveable instead");var c=function(d,e,f){dojo.dnd.Mover.call(this,d,e,f)};dojo.extend(c,dojo.dnd.Mover.prototype);dojo.extend(c,{onMouseMove:function(d){dojo.dnd.autoScroll(d);var e=this.marginBox,f=this.constraintBox,g=e.l+d.pageX;d=e.t+d.pageY;g=g<f.l?f.l:f.r<g?f.r:g;d=d<f.t?f.t:f.b<d?f.b:d;this.host.onMove(this,{l:g,t:d})},
onFirstMove:function(){dojo.dnd.Mover.prototype.onFirstMove.call(this);var d=this.constraintBox=a.call(this);d.r=d.l+d.w;d.b=d.t+d.h;if(b){var e=dojo.marginBox(this.node);d.r-=e.w;d.b-=e.h}}});return c};dojo.dnd.move.boxConstrainedMover=function(a,b){dojo.deprecated("dojo.dnd.move.boxConstrainedMover, use dojo.dnd.move.boxConstrainedMoveable instead");return dojo.dnd.move.constrainedMover(function(){return a},b)};dojo.dnd.move.parentConstrainedMover=function(a,b){dojo.deprecated("dojo.dnd.move.parentConstrainedMover, use dojo.dnd.move.parentConstrainedMoveable instead");
return dojo.dnd.move.constrainedMover(function(){var c=this.node.parentNode,d=dojo.getComputedStyle(c),e=dojo._getMarginBox(c,d);if(a=="margin")return e;var f=dojo._getMarginExtents(c,d);e.l+=f.l;e.t+=f.t;e.w-=f.w;e.h-=f.h;if(a=="border")return e;f=dojo._getBorderExtents(c,d);e.l+=f.l;e.t+=f.t;e.w-=f.w;e.h-=f.h;if(a=="padding")return e;f=dojo._getPadExtents(c,d);e.l+=f.l;e.t+=f.t;e.w-=f.w;e.h-=f.h;return e},b)};dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover;dojo.dnd.boxConstrainedMover=
dojo.dnd.move.boxConstrainedMover;dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover}
if(!dojo._hasResource["dojo.dnd.TimedMoveable"]){dojo._hasResource["dojo.dnd.TimedMoveable"]=true;dojo.provide("dojo.dnd.TimedMoveable");(function(){var a=dojo.dnd.Moveable.prototype.onMove;dojo.declare("dojo.dnd.TimedMoveable",dojo.dnd.Moveable,{timeout:40,constructor:function(b,c){c||(c={});if(c.timeout&&typeof c.timeout=="number"&&c.timeout>=0)this.timeout=c.timeout},markupFactory:function(b,c){return new dojo.dnd.TimedMoveable(c,b)},onMoveStop:function(b){if(b._timer){clearTimeout(b._timer);a.call(this,
b,b._leftTop)}dojo.dnd.Moveable.prototype.onMoveStop.apply(this,arguments)},onMove:function(b,c){b._leftTop=c;if(!b._timer){var d=this;b._timer=setTimeout(function(){b._timer=null;a.call(d,b,b._leftTop)},this.timeout)}}})})()}
if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(a){dojo.mixin(this,a);this.node=a.node;this._showArgs=dojo.mixin({},a);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=dojo.mixin({},a);this._hideArgs.node=this.node;
this._hideArgs.duration=this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);dojo.connect(this.showAnim,"beforeBegin",dojo.hitch(this.hideAnim,"stop",true));dojo.connect(this.hideAnim,"beforeBegin",dojo.hitch(this.showAnim,"stop",true))},show:function(a){return this.showAnim.play(a||0)},hide:function(a){return this.hideAnim.play(a||0)}})}
if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var a=dojo,b={_fire:function(e,f){if(this[e])this[e].apply(this,f||[]);return this}},c=function(e){this._index=-1;this._animations=e||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;a.forEach(this._animations,function(f){this.duration+=f.duration;if(f.delay)this.duration+=f.delay},this)};a.extend(c,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){a.disconnect(this._onAnimateCtx);
a.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length)this._fire("onEnd");else{this._current=this._animations[++this._index];this._onAnimateCtx=a.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=a.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true)}},play:function(e,f){if(!this._current)this._current=this._animations[this._index=0];if(!f&&this._current.status()=="playing")return this;var g=a.connect(this._current,
"beforeBegin",this,function(){this._fire("beforeBegin")}),h=a.connect(this._current,"onBegin",this,function(){this._fire("onBegin",arguments)}),i=a.connect(this._current,"onPlay",this,function(){this._fire("onPlay",arguments);a.disconnect(g);a.disconnect(h);a.disconnect(i)});this._onAnimateCtx&&a.disconnect(this._onAnimateCtx);this._onAnimateCtx=a.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx&&a.disconnect(this._onEndCtx);this._onEndCtx=a.connect(this._current,"onEnd",this,"_onEnd");
this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var e=a.connect(this._current,"onPause",this,function(){this._fire("onPause",arguments);a.disconnect(e)});this._current.pause()}return this},gotoPercent:function(e,f){this.pause();var g=this.duration*e;this._current=null;a.some(this._animations,function(h){if(h.duration<=g){this._current=h;return true}g-=h.duration;return false});this._current&&this._current.gotoPercent(g/this._current.duration,f);return this},
stop:function(e){if(this._current){if(e){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(true);this._current=this._animations[this._index]}var f=a.connect(this._current,"onStop",this,function(){this._fire("onStop",arguments);a.disconnect(f)});this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&a.disconnect(this._onAnimateCtx);this._onEndCtx&&a.disconnect(this._onEndCtx)}});
a.extend(c,b);dojo.fx.chain=function(e){return new c(e)};var d=function(e){this._animations=e||[];this._connects=[];this.duration=this._finished=0;a.forEach(e,function(g){var h=g.duration;if(g.delay)h+=g.delay;if(this.duration<h)this.duration=h;this._connects.push(a.connect(g,"onEnd",this,"_onEnd"))},this);this._pseudoAnimation=new a.Animation({curve:[0,1],duration:this.duration});var f=this;a.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(g){f._connects.push(a.connect(f._pseudoAnimation,
g,function(){f._fire(g,arguments)}))})};a.extend(d,{_doAction:function(e,f){a.forEach(this._animations,function(g){g[e].apply(g,f)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(e,f){var g=this._pseudoAnimation;g[e].apply(g,f)},play:function(){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(e,
f){var g=this.duration*e;a.forEach(this._animations,function(h){h.gotoPercent(h.duration<g?1:g/h.duration,f)});this._call("gotoPercent",arguments);return this},stop:function(){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){a.forEach(this._connects,dojo.disconnect)}});a.extend(d,b);dojo.fx.combine=function(e){return new d(e)};dojo.fx.wipeIn=function(e){var f=e.node=a.byId(e.node),g=f.style,h;e=a.animateProperty(a.mixin({properties:{height:{start:function(){h=
g.overflow;g.overflow="hidden";if(g.visibility=="hidden"||g.display=="none"){g.height="1px";g.display="";g.visibility="";return 1}else{var i=a.style(f,"height");return Math.max(i,1)}},end:function(){return f.scrollHeight}}}},e));a.connect(e,"onEnd",function(){g.height="auto";g.overflow=h});return e};dojo.fx.wipeOut=function(e){var f=(e.node=a.byId(e.node)).style,g;e=a.animateProperty(a.mixin({properties:{height:{end:1}}},e));a.connect(e,"beforeBegin",function(){g=f.overflow;f.overflow="hidden";f.display=
""});a.connect(e,"onEnd",function(){f.overflow=g;f.height="auto";f.display="none"});return e};dojo.fx.slideTo=function(e){var f=null,g=null,h=function(i){return function(){var j=a.getComputedStyle(i),k=j.position;f=k=="absolute"?i.offsetTop:parseInt(j.top)||0;g=k=="absolute"?i.offsetLeft:parseInt(j.left)||0;if(k!="absolute"&&k!="relative"){j=a.position(i,true);f=j.y;g=j.x;i.style.position="absolute";i.style.top=f+"px";i.style.left=g+"px"}}}(e.node=a.byId(e.node));h();e=a.animateProperty(a.mixin({properties:{top:e.top||
0,left:e.left||0}},e));a.connect(e,"beforeBegin",e,h);return e}})()}
if(!dojo._hasResource["dijit.DialogUnderlay"]){dojo._hasResource["dijit.DialogUnderlay"]=true;dojo.provide("dijit.DialogUnderlay");dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' dojoAttachPoint='node'></div></div>",dialogId:"","class":"",attributeMap:{id:"domNode"},_setDialogIdAttr:function(a){dojo.attr(this.node,"id",a+"_underlay")},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+
a},postCreate:function(){dojo.body().appendChild(this.domNode)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=dojo.window.getBox();b.top=c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new dijit.BackgroundIframe(this.domNode)},hide:function(){this.bgIframe.destroy();this.domNode.style.display="none"},uninitialize:function(){this.bgIframe&&this.bgIframe.destroy();
this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.Dialog"]){dojo._hasResource["dijit.Dialog"]=true;dojo.provide("dijit.Dialog");dojo.declare("dijit._DialogBase",[dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/Dialog.html",'<div class="dijitDialog" tabindex="-1" waiRole="dialog" waiState="labelledby-${id}_title">\r\n\t<div dojoAttachPoint="titleBar" class="dijitDialogTitleBar">\r\n\t<span dojoAttachPoint="titleNode" class="dijitDialogTitle" id="${id}_title"></span>\r\n\t<span dojoAttachPoint="closeButtonNode" class="dijitDialogCloseIcon" dojoAttachEvent="onclick: onCancel" title="${buttonCancel}">\r\n\t\t<span dojoAttachPoint="closeText" class="closeText" title="${buttonCancel}">x</span>\r\n\t</span>\r\n\t</div>\r\n\t\t<div dojoAttachPoint="containerNode" class="dijitDialogPaneContent"></div>\r\n</div>\r\n'),baseClass:"dijitDialog",
cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],"aria-describedby":""}),open:false,duration:dijit.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,"aria-describedby":"",postMixInProperties:function(){var a=dojo.i18n.getLocalization("dijit","common");dojo.mixin(this,a);this.inherited(arguments)},
postCreate:function(){dojo.style(this.domNode,{display:"none",position:"absolute"});dojo.body().appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[]},onLoad:function(){this._position();if(this.autofocus){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem)}this.inherited(arguments)},_endDrag:function(a){if(a&&a.node&&a.node===this.domNode)this._relativePosition=dojo.position(a.node)},_setup:function(){var a=
this.domNode;if(this.titleBar&&this.draggable){this._moveable=dojo.isIE==6?new dojo.dnd.TimedMoveable(a,{handle:this.titleBar}):new dojo.dnd.Moveable(a,{handle:this.titleBar,timeout:0});dojo.subscribe("/dnd/move/stop",this,"_endDrag")}else dojo.addClass(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":dojo.map(this["class"].split(/\s/),function(b){return b+"_underlay"}).join(" ")};this._fadeIn=dojo.fadeIn({node:a,duration:this.duration,beforeBegin:dojo.hitch(this,function(){var b=
dijit._underlay;if(b)b.set(this.underlayAttrs);else b=dijit._underlay=new dijit.DialogUnderlay(this.underlayAttrs);var c=dijit._dialogStack,d=948+c.length*2;c.length==1&&b.show();dojo.style(dijit._underlay.domNode,"zIndex",d);dojo.style(this.domNode,"zIndex",d+1)}),onEnd:dojo.hitch(this,function(){if(this.autofocus){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem)}})});this._fadeOut=dojo.fadeOut({node:a,duration:this.duration,onEnd:dojo.hitch(this,function(){a.style.display="none";
var b=dijit._dialogStack;if(b.length==0)dijit._underlay.hide();else{dojo.style(dijit._underlay.domNode,"zIndex",948+b.length*2);dijit._underlay.set(b[b.length-1].underlayAttrs)}if(this.refocus){var c=this._savedFocus;if(b.length>0){b=b[b.length-1];if(!dojo.isDescendant(c.node,b.domNode)){b._getFocusItems(b.domNode);c=b._firstFocusItem}}dijit.focus(c)}})})},uninitialize:function(){var a=false;if(this._fadeIn&&this._fadeIn.status()=="playing"){a=true;this._fadeIn.stop()}if(this._fadeOut&&this._fadeOut.status()==
"playing"){a=true;this._fadeOut.stop()}if((this.open||a)&&!dijit._underlay._destroyed)dijit._underlay.hide();this._moveable&&this._moveable.destroy();this.inherited(arguments)},_size:function(){this._checkIfSingleChild();if(this._singleChild){if(this._singleChildOriginalStyle)this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;delete this._singleChildOriginalStyle}else dojo.style(this.containerNode,{width:"auto",height:"auto"});var a=dojo.marginBox(this.domNode),b=dojo.window.getBox();
if(a.w>=b.w||a.h>=b.h){var c=Math.min(a.w,Math.floor(b.w*0.75));a=Math.min(a.h,Math.floor(b.h*0.75));if(this._singleChild&&this._singleChild.resize){this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;this._singleChild.resize({w:c,h:a})}else dojo.style(this.containerNode,{width:c+"px",height:a+"px",overflow:"auto",position:"relative"})}else this._singleChild&&this._singleChild.resize&&this._singleChild.resize()},_position:function(){if(!dojo.hasClass(dojo.body(),"dojoMove")){var a=
this.domNode,b=dojo.window.getBox(),c=this._relativePosition,d=c?null:dojo._getBorderBox(a);dojo.style(a,{left:Math.floor(b.l+(c?c.x:(b.w-d.w)/2))+"px",top:Math.floor(b.t+(c?c.y:(b.h-d.h)/2))+"px"})}},_onKey:function(a){var b=dijit._dialogStack;if(b[b.length-1]==this)if(a.charOrCode){b=dojo.keys;var c=a.target;a.charOrCode===b.TAB&&this._getFocusItems(this.domNode);var d=this._firstFocusItem==this._lastFocusItem;if(c==this._firstFocusItem&&a.shiftKey&&a.charOrCode===b.TAB){d||dijit.focus(this._lastFocusItem);
dojo.stopEvent(a)}else if(c==this._lastFocusItem&&a.charOrCode===b.TAB&&!a.shiftKey){d||dijit.focus(this._firstFocusItem);dojo.stopEvent(a)}else{for(;c;){if(c==this.domNode||dojo.hasClass(c,"dijitPopup"))if(a.charOrCode==b.ESCAPE)this.onCancel();else return;c=c.parentNode}if(a.charOrCode!==b.TAB)dojo.stopEvent(a);else if(!dojo.isOpera)try{this._firstFocusItem.focus()}catch(e){}}}},show:function(){if(!this.open){if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true}this._fadeOut.status()==
"playing"&&this._fadeOut.stop();this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout"));this._modalconnects.push(dojo.connect(window,"onresize",this,function(){var a=dojo.window.getBox();if(!this._oldViewport||a.h!=this._oldViewport.h||a.w!=this._oldViewport.w){this.layout();this._oldViewport=a}}));this._modalconnects.push(dojo.connect(dojo.doc.documentElement,"onkeypress",this,"_onKey"));dojo.style(this.domNode,{opacity:0,display:""});this.open=true;this._onShow();this._size();this._position();
dijit._dialogStack.push(this);this._fadeIn.play();this._savedFocus=dijit.getFocus(this)}},hide:function(){var a=dijit._dialogStack;if(!(!this._alreadyInitialized||this!=a[a.length-1])){this._fadeIn.status()=="playing"&&this._fadeIn.stop();a.pop();this._fadeOut.play();if(this._scrollConnected)this._scrollConnected=false;dojo.forEach(this._modalconnects,dojo.disconnect);this._modalconnects=[];this._relativePosition&&delete this._relativePosition;this.open=false;this.onHide()}},layout:function(){if(this.domNode.style.display!=
"none"){dijit._underlay&&dijit._underlay.layout();this._position()}},destroy:function(){dojo.forEach(this._modalconnects,dojo.disconnect);this.refocus&&this.open&&setTimeout(dojo.hitch(dijit,"focus",this._savedFocus),25);this.inherited(arguments)}});dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._DialogBase],{});dijit._dialogStack=[]}
if(!dojo._hasResource["dijit._editor.html"]){dojo._hasResource["dijit._editor.html"]=true;dojo.provide("dijit._editor.html");dijit._editor.escapeXml=function(a,b){a=a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");b||(a=a.replace(/'/gm,"&#39;"));return a};dijit._editor.getNodeHtml=function(a){var b;switch(a.nodeType){case 1:var c=a.nodeName.toLowerCase();if(!c||c.charAt(0)=="/")return"";b="<"+c;var d=[],e;if(dojo.isIE&&a.outerHTML){e=a.outerHTML;e=e.substr(0,
e.indexOf(">")).replace(/(['"])[^"']*\1/g,"");for(var f=/(\b\w+)\s?=/g,g;g=f.exec(e);){g=g[1];if(g.substr(0,3)!="_dj"){if(g=="src"||g=="href")if(a.getAttribute("_djrealurl")){d.push([g,a.getAttribute("_djrealurl")]);continue}var h,i;switch(g){case "style":h=a.style.cssText.toLowerCase();break;case "class":h=a.className;break;case "width":if(c==="img"){if(i=/width=(\S+)/i.exec(e))h=i[1];break}case "height":if(c==="img"){if(i=/height=(\S+)/i.exec(e))h=i[1];break}default:h=a.getAttribute(g)}h!=null&&
d.push([g,h.toString()])}}}else for(f=0;e=a.attributes[f++];){h=e.name;if(h.substr(0,3)!="_dj"){e=e.value;if(h=="src"||h=="href")if(a.getAttribute("_djrealurl"))e=a.getAttribute("_djrealurl");d.push([h,e])}}d.sort(function(j,k){return j[0]<k[0]?-1:j[0]==k[0]?0:1});for(f=0;e=d[f++];)b+=" "+e[0]+'="'+(dojo.isString(e[1])?dijit._editor.escapeXml(e[1],true):e[1])+'"';if(c==="script")b+=">"+a.innerHTML+"</"+c+">";else if(a.childNodes.length)b+=">"+dijit._editor.getChildrenHtml(a)+"</"+c+">";else switch(c){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":b+=
" />";break;default:b+="></"+c+">"}break;case 4:case 3:b=dijit._editor.escapeXml(a.nodeValue,true);break;case 8:b="<\!--"+dijit._editor.escapeXml(a.nodeValue,true)+"--\>";break;default:b="<\!-- Element not recognized - Type: "+a.nodeType+" Name: "+a.nodeName+"--\>"}return b};dijit._editor.getChildrenHtml=function(a){var b="";if(!a)return b;for(var c=a.childNodes||a,d=!dojo.isIE||c!==a,e,f=0;e=c[f++];)if(!d||e.parentNode==a)b+=dijit._editor.getNodeHtml(e);return b}}
if(!dojo._hasResource["dijit._editor.RichText"]){dojo._hasResource["dijit._editor.RichText"]=true;dojo.provide("dijit._editor.RichText");if(!dojo.config.useXDomain||dojo.config.allowXdRichTextSave)if(dojo._postLoad)(function(){var a=dojo.doc.createElement("textarea");a.id=dijit._scopeName+"._editor.RichText.savedContent";dojo.style(a,{display:"none",position:"absolute",top:"-100px",height:"3px",width:"3px"});dojo.body().appendChild(a)})();else try{dojo.doc.write('<textarea id="'+dijit._scopeName+
'._editor.RichText.savedContent" style="display:none;position:absolute;top:-100px;left:-100px;height:3px;width:3px;overflow:hidden;"></textarea>')}catch(e$$82){}dojo.declare("dijit._editor.RichText",[dijit._Widget,dijit._CssStateMixin],{constructor:function(a){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};this.contentPreFilters.push(dojo.hitch(this,
"_preFixUrlAttributes"));if(dojo.isMoz){this.contentPreFilters.push(this._normalizeFontStyle);this.contentPostFilters.push(this._removeMozBogus)}if(dojo.isWebKit){this.contentPreFilters.push(this._removeWebkitBogus);this.contentPostFilters.push(this._removeWebkitBogus)}dojo.isIE&&this.contentPostFilters.push(this._normalizeFontStyle);if(a&&dojo.isString(a.value))this.value=a.value;this.onLoadDeferred=new dojo.Deferred},baseClass:"dijitEditor",inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",
_content:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){"textarea"==this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.inherited(arguments);dojo.publish(dijit._scopeName+"._editor.RichText::init",[this]);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var a=
dojo.hitch(this,function(d,e){return function(){return!this.execCommand(d,e)}}),b={b:a("bold"),i:a("italic"),u:a("underline"),a:a("selectall"),s:function(){this.save(true)},m:function(){this.isTabIndent=!this.isTabIndent},"1":a("formatblock","h1"),"2":a("formatblock","h2"),"3":a("formatblock","h3"),"4":a("formatblock","h4"),"\\":a("insertunorderedlist")};if(!dojo.isIE)b.Z=a("redo");for(var c in b)this.addKeyHandler(c,true,false,b[c])},events:["onKeyPress","onKeyDown","onKeyUp","onClick"],captureEvents:[],
_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(!this._editorCommandsLocalized){this._editorCommandsLocalized=true;for(var a=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"],b="",c,d=0;c=a[d++];)b+=c.charAt(1)!="l"?"<"+c+"><span>content</span></"+c+"><br/>":"<"+c+"><li>content</li></"+c+"><br/>";a=dojo.doc.createElement("div");dojo.style(a,{position:"absolute",top:"-2000px"});dojo.doc.body.appendChild(a);a.innerHTML=b;for(b=a.firstChild;b;){dijit._editor.selection.selectElement(b.firstChild);
dojo.withGlobal(this.window,"selectElement",dijit._editor.selection,[b.firstChild]);c=b.tagName.toLowerCase();this._local2NativeFormatNames[c]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[c]]=c;b=b.nextSibling.nextSibling}dojo.body().removeChild(a)}},open:function(a){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0)this.onLoadDeferred=new dojo.Deferred;this.isClosed||this.close();dojo.publish(dijit._scopeName+"._editor.RichText::open",
[this]);this._content="";if(arguments.length==1&&a.nodeName)this.domNode=a;var b=this.domNode,c;if(dojo.isString(this.value)){c=this.value;delete this.value;b.innerHTML=""}else if(b.nodeName&&b.nodeName.toLowerCase()=="textarea"){var d=this.textarea=b;this.name=d.name;c=d.value;b=this.domNode=dojo.doc.createElement("div");b.setAttribute("widgetId",this.id);d.removeAttribute("widgetId");b.cssText=d.cssText;b.className+=" "+d.className;dojo.place(b,d,"before");var e=dojo.hitch(this,function(){dojo.style(d,
{display:"block",position:"absolute",top:"-1000px"});if(dojo.isIE){var h=d.style;this.__overflow=h.overflow;h.overflow="hidden"}});dojo.isIE?setTimeout(e,10):e();d.form&&dojo.connect(d.form,"onsubmit",this,function(){d.value=this.getValue()})}else{c=dijit._editor.getChildrenHtml(b);b.innerHTML=""}e=dojo.contentBox(b);this._oldHeight=e.h;this._oldWidth=e.w;this.savedContent=c;if(b.nodeName&&b.nodeName=="LI")b.innerHTML=" <br>";this.header=b.ownerDocument.createElement("div");b.appendChild(this.header);
this.editingArea=b.ownerDocument.createElement("div");b.appendChild(this.editingArea);this.footer=b.ownerDocument.createElement("div");b.appendChild(this.footer);if(this.name!==""&&(!dojo.config.useXDomain||dojo.config.allowXdRichTextSave)){e=dojo.byId(dijit._scopeName+"._editor.RichText.savedContent");if(e.value!==""){e=e.value.split(this._SEPARATOR);for(var f=0,g;g=e[f++];){g=g.split(":");if(g[0]==this.name){c=g[1];e.splice(f,1);break}}}dojo.addOnUnload(dojo.hitch(this,"_saveContent"))}this.isClosed=
false;e=this.editorObject=this.iframe=dojo.doc.createElement("iframe");e.id=this.id+"_iframe";this._iframeSrc=this._getIframeDocTxt();e.style.border="none";e.style.width="100%";if(this._layoutMode)e.style.height="100%";else if(dojo.isIE>=7){if(this.height)e.style.height=this.height;if(this.minHeight)e.style.minHeight=this.minHeight}else e.style.height=this.height?this.height:this.minHeight;e.frameBorder=0;e._loadFunc=dojo.hitch(this,function(h){this.window=h;this.document=this.window.document;dojo.isIE&&
this._localizeEditorCommands();this.onLoad(c)});e.setAttribute("src","javascript:parent."+dijit._scopeName+'.byId("'+this.id+'")._iframeSrc');this.editingArea.appendChild(e);if(b.nodeName=="LI")b.lastChild.style.marginTop="-1.2em";dojo.addClass(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var a=dojo.getComputedStyle(this.domNode),b="",c=true;if(dojo.isIE||!this.height&&!dojo.isMoz){b="<div id='dijitEditorBody'></div>";c=false}else if(dojo.isMoz){this._cursorToStart=
true;b="&nbsp;"}var d=[a.fontWeight,a.fontSize,a.fontFamily].join(" "),e=a.lineHeight;e=e.indexOf("px")>=0?parseFloat(e)/parseFloat(a.fontSize):e.indexOf("em")>=0?parseFloat(e):"normal";var f="",g=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(h){h=h.replace(/^;/ig,"")+";";var i=h.split(":")[0];if(i){i=dojo.trim(i);i=i.toLowerCase();var j,k="";for(j=0;j<i.length;j++){var l=i.charAt(j);switch(l){case "-":j++;l=i.charAt(j).toUpperCase();default:k+=l}}dojo.style(g.domNode,k,"")}f+=
h+";"});a=dojo.query('label[for="'+this.id+'"]');return[this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",dojo.isMoz&&a.length?"<title>"+a[0].innerHTML+"</title>\n":"","<meta http-equiv='Content-Type' content='text/html'>\n<style>\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n",dojo.isWebKit?"\t\twidth: 100%;\n":"",dojo.isWebKit?"\t\theight: 100%;\n":"","\t}\n\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",d,";\n",
this.height||dojo.isOpera?"":"\t\tposition: fixed;\n","\t\tmin-height:",this.minHeight,";\n\t\tline-height:",e,";\n\t}\n\tp{ margin: 1em 0; }\n",!c&&!this.height?"\tbody,html {overflow-y: hidden;}\n":"","\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+"}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n\tli{ min-height:1.2em; }\n</style>\n",this._applyEditingAreaStyleSheets(),"\n</head>\n<body ",c?"id='dijitEditorBody' ":"","onload='frameElement._loadFunc(window,document)' style='"+
f+"'>",b,"</body>\n</html>"].join("")},_applyEditingAreaStyleSheets:function(){var a=[];if(this.styleSheets){a=this.styleSheets.split(";");this.styleSheets=""}a=a.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var b="",c=0,d;d=a[c++];){d=(new dojo._Url(dojo.global.location,d)).toString();this.editingAreaStyleSheets.push(d);b+='<link rel="stylesheet" type="text/css" href="'+d+'"/>'}return b},addStyleSheet:function(a){var b=a.toString();if(b.charAt(0)=="."||b.charAt(0)!="/"&&
!a.host)b=(new dojo._Url(dojo.global.location,b)).toString();if(!(dojo.indexOf(this.editingAreaStyleSheets,b)>-1)){this.editingAreaStyleSheets.push(b);this.onLoadDeferred.addCallback(dojo.hitch(function(){if(this.document.createStyleSheet)this.document.createStyleSheet(b);else{var c=this.document.getElementsByTagName("head")[0],d=this.document.createElement("link");d.rel="stylesheet";d.type="text/css";d.href=b;c.appendChild(d)}}))}},removeStyleSheet:function(a){var b=a.toString();if(b.charAt(0)==
"."||b.charAt(0)!="/"&&!a.host)b=(new dojo._Url(dojo.global.location,b)).toString();a=dojo.indexOf(this.editingAreaStyleSheets,b);if(a!=-1){delete this.editingAreaStyleSheets[a];dojo.withGlobal(this.window,"query",dojo,['link:[href="'+b+'"]']).orphan()}},disabled:false,_mozSettingProps:{styleWithCSS:false},_setDisabledAttr:function(a){this.disabled=a;if(this.isLoaded){a=!!a;if(dojo.isIE||dojo.isWebKit||dojo.isOpera){var b=dojo.isIE&&(this.isLoaded||!this.focusOnLoad);if(b)this.editNode.unselectable=
"on";this.editNode.contentEditable=!a;if(b){var c=this;setTimeout(function(){c.editNode.unselectable="off"},0)}}else{try{this.document.designMode=a?"off":"on"}catch(d){return}if(!a&&this._mozSettingProps){a=this._mozSettingProps;for(b in a)if(a.hasOwnProperty(b))try{this.document.execCommand(b,false,a[b])}catch(e){}}}this._disabledOK=true}},onLoad:function(a){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;this._iframeRegHandle=dijit.registerIframe(this.iframe)}if(!dojo.isIE&&
(this.height||dojo.isMoz))this.editNode=this.document.body;else{this.editNode=this.document.body.firstChild;var b=this;if(dojo.isIE){this.editingArea.appendChild(this.tabStop=dojo.doc.createElement("<div tabIndex=-1>"));this.iframe.onfocus=function(){b.editNode.setActive()}}}this.focusNode=this.editNode;var c=this.events.concat(this.captureEvents),d=this.iframe?this.document:this.editNode;dojo.forEach(c,function(f){this.connect(d,f.toLowerCase(),f)},this);if(dojo.isIE){this.connect(this.document,
"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1}else this.connect(this.document,"onmousedown",function(){delete this._cursorToStart});if(dojo.isWebKit)this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");if(dojo.isIE)try{this.document.execCommand("RespectVisibilityInDesign",true,null)}catch(e){}this.isLoaded=true;this.set("disabled",this.disabled);c=dojo.hitch(this,function(){this.setValue(a);this.onLoadDeferred&&this.onLoadDeferred.callback(true);this.onDisplayChanged();
this.focusOnLoad&&dojo.addOnLoad(dojo.hitch(this,function(){setTimeout(dojo.hitch(this,"focus"),this.updateInterval)}));this.savedContent=this.getValue(true)});this.setValueDeferred?this.setValueDeferred.addCallback(c):c()},onKeyDown:function(a){if(a.keyCode===dojo.keys.TAB&&this.isTabIndent){dojo.stopEvent(a);if(this.queryCommandEnabled(a.shiftKey?"outdent":"indent"))this.execCommand(a.shiftKey?"outdent":"indent")}if(dojo.isIE)if(a.keyCode==dojo.keys.TAB&&!this.isTabIndent)if(a.shiftKey&&!a.ctrlKey&&
!a.altKey)this.iframe.focus();else!a.shiftKey&&!a.ctrlKey&&!a.altKey&&this.tabStop.focus();else if(a.keyCode===dojo.keys.BACKSPACE&&this.document.selection.type==="Control"){dojo.stopEvent(a);this.execCommand("delete")}else if(65<=a.keyCode&&a.keyCode<=90||a.keyCode>=37&&a.keyCode<=40){a.charCode=a.keyCode;this.onKeyPress(a)}return true},onKeyUp:function(){},setDisabled:function(a){dojo.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",
a)},_setValueAttr:function(a){this.setValue(a)},_setDisableSpellCheckAttr:function(a){this.document?dojo.attr(this.document.body,"spellcheck",!a):this.onLoadDeferred.addCallback(dojo.hitch(this,function(){dojo.attr(this.document.body,"spellcheck",!a)}));this.disableSpellCheck=a},onKeyPress:function(a){var b=this._keyHandlers[a.keyChar&&a.keyChar.toLowerCase()||a.keyCode],c=arguments;b&&!a.altKey&&dojo.some(b,function(d){if(!(d.shift^a.shiftKey)&&!(d.ctrl^(a.ctrlKey||a.metaKey))){d.handler.apply(this,
c)||a.preventDefault();return true}},this);if(!this._onKeyHitch)this._onKeyHitch=dojo.hitch(this,"onKeyPressed");setTimeout(this._onKeyHitch,1);return true},addKeyHandler:function(a,b,c,d){dojo.isArray(this._keyHandlers[a])||(this._keyHandlers[a]=[]);this._keyHandlers[a].push({shift:c||false,ctrl:b||false,handler:d})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(a){this.onDisplayChanged(a)},_onIEMouseDown:function(){!this._focused&&!this.disabled&&this.focus()},_onBlur:function(){this.inherited(arguments);
var a=this.getValue(true);if(a!=this.savedContent){this.onChange(a);this.savedContent=a}},_onFocus:function(){if(!this.disabled){this._disabledOK||this.set("disabled",false);this.inherited(arguments)}},blur:function(){if(!dojo.isIE&&this.window.document.documentElement&&this.window.document.documentElement.focus)this.window.document.documentElement.focus();else dojo.doc.body.focus&&dojo.doc.body.focus()},focus:function(){if(this.isLoaded){if(this._cursorToStart){delete this._cursorToStart;if(this.editNode.childNodes){this.placeCursorAtStart();
return}}if(dojo.isIE)this.editNode&&this.editNode.focus&&this.iframe.fireEvent("onfocus",document.createEventObject());else dijit.focus(this.iframe)}else this.focusOnLoad=true},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&clearTimeout(this._updateTimer);if(!this._updateHandler)this._updateHandler=dojo.hitch(this,"onNormalizedDisplayChanged");this._updateTimer=setTimeout(this._updateHandler,this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},
onChange:function(){},_normalizeCommand:function(a,b){var c=a.toLowerCase();if(c=="formatblock"){if(dojo.isSafari&&b===undefined)c="heading"}else if(c=="hilitecolor"&&!dojo.isMoz)c="backcolor";return c},_qcaCache:{},queryCommandAvailable:function(a){var b=this._qcaCache[a];if(b!==undefined)return b;return this._qcaCache[a]=this._queryCommandAvailable(a)},_queryCommandAvailable:function(a){function b(i){return{ie:Boolean(i&c),mozilla:Boolean(i&d),webkit:Boolean(i&e),webkit420:Boolean(i&g),opera:Boolean(i&
f)}}var c=1,d=2,e=4,f=8,g=16,h=null;switch(a.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":h=b(d|c|e|f);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":h=
b(d|c|f|g);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":h=b(c);break;case "cut":case "copy":case "paste":h=b(c|d|g);break;case "inserttable":h=b(d|c);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":h=b(c|d);break;default:return false}return dojo.isIE&&h.ie||dojo.isMoz&&h.mozilla||dojo.isWebKit&&h.webkit||dojo.isWebKit>420&&h.webkit420||
dojo.isOpera&&h.opera},execCommand:function(a,b){var c;this.focus();a=this._normalizeCommand(a,b);if(b!==undefined)if(a=="heading")throw Error("unimplemented");else if(a=="formatblock"&&dojo.isIE)b="<"+b+">";var d="_"+a+"Impl";if(this[d])c=this[d](b);else if((b=arguments.length>1?b:null)||a!="createlink")c=this.document.execCommand(a,false,b);this.onDisplayChanged();return c},queryCommandEnabled:function(a){if(this.disabled||!this._disabledOK)return false;a=this._normalizeCommand(a);if(dojo.isMoz||
dojo.isWebKit)if(a=="unlink")return this._sCall("hasAncestorElement",["a"]);else if(a=="inserttable")return true;if(dojo.isWebKit)if(a=="copy")a="cut";else if(a=="paste")return true;var b=dojo.isIE?this.document.selection.createRange():this.document;try{return b.queryCommandEnabled(a)}catch(c){return false}},queryCommandState:function(a){if(this.disabled||!this._disabledOK)return false;a=this._normalizeCommand(a);try{return this.document.queryCommandState(a)}catch(b){return false}},queryCommandValue:function(a){if(this.disabled||
!this._disabledOK)return false;a=this._normalizeCommand(a);if(dojo.isIE&&a=="formatblock")a=this._native2LocalFormatNames[this.document.queryCommandValue(a)];else if(dojo.isMoz&&a==="hilitecolor"){var b;try{b=this.document.queryCommandValue("styleWithCSS")}catch(c){b=false}this.document.execCommand("styleWithCSS",false,true);a=this.document.queryCommandValue(a);this.document.execCommand("styleWithCSS",false,b)}else a=this.document.queryCommandValue(a);return a},_sCall:function(a,b){return dojo.withGlobal(this.window,
a,dijit._editor.selection,b)},placeCursorAtStart:function(){this.focus();var a=false;if(dojo.isMoz)for(var b=this.editNode.firstChild;b;){if(b.nodeType==3){if(b.nodeValue.replace(/^\s+|\s+$/g,"").length>0){a=true;this._sCall("selectElement",[b]);break}}else if(b.nodeType==1){a=true;/br|input|img|base|meta|area|basefont|hr|link/.test(b.tagName?b.tagName.toLowerCase():"")?this._sCall("selectElement",[b]):this._sCall("selectElementChildren",[b]);break}b=b.nextSibling}else{a=true;this._sCall("selectElementChildren",
[this.editNode])}a&&this._sCall("collapse",[true])},placeCursorAtEnd:function(){this.focus();var a=false;if(dojo.isMoz)for(var b=this.editNode.lastChild;b;){if(b.nodeType==3){if(b.nodeValue.replace(/^\s+|\s+$/g,"").length>0){a=true;this._sCall("selectElement",[b]);break}}else if(b.nodeType==1){a=true;b.lastChild?this._sCall("selectElement",[b.lastChild]):this._sCall("selectElement",[b]);break}b=b.previousSibling}else{a=true;this._sCall("selectElementChildren",[this.editNode])}a&&this._sCall("collapse",
[false])},getValue:function(a){if(this.textarea)if(this.isClosed||!this.isLoaded)return this.textarea.value;return this._postFilterContent(null,a)},_getValueAttr:function(){return this.getValue(true)},setValue:function(a){if(this.isLoaded){this._cursorToStart=true;if(this.textarea&&(this.isClosed||!this.isLoaded))this.textarea.value=a;else{a=this._preFilterContent(a);var b=this.isClosed?this.domNode:this.editNode;if(!a&&dojo.isWebKit)a="&nbsp;";b.innerHTML=a;this._preDomFilterContent(b)}this.onDisplayChanged()}else this.onLoadDeferred.addCallback(dojo.hitch(this,
function(){this.setValue(a)}))},replaceValue:function(a){if(this.isClosed)this.setValue(a);else if(this.window&&this.window.getSelection&&!dojo.isMoz)this.setValue(a);else if(this.window&&this.window.getSelection){a=this._preFilterContent(a);this.execCommand("selectall");if(!a){this._cursorToStart=true;a="&nbsp;"}this.execCommand("inserthtml",a);this._preDomFilterContent(this.editNode)}else this.document&&this.document.selection&&this.setValue(a)},_preFilterContent:function(a){var b=a;dojo.forEach(this.contentPreFilters,
function(c){if(c)b=c(b)});return b},_preDomFilterContent:function(a){a=a||this.editNode;dojo.forEach(this.contentDomPreFilters,function(b){b&&dojo.isFunction(b)&&b(a)},this)},_postFilterContent:function(a,b){var c;if(dojo.isString(a))c=a;else{a=a||this.editNode;if(this.contentDomPostFilters.length){if(b)a=dojo.clone(a);dojo.forEach(this.contentDomPostFilters,function(d){a=d(a)})}c=dijit._editor.getChildrenHtml(a)}dojo.trim(c.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(c="");dojo.forEach(this.contentPostFilters,
function(d){c=d(c)});return c},_saveContent:function(){var a=dojo.byId(dijit._scopeName+"._editor.RichText.savedContent");if(a.value)a.value+=this._SEPARATOR;a.value+=this.name+":"+this.getValue(true)},escapeXml:function(a,b){a=a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");b||(a=a.replace(/'/gm,"&#39;"));return a},getNodeHtml:function(a){dojo.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit._editor.getNodeHtml instead",2);return dijit._editor.getNodeHtml(a)},
getNodeChildrenHtml:function(a){dojo.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit._editor.getChildrenHtml instead",2);return dijit._editor.getChildrenHtml(a)},close:function(a){if(this.isClosed)return false;arguments.length||(a=true);this._content=this.getValue();var b=this.savedContent!=this._content;this.interval&&clearInterval(this.interval);if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener}if(dojo.isIE)this.iframe.onfocus=null;
this.iframe._loadFunc=null;if(this._iframeRegHandle){dijit.unregisterIframe(this._iframeRegHandle);delete this._iframeRegHandle}if(this.textarea){var c=this.textarea.style;c.position="";c.left=c.top="";if(dojo.isIE){c.overflow=this.__overflow;this.__overflow=null}this.textarea.value=a?this._content:this.savedContent;dojo.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=a?this._content:this.savedContent;delete this.iframe;dojo.removeClass(this.domNode,this.baseClass);this.isClosed=
true;this.isLoaded=false;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement)this.window._frameElement=null;this.editorObject=this.editingArea=this.document=this.window=null;return b},destroy:function(){this.isClosed||this.close(false);this.inherited(arguments)},_removeMozBogus:function(a){return a.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(a){a=a.replace(/\sclass="webkit-block-placeholder"/gi,
"");return a=a.replace(/\sclass="apple-style-span"/gi,"")},_normalizeFontStyle:function(a){return a.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2")},_preFixUrlAttributes:function(a){return a.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2")},_inserthorizontalruleImpl:function(a){if(dojo.isIE)return this._inserthtmlImpl("<hr>");
return this.document.execCommand("inserthorizontalrule",false,a)},_unlinkImpl:function(a){if(this.queryCommandEnabled("unlink")&&(dojo.isMoz||dojo.isWebKit)){this._sCall("selectElement",[this._sCall("getAncestorElement",["a"])]);return this.document.execCommand("unlink",false,null)}return this.document.execCommand("unlink",false,a)},_hilitecolorImpl:function(a){if(dojo.isMoz){this.document.execCommand("styleWithCSS",false,true);a=this.document.execCommand("hilitecolor",false,a);this.document.execCommand("styleWithCSS",
false,false)}else a=this.document.execCommand("hilitecolor",false,a);return a},_backcolorImpl:function(a){if(dojo.isIE)a=a?a:null;return this.document.execCommand("backcolor",false,a)},_forecolorImpl:function(a){if(dojo.isIE)a=a?a:null;return this.document.execCommand("forecolor",false,a)},_inserthtmlImpl:function(a){a=this._preFilterContent(a);var b=true;if(dojo.isIE){var c=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()=="CONTROL"){for(var d=c.item(0);c.length;)c.remove(c.item(0));
d.outerHTML=a}else c.pasteHTML(a);c.select()}else if(dojo.isMoz&&!a.length)this._sCall("remove");else b=this.document.execCommand("inserthtml",false,a);return b},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(a){var b=0;if(a&&a.childNodes){var c;for(c=0;c<a.childNodes.length;c++){var d=dojo.position(a.childNodes[c]);b+=d.h}}return b}})}
if(!dojo._hasResource["dijit.ToolbarSeparator"]){dojo._hasResource["dijit.ToolbarSeparator"]=true;dojo.provide("dijit.ToolbarSeparator");dojo.declare("dijit.ToolbarSeparator",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitToolbarSeparator dijitInline" waiRole="presentation"></div>',postCreate:function(){dojo.setSelectable(this.domNode,false)},isFocusable:function(){return false}})}
if(!dojo._hasResource["dijit.Toolbar"]){dojo._hasResource["dijit.Toolbar"]=true;dojo.provide("dijit.Toolbar");dojo.declare("dijit.Toolbar",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{templateString:'<div class="dijit" waiRole="toolbar" tabIndex="${tabIndex}" dojoAttachPoint="containerNode"></div>',baseClass:"dijitToolbar",postCreate:function(){this.connectKeyNavHandlers(this.isLeftToRight()?[dojo.keys.LEFT_ARROW]:[dojo.keys.RIGHT_ARROW],this.isLeftToRight()?[dojo.keys.RIGHT_ARROW]:[dojo.keys.LEFT_ARROW]);
this.inherited(arguments)},startup:function(){if(!this._started){this.startupKeyNavChildren();this.inherited(arguments)}}})}
if(!dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]){dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]=true;dojo.provide("dijit._editor.plugins.EnterKeyHandling");dojo.declare("dijit._editor.plugins.EnterKeyHandling",dijit._editor._Plugin,{blockNodeForEnter:"BR",constructor:function(a){a&&dojo.mixin(this,a)},setEditor:function(a){this.editor=a;if(this.blockNodeForEnter=="BR")if(dojo.isIE){a.contentDomPreFilters.push(dojo.hitch(this,"regularPsToSingleLinePs"));a.contentDomPostFilters.push(dojo.hitch(this,
"singleLinePsToRegularPs"));a.onLoadDeferred.addCallback(dojo.hitch(this,"_fixNewLineBehaviorForIE"))}else a.onLoadDeferred.addCallback(dojo.hitch(this,function(c){try{this.editor.document.execCommand("insertBrOnReturn",false,true)}catch(d){}return c}));else if(this.blockNodeForEnter){dojo.require("dijit._editor.range");var b=dojo.hitch(this,this.handleEnterKey);a.addKeyHandler(13,0,0,b);a.addKeyHandler(13,0,1,b);this.connect(this.editor,"onKeyPressed","onKeyPressed")}},onKeyPressed:function(){if(this._checkListLater){if(dojo.withGlobal(this.editor.window,
"isCollapsed",dijit)){var a=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,["LI"]);if(a){if(dojo.isMoz)if(a.parentNode.parentNode.nodeName=="LI")a=a.parentNode.parentNode;var b=a.firstChild;if(b&&b.nodeType==1&&(b.nodeName=="UL"||b.nodeName=="OL")){a.insertBefore(b.ownerDocument.createTextNode("\u00a0"),b);b=dijit.range.create(this.editor.window);b.setStart(a.firstChild,0);a=dijit.range.getSelection(this.editor.window,true);a.removeAllRanges();a.addRange(b)}}else{dijit._editor.RichText.prototype.execCommand.call(this.editor,
"formatblock",this.blockNodeForEnter);if(a=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter])){a.innerHTML=this.bogusHtmlContent;if(dojo.isIE){a=this.editor.document.selection.createRange();a.move("character",-1);a.select()}}else console.error("onKeyPressed: Cannot find the new block node")}}this._checkListLater=false}if(this._pressedEnterInBlock){this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);
delete this._pressedEnterInBlock}},bogusHtmlContent:"&nbsp;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(a){var b,c,d=this.editor.document,e;if(a.shiftKey){b=dojo.withGlobal(this.editor.window,"getParentElement",dijit._editor.selection);var f=dijit.range.getAncestor(b,this.blockNodes);if(f){if(!a.shiftKey&&f.tagName=="LI")return true;b=dijit.range.getSelection(this.editor.window);c=b.getRangeAt(0);if(!c.collapsed){c.deleteContents();b=dijit.range.getSelection(this.editor.window);
c=b.getRangeAt(0)}if(dijit.range.atBeginningOfContainer(f,c.startContainer,c.startOffset))if(a.shiftKey){e=d.createElement("br");c=dijit.range.create(this.editor.window);f.insertBefore(e,f.firstChild);c.setStartBefore(e.nextSibling);b.removeAllRanges();b.addRange(c)}else dojo.place(e,f,"before");else if(dijit.range.atEndOfContainer(f,c.startContainer,c.startOffset)){c=dijit.range.create(this.editor.window);e=d.createElement("br");if(a.shiftKey){f.appendChild(e);f.appendChild(d.createTextNode("\u00a0"));
c.setStart(f.lastChild,0)}else{dojo.place(e,f,"after");c.setStartAfter(f)}b.removeAllRanges();b.addRange(c)}else return true}else dijit._editor.RichText.prototype.execCommand.call(this.editor,"inserthtml","<br>");return false}e=true;b=dijit.range.getSelection(this.editor.window);c=b.getRangeAt(0);if(!c.collapsed){c.deleteContents();b=dijit.range.getSelection(this.editor.window);c=b.getRangeAt(0)}a=dijit.range.getBlockAncestor(c.endContainer,null,this.editor.editNode);if(this._checkListLater=(e=a.blockNode)&&
(e.nodeName=="LI"||e.parentNode.nodeName=="LI")){if(dojo.isMoz)this._pressedEnterInBlock=e;if(/^(\s|&nbsp;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|\xA0)<\/span>)?(<br>)?$/.test(e.innerHTML)){e.innerHTML="";if(dojo.isWebKit){c=dijit.range.create(this.editor.window);c.setStart(e,0);b.removeAllRanges();b.addRange(c)}this._checkListLater=false}return true}if(!a.blockNode||a.blockNode===this.editor.editNode){try{dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",
this.blockNodeForEnter)}catch(g){}a={blockNode:dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(a.blockNode){if(a.blockNode!=this.editor.editNode&&!(a.blockNode.textContent||a.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length){this.removeTrailingBr(a.blockNode);return false}}else a.blockNode=this.editor.editNode;b=dijit.range.getSelection(this.editor.window);c=b.getRangeAt(0)}f=d.createElement(this.blockNodeForEnter);
f.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(a.blockNode);if(dijit.range.atEndOfContainer(a.blockNode,c.endContainer,c.endOffset)){a.blockNode===a.blockContainer?a.blockNode.appendChild(f):dojo.place(f,a.blockNode,"after");e=false;c=dijit.range.create(this.editor.window);c.setStart(f,0);b.removeAllRanges();b.addRange(c);this.editor.height&&dojo.window.scrollIntoView(f)}else if(dijit.range.atBeginningOfContainer(a.blockNode,c.startContainer,c.startOffset)){dojo.place(f,a.blockNode,a.blockNode===
a.blockContainer?"first":"before");if(f.nextSibling&&this.editor.height){c=dijit.range.create(this.editor.window);c.setStart(f.nextSibling,0);b.removeAllRanges();b.addRange(c);dojo.window.scrollIntoView(f.nextSibling)}e=false}else{a.blockNode===a.blockContainer?a.blockNode.appendChild(f):dojo.place(f,a.blockNode,"after");e=false;if(a.blockNode.style)if(f.style)if(a.blockNode.style.cssText)f.style.cssText=a.blockNode.style.cssText;var h=c.startContainer;if(h&&h.nodeType==3){var i;i=h.nodeValue;var j=
d.createTextNode(i.substring(0,c.startOffset));c=d.createTextNode(i.substring(c.startOffset,i.length));dojo.place(j,h,"before");dojo.place(c,h,"after");dojo.destroy(h);for(h=j.parentNode;h!==a.blockNode;){j=d.createElement(h.tagName);if(h.style)if(j.style)if(h.style.cssText)j.style.cssText=h.style.cssText;for(;c;){i=c.nextSibling;j.appendChild(c);c=i}dojo.place(j,h,"after");c=j;h=h.parentNode}if(c.nodeType==1||c.nodeType==3&&c.nodeValue)f.innerHTML="";for(;c;){i=c.nextSibling;f.appendChild(c);c=i}}c=
dijit.range.create(this.editor.window);c.setStart(f,0);b.removeAllRanges();b.addRange(c);this.editor.height&&dijit.scrollIntoView(f);if(dojo.isMoz)this._pressedEnterInBlock=a.blockNode}return e},removeTrailingBr:function(a){if(a=/P|DIV|LI/i.test(a.tagName)?a:dijit._editor.selection.getParentOfType(a,["P","DIV","LI"])){if(a.lastChild)if(a.childNodes.length>1&&a.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(a.lastChild.nodeValue)||a.lastChild.tagName=="BR")dojo.destroy(a.lastChild);if(!a.childNodes.length)a.innerHTML=
this.bogusHtmlContent}},_fixNewLineBehaviorForIE:function(a){var b=this.editor.document;if(b.__INSERTED_EDITIOR_NEWLINE_CSS===undefined){dojo.create("style",{type:"text/css"},b.getElementsByTagName("head")[0]).styleSheet.cssText="p{margin:0;}";this.editor.document.__INSERTED_EDITIOR_NEWLINE_CSS=true}return a},regularPsToSingleLinePs:function(a,b){function c(f){for(var g=null,h=[],i=f.childNodes.length-1,j=i;j>=0;j--){g=f.childNodes[j];if(g.nodeName=="BR"){var k=g.ownerDocument.createElement("p");
dojo.place(k,f,"after");if(h.length==0&&j!=i)k.innerHTML="&nbsp;";dojo.forEach(h,function(l){k.appendChild(l)});dojo.destroy(g);h=[]}else h.unshift(g)}}var d=[],e=a.getElementsByTagName("p");dojo.forEach(e,function(f){d.push(f)});dojo.forEach(d,function(f){var g=f.previousSibling;if(g&&g.nodeType==1&&(g.nodeName=="P"||dojo.style(g,"display")!="block"))f.parentNode.insertBefore(this.document.createElement("p"),f).innerHTML=b?"":"&nbsp;";c(f)},this.editor);(function(f){function g(k){var l=k[0].ownerDocument.createElement("p");
k[0].parentNode.insertBefore(l,k[0]);dojo.forEach(k,function(n){l.appendChild(n)})}for(var h=0,i=[],j;h<f.childNodes.length;){j=f.childNodes[h];if(j.nodeType==3||j.nodeType==1&&j.nodeName!="BR"&&dojo.style(j,"display")!="block")i.push(j);else{if(i.length){g(i);h=h+1-i.length;j.nodeName=="BR"&&dojo.destroy(j)}i=[]}h++}i.length&&g(i)})(a);return a},singleLinePsToRegularPs:function(a){for(var b=function(g){g=g.getElementsByTagName("p");for(var h=[],i=0;i<g.length;i++){for(var j=g[i],k=false,l=0;l<h.length;l++)if(h[l]===
j.parentNode){k=true;break}k||h.push(j.parentNode)}return h}(a),c=0;c<b.length;c++)for(var d=null,e=b[c].firstChild,f=null;e;){if(e.nodeType!=1||e.tagName!="P"||(e.getAttributeNode("style")||{}).specified)d=null;else if(!e.childNodes.length||e.innerHTML=="&nbsp;"){f=e;d=null}else if(d==null)d=e;else{if((!d.lastChild||d.lastChild.nodeName!="BR")&&e.firstChild&&e.firstChild.nodeName!="BR")d.appendChild(this.editor.document.createElement("br"));for(;e.firstChild;)d.appendChild(e.firstChild);f=e}e=e.nextSibling;
if(f){dojo.destroy(f);f=null}}return a}})}
if(!dojo._hasResource["dijit.Editor"]){dojo._hasResource["dijit.Editor"]=true;dojo.provide("dijit.Editor");dojo.declare("dijit.Editor",dijit._editor.RichText,{plugins:null,extraPlugins:null,constructor:function(){if(!dojo.isArray(this.plugins))this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","dijit._editor.plugins.EnterKeyHandling"];
this._plugins=[];this._editInterval=this.editActionInterval*1E3;if(dojo.isIE){this.events.push("onBeforeDeactivate");this.events.push("onBeforeActivate")}},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(dojo.isArray(this.extraPlugins))this.plugins=this.plugins.concat(this.extraPlugins);this.setValueDeferred=new dojo.Deferred;this.inherited(arguments);this.commands=dojo.i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=
new dijit.Toolbar({dir:this.dir,lang:this.lang});this.header.appendChild(this.toolbar.domNode)}dojo.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.callback(true);dojo.addClass(this.iframe.parentNode,"dijitEditorIFrameContainer");dojo.addClass(this.iframe,"dijitEditorIFrame");dojo.attr(this.iframe,"allowTransparency",true);dojo.isWebKit&&dojo.style(this.domNode,"KhtmlUserSelect","none");this.toolbar.startup();this.onNormalizedDisplayChanged()},destroy:function(){dojo.forEach(this._plugins,
function(a){a&&a.destroy&&a.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(a,b){var c=dojo.isString(a)?{name:a}:a;if(!c.setEditor){var d={args:c,plugin:null,editor:this};dojo.publish(dijit._scopeName+".Editor.getPlugin",[d]);if(!d.plugin){var e=dojo.getObject(c.name);if(e)d.plugin=new e(c)}if(!d.plugin){console.warn("Cannot find plugin",a);return}a=d.plugin}if(arguments.length>1)this._plugins[b]=a;else this._plugins.push(a);
a.setEditor(this);dojo.isFunction(a.setToolbar)&&a.setToolbar(this.toolbar)},startup:function(){},resize:function(a){a&&dijit.layout._LayoutWidget.prototype.resize.apply(this,arguments)},layout:function(){this.editingArea.style.height=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+dojo._getPadBorderExtents(this.iframe.parentNode).h+dojo._getMarginExtents(this.iframe.parentNode).h)+"px";if(this.iframe)this.iframe.style.height="100%";this._layoutMode=true},_onIEMouseDown:function(a){var b,
c=this.document.body,d=c.clientWidth,e=c.clientHeight,f=c.clientLeft,g=c.offsetWidth,h=c.offsetHeight,i=c.offsetLeft;bodyDir=c.dir?c.dir.toLowerCase():"";if(bodyDir!="rtl"){if(d<g&&a.x>d&&a.x<g)b=true}else if(a.x<f&&a.x>i)b=true;if(!b)if(e<h&&a.y>e&&a.y<h)b=true;if(!b){delete this._cursorToStart;delete this._savedSelection;a.target.tagName=="BODY"&&setTimeout(dojo.hitch(this,"placeCursorAtEnd"),0);this.inherited(arguments)}},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(a){this.customUndo&&
this.endEditing(true);a.target.tagName!="BODY"&&this._saveSelection()},customUndo:dojo.isIE||dojo.isWebKit,editActionInterval:3,beginEditing:function(a){if(!this._inEditing){this._inEditing=true;this._beginEditing(a)}if(this.editActionInterval>0){this._editTimer&&clearTimeout(this._editTimer);this._editTimer=setTimeout(dojo.hitch(this,this.endEditing),this._editInterval)}},_steps:[],_undoedSteps:[],execCommand:function(a){if(this.customUndo&&(a=="undo"||a=="redo"))return this[a]();else{if(this.customUndo){this.endEditing();
this._beginEditing()}var b;try{b=this.inherited("execCommand",arguments);if(dojo.isWebKit&&a=="paste"&&!b)throw{code:1011};}catch(c){if(c.code==1011&&/copy|cut|paste/.test(a)){b=dojo.string.substitute;alert(b(this.commands.systemShortcut,[this.commands[a],b(this.commands[dojo.isMac?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[a]])]))}b=false}this.customUndo&&this._endEditing();return b}},queryCommandEnabled:function(a){return this.customUndo&&(a=="undo"||a=="redo")?a=="undo"?this._steps.length>
1:this._undoedSteps.length>0:this.inherited("queryCommandEnabled",arguments)},_moveToBookmark:function(a){var b=a.mark,c=a.mark;a=a.isCollapsed;var d,e,f;if(c)if(dojo.isIE)if(dojo.isArray(c)){b=[];dojo.forEach(c,function(g){b.push(dijit.range.getNode(g,this.editNode))},this);dojo.withGlobal(this.window,"moveToBookmark",dijit,[{mark:b,isCollapsed:a}])}else{if(c.startContainer&&c.endContainer)if((f=dijit.range.getSelection(this.window))&&f.removeAllRanges){f.removeAllRanges();a=dijit.range.create(this.window);
d=dijit.range.getNode(c.startContainer,this.editNode);e=dijit.range.getNode(c.endContainer,this.editNode);if(d&&e){a.setStart(d,c.startOffset);a.setEnd(e,c.endOffset);f.addRange(a)}}}else if((f=dijit.range.getSelection(this.window))&&f.removeAllRanges){f.removeAllRanges();a=dijit.range.create(this.window);d=dijit.range.getNode(c.startContainer,this.editNode);e=dijit.range.getNode(c.endContainer,this.editNode);if(d&&e){a.setStart(d,c.startOffset);a.setEnd(e,c.endOffset);f.addRange(a)}}},_changeToStep:function(a,
b){this.setValue(b.text);var c=b.bookmark;c&&this._moveToBookmark(c)},undo:function(){var a=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var b=this._steps.pop();if(b&&this._steps.length>0){this.focus();this._changeToStep(b,this._steps[this._steps.length-1]);this._undoedSteps.push(b);this.onDisplayChanged();delete this._undoRedoActive;a=true}delete this._undoRedoActive}return a},redo:function(){var a=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);
var b=this._undoedSteps.pop();if(b&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],b);this._steps.push(b);this.onDisplayChanged();a=true}delete this._undoRedoActive}return a},endEditing:function(a){this._editTimer&&clearTimeout(this._editTimer);if(this._inEditing){this._endEditing(a);this._inEditing=false}},_getBookmark:function(){var a=dojo.withGlobal(this.window,dijit.getBookmark),b=[];if(a&&a.mark){var c=a.mark;if(dojo.isIE){var d=dijit.range.getSelection(this.window);
if(dojo.isArray(c)){dojo.forEach(a.mark,function(g){b.push(dijit.range.getIndex(g,this.editNode).o)},this);a.mark=b}else if(d){var e;if(d.rangeCount)e=d.getRangeAt(0);a.mark=e?e.cloneRange():dojo.withGlobal(this.window,dijit.getBookmark)}}try{if(a.mark&&a.mark.startContainer){b=dijit.range.getIndex(a.mark.startContainer,this.editNode).o;a.mark={startContainer:b,startOffset:a.mark.startOffset,endContainer:a.mark.endContainer===a.mark.startContainer?b:dijit.range.getIndex(a.mark.endContainer,this.editNode).o,
endOffset:a.mark.endOffset}}}catch(f){a.mark=null}}return a},_beginEditing:function(){this._steps.length===0&&this._steps.push({text:dijit._editor.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var a=dijit._editor.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:a,bookmark:this._getBookmark()})},onKeyDown:function(a){!dojo.isIE&&!this.iframe&&a.keyCode==dojo.keys.TAB&&!this.tabIndent&&this._saveSelection();if(this.customUndo){var b=
a.keyCode,c=dojo.keys;if(a.ctrlKey&&!a.altKey)if(b==90||b==122){dojo.stopEvent(a);this.undo();return}else if(b==89||b==121){dojo.stopEvent(a);this.redo();return}this.inherited(arguments);switch(b){case c.ENTER:case c.BACKSPACE:case c.DELETE:this.beginEditing();break;case 88:case 86:if(a.ctrlKey&&!a.altKey&&!a.metaKey){this.endEditing();a.keyCode==88?this.beginEditing("cut"):this.beginEditing("paste");setTimeout(dojo.hitch(this,this.endEditing),1);break}default:if(!a.ctrlKey&&!a.altKey&&!a.metaKey&&
(a.keyCode<dojo.keys.F1||a.keyCode>dojo.keys.F15)){this.beginEditing();break}case c.ALT:this.endEditing();break;case c.UP_ARROW:case c.DOWN_ARROW:case c.LEFT_ARROW:case c.RIGHT_ARROW:case c.HOME:case c.END:case c.PAGE_UP:case c.PAGE_DOWN:this.endEditing(true);case c.CTRL:case c.SHIFT:case c.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited("_onBlur",arguments);this.endEditing(true)},_saveSelection:function(){this._savedSelection=this._getBookmark()},_restoreSelection:function(){if(this._savedSelection){delete this._cursorToStart;
dojo.withGlobal(this.window,"isCollapsed",dijit)&&this._moveToBookmark(this._savedSelection);delete this._savedSelection}},onClick:function(){this.endEditing(true);this.inherited(arguments)},_setDisabledAttr:function(a){if(!this.disabled&&a)this._buttonEnabledPlugins=dojo.filter(this._plugins,function(b){if(b&&b.button&&!b.button.get("disabled")){b.button.set("disabled",true);return true}return false});else this.disabled&&!a&&dojo.forEach(this._buttonEnabledPlugins,function(b){b.button.attr("disabled",
false);b.updateState&&b.updateState()});this.inherited(arguments)},_setStateClass:function(){this.inherited(arguments);this.document&&this.document.body&&dojo.style(this.document.body,"color",dojo.style(this.iframe,"color"))}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin){var b,c=dijit._editor._Plugin,d=a.args.name;switch(d){case "undo":case "redo":case "cut":case "copy":case "paste":case "insertOrderedList":case "insertUnorderedList":case "indent":case "outdent":case "justifyCenter":case "justifyFull":case "justifyLeft":case "justifyRight":case "delete":case "selectAll":case "removeFormat":case "unlink":case "insertHorizontalRule":b=
new c({command:d});break;case "bold":case "italic":case "underline":case "strikethrough":case "subscript":case "superscript":b=new c({buttonClass:dijit.form.ToggleButton,command:d});break;case "|":b=new c({button:new dijit.ToolbarSeparator,setEditor:function(e){this.editor=e}})}a.plugin=b}})}if(!dojo._hasResource["dijit.form.ToggleButton"]){dojo._hasResource["dijit.form.ToggleButton"]=true;dojo.provide("dijit.form.ToggleButton")}
if(!dojo._hasResource["dijit.form.CheckBox"]){dojo._hasResource["dijit.form.CheckBox"]=true;dojo.provide("dijit.form.CheckBox");dojo.declare("dijit.form.CheckBox",dijit.form.ToggleButton,{templateString:dojo.cache("dijit.form","templates/CheckBox.html",'<div class="dijit dijitReset dijitInline" waiRole="presentation"\r\n\t><input\r\n\t \t${!nameAttrSetting} type="${type}" ${checkedAttrSetting}\r\n\t\tclass="dijitReset dijitCheckBoxInput"\r\n\t\tdojoAttachPoint="focusNode"\r\n\t \tdojoAttachEvent="onclick:_onClick"\r\n/></div>\r\n'),
baseClass:"dijitCheckBox",type:"checkbox",value:"on",readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{readOnly:"focusNode"}),_setReadOnlyAttr:function(a){this.readOnly=a;dojo.attr(this.focusNode,"readOnly",a);dijit.setWaiState(this.focusNode,"readonly",a)},_setValueAttr:function(a,b){if(typeof a=="string"){this.value=a;dojo.attr(this.focusNode,"value",a);a=true}this._created&&this.set("checked",a,b)},_getValueAttr:function(){return this.checked?this.value:false},
_setLabelAttr:undefined,postMixInProperties:function(){if(this.value=="")this.value="on";this.checkedAttrSetting=this.checked?"checked":"";this.inherited(arguments)},_fillContent:function(){},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);this.value=this.params.value||"on";dojo.attr(this.focusNode,"value",this.value)},_onFocus:function(){this.id&&dojo.query("label[for='"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&
dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)},_onClick:function(){if(this.readOnly)return false;return this.inherited(arguments)}});dojo.declare("dijit.form.RadioButton",dijit.form.CheckBox,{type:"radio",baseClass:"dijitRadio",_setCheckedAttr:function(a){this.inherited(arguments);if(this._created)if(a){var b=this;dojo.query("INPUT[type=radio]",this.focusNode.form||dojo.doc).forEach(function(c){if(c.name==b.name&&c!=b.focusNode&&c.form==b.focusNode.form)(c=
dijit.getEnclosingWidget(c))&&c.checked&&c.set("checked",false)})}},_clicked:function(){this.checked||this.set("checked",true)}})}
if(!dojo._hasResource["dojo.number"]){dojo._hasResource["dojo.number"]=true;dojo.provide("dojo.number");dojo.number.format=function(a,b){b=dojo.mixin({},b||{});var c=dojo.i18n.normalizeLocale(b.locale);c=dojo.i18n.getLocalization("dojo.cldr","number",c);b.customs=c;c=b.pattern||c[(b.type||"decimal")+"Format"];if(isNaN(a)||Math.abs(a)==Infinity)return null;return dojo.number._applyPattern(a,c,b)};dojo.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;dojo.number._applyPattern=function(a,b,c){c=c||{};
var d=c.customs.group,e=c.customs.decimal;b=b.split(";");var f=b[0];b=b[a<0?1:0]||"-"+f;if(b.indexOf("%")!=-1)a*=100;else if(b.indexOf("\u2030")!=-1)a*=1E3;else if(b.indexOf("\u00a4")!=-1){d=c.customs.currencyGroup||d;e=c.customs.currencyDecimal||e;b=b.replace(/\u00a4{1,3}/,function(h){return c[["symbol","currency","displayName"][h.length-1]]||c.currency||""})}else if(b.indexOf("E")!=-1)throw Error("exponential notation not supported");var g=dojo.number._numberPatternRE;f=f.match(g);if(!f)throw Error("unable to find a number expression in pattern: "+
b);if(c.fractional===false)c.places=0;return b.replace(g,dojo.number._formatAbsolute(a,f[0],{decimal:e,group:d,places:c.places,round:c.round}))};dojo.number.round=function(a,b,c){c=10/(c||10);return(c*+a).toFixed(b)/c};(0.9).toFixed()==0&&function(){var a=dojo.number.round;dojo.number.round=function(b,c,d){var e=Math.pow(10,-c||0),f=Math.abs(b);if(!b||f>=e||f*Math.pow(10,c+1)<5)e=0;return a(b,c,d)+(b>0?e:-e)}}();dojo.number._formatAbsolute=function(a,b,c){c=c||{};if(c.places===true)c.places=0;if(c.places===
Infinity)c.places=6;b=b.split(".");var d=typeof c.places=="string"&&c.places.indexOf(","),e=c.places;if(d)e=c.places.substring(d+1);else if(!(e>=0))e=(b[1]||[]).length;c.round<0||(a=dojo.number.round(a,e,c.round));a=String(Math.abs(a)).split(".");var f=a[1]||"";if(b[1]||c.places){if(d)c.places=c.places.substring(0,d);d=c.places!==undefined?c.places:b[1]&&b[1].lastIndexOf("0")+1;if(d>f.length)a[1]=dojo.string.pad(f,d,"0",true);if(e<f.length)a[1]=f.substr(0,e)}else a[1]&&a.pop();e=b[0].replace(",",
"");d=e.indexOf("0");if(d!=-1){d=e.length-d;if(d>a[0].length)a[0]=dojo.string.pad(a[0],d);if(e.indexOf("#")==-1)a[0]=a[0].substr(a[0].length-d)}e=b[0].lastIndexOf(",");var g,h;if(e!=-1){g=b[0].length-e-1;b=b[0].substr(0,e);e=b.lastIndexOf(",");if(e!=-1)h=b.length-e-1}b=[];for(e=a[0];e;){d=e.length-g;b.push(d>0?e.substr(d):e);e=d>0?e.slice(0,d):"";if(h){g=h;delete h}}a[0]=b.reverse().join(c.group||",");return a.join(c.decimal||".")};dojo.number.regexp=function(a){return dojo.number._parseInfo(a).regexp};
dojo.number._parseInfo=function(a){a=a||{};var b=dojo.i18n.normalizeLocale(a.locale);b=dojo.i18n.getLocalization("dojo.cldr","number",b);var c=a.pattern||b[(a.type||"decimal")+"Format"],d=b.group,e=b.decimal,f=1;if(c.indexOf("%")!=-1)f/=100;else if(c.indexOf("\u2030")!=-1)f/=1E3;else{var g=c.indexOf("\u00a4")!=-1;if(g){d=b.currencyGroup||d;e=b.currencyDecimal||e}}b=c.split(";");b.length==1&&b.push("-"+b[0]);b=dojo.regexp.buildGroupRE(b,function(h){h="(?:"+dojo.regexp.escapeString(h,".")+")";return h.replace(dojo.number._numberPatternRE,
function(i){var j={signed:false,separator:a.strict?d:[d,""],fractional:a.fractional,decimal:e,exponent:false};i=i.split(".");var k=a.places;if(i.length==1&&f!=1)i[1]="###";if(i.length==1||k===0)j.fractional=false;else{if(k===undefined)k=a.pattern?i[1].lastIndexOf("0")+1:Infinity;if(k&&a.fractional==undefined)j.fractional=true;if(!a.places&&k<i[1].length)k+=","+i[1].length;j.places=k}i=i[0].split(",");if(i.length>1){j.groupSize=i.pop().length;if(i.length>1)j.groupSize2=i.pop().length}return"("+dojo.number._realNumberRegexp(j)+
")"})},true);if(g)b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(h,i,j,k){h=dojo.regexp.escapeString(a[["symbol","currency","displayName"][j.length-1]]||a.currency||"");i=i?"[\\s\\xa0]":"";k=k?"[\\s\\xa0]":"";if(!a.strict){if(i)i+="*";if(k)k+="*";return"(?:"+i+h+k+")?"}return i+h+k});return{regexp:b.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:d,decimal:e,factor:f}};dojo.number.parse=function(a,b){var c=dojo.number._parseInfo(b),d=RegExp("^"+c.regexp+"$").exec(a);if(!d)return NaN;var e=d[1];
if(!d[1]){if(!d[2])return NaN;e=d[2];c.factor*=-1}e=e.replace(RegExp("["+c.group+"\\s\\xa0]","g"),"").replace(c.decimal,".");return e*c.factor};dojo.number._realNumberRegexp=function(a){a=a||{};if(!("places"in a))a.places=Infinity;if(typeof a.decimal!="string")a.decimal=".";if(!("fractional"in a)||/^0/.test(a.places))a.fractional=[true,false];if(!("exponent"in a))a.exponent=[true,false];if(!("eSigned"in a))a.eSigned=[true,false];var b=dojo.number._integerRegexp(a),c=dojo.regexp.buildGroupRE(a.fractional,
function(e){var f="";if(e&&a.places!==0){f="\\"+a.decimal;if(a.places==Infinity)f="(?:"+f+"\\d+)?";else f+="\\d{"+a.places+"}"}return f},true),d=dojo.regexp.buildGroupRE(a.exponent,function(e){if(e)return"([eE]"+dojo.number._integerRegexp({signed:a.eSigned})+")";return""});b+=c;if(c)b="(?:(?:"+b+")|(?:"+c+"))";return b+d};dojo.number._integerRegexp=function(a){a=a||{};if(!("signed"in a))a.signed=[true,false];if("separator"in a){if(!("groupSize"in a))a.groupSize=3}else a.separator="";var b=dojo.regexp.buildGroupRE(a.signed,
function(d){return d?"[-+]":""},true),c=dojo.regexp.buildGroupRE(a.separator,function(d){if(!d)return"(?:\\d+)";d=dojo.regexp.escapeString(d);if(d==" ")d="\\s";else if(d=="\u00a0")d="\\s\\xa0";var e=a.groupSize,f=a.groupSize2;if(f){d="(?:0|[1-9]\\d{0,"+(f-1)+"}(?:["+d+"]\\d{"+f+"})*["+d+"]\\d{"+e+"})";return e-f>0?"(?:"+d+"|(?:0|[1-9]\\d{0,"+(e-1)+"}))":d}return"(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+d+"]\\d{"+e+"})*)"},true);return b+c}}
if(!dojo._hasResource["dojo.cldr.monetary"]){dojo._hasResource["dojo.cldr.monetary"]=true;dojo.provide("dojo.cldr.monetary");dojo.cldr.monetary.getData=function(a){var b={ADP:0,AFN:0,ALL:0,AMD:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,COP:0,CRC:0,DJF:0,ESP:0,GNF:0,GYD:0,HUF:0,IDR:0,IQD:0,IRR:3,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MNT:0,MRO:0,MUR:0,OMR:3,PKR:0,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,TZS:0,UGX:0,UZS:0,VND:0,VUV:0,XAF:0,
XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0}[a];a={CHF:5}[a];if(typeof b=="undefined")b=2;if(typeof a=="undefined")a=0;return{places:b,round:a}}}
if(!dojo._hasResource["dojo.currency"]){dojo._hasResource["dojo.currency"]=true;dojo.provide("dojo.currency");dojo.currency._mixInDefaults=function(a){a=a||{};a.type="currency";var b=dojo.i18n.getLocalization("dojo.cldr","currency",a.locale)||{},c=a.currency,d=dojo.cldr.monetary.getData(c);dojo.forEach(["displayName","symbol","group","decimal"],function(e){d[e]=b[c+"_"+e]});d.fractional=[true,false];return dojo.mixin(d,a)};dojo.currency.format=function(a,b){return dojo.number.format(a,dojo.currency._mixInDefaults(b))};
dojo.currency.regexp=function(a){return dojo.number.regexp(dojo.currency._mixInDefaults(a))};dojo.currency.parse=function(a,b){return dojo.number.parse(a,dojo.currency._mixInDefaults(b))}}
if(!dojo._hasResource["dijit.form.NumberTextBox"]){dojo._hasResource["dijit.form.NumberTextBox"]=true;dojo.provide("dijit.form.NumberTextBox");dojo.declare("dijit.form.NumberTextBoxMixin",null,{regExpGen:dojo.number.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:dojo.number.format,_setConstraintsAttr:function(a){var b=typeof a.places=="number"?a.places:0;b&&b++;if(typeof a.max!="number")a.max=9*Math.pow(10,15-b);if(typeof a.min!="number")a.min=-9*Math.pow(10,15-b);this.inherited(arguments,
[a]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value)},_onFocus:function(){if(!this.disabled){var a=this.get("value");if(typeof a=="number"&&!isNaN(a)){a=this.format(a,this.constraints);if(a!==undefined)this.textbox.value=a}this.inherited(arguments)}},format:function(a,b){var c=String(a);if(typeof a!="number")return c;if(isNaN(a))return"";if(!("rangeCheck"in this&&this.rangeCheck(a,b))&&b.exponent!==false&&/\de[-+]?\d/i.test(c))return c;if(this.editOptions&&this._focused)b=
dojo.mixin({},b,this.editOptions);return this._formatter(a,b)},parse:dojo.number.parse,_getDisplayedValueAttr:function(){var a=this.inherited(arguments);return isNaN(a)?this.textbox.value:a},filter:function(a){return a===null||a===""||a===undefined?NaN:this.inherited(arguments)},serialize:function(a){return typeof a!="number"||isNaN(a)?"":this.inherited(arguments)},_setValueAttr:function(a,b,c){if(a!==undefined&&c===undefined){c=String(a);if(typeof a=="number")if(isNaN(a))c="";else{if("rangeCheck"in
this&&this.rangeCheck(a,this.constraints)||this.constraints.exponent===false||!/\de[-+]?\d/i.test(c))c=undefined}else if(a)a=undefined;else{c="";a=NaN}}this.inherited(arguments,[a,b,c])},_getValueAttr:function(){var a=this.inherited(arguments);if(isNaN(a)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&RegExp("^"+dojo.number._realNumberRegexp(dojo.mixin({},this.constraints))+"$").test(this.textbox.value)){a=Number(this.textbox.value);return isNaN(a)?
undefined:a}}else return a},isValid:function(){if(!this._focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);else{var a=this.get("value");return!isNaN(a)&&this.rangeCheck(a,this.constraints)?this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)?true:this.inherited(arguments):false}}});dojo.declare("dijit.form.NumberTextBox",[dijit.form.RangeBoundTextBox,dijit.form.NumberTextBoxMixin],{})}
if(!dojo._hasResource["dijit.form.CurrencyTextBox"]){dojo._hasResource["dijit.form.CurrencyTextBox"]=true;dojo.provide("dijit.form.CurrencyTextBox");dojo.declare("dijit.form.CurrencyTextBox",dijit.form.NumberTextBox,{currency:"",baseClass:"dijitTextBox dijitCurrencyTextBox",regExpGen:function(a){return"("+(this._focused?this.inherited(arguments,[dojo.mixin({},a,this.editOptions)])+"|":"")+dojo.currency.regexp(a)+")"},_formatter:dojo.currency.format,parse:function(a,b){var c=dojo.currency.parse(a,
b);if(isNaN(c)&&/\d+/.test(a))return this.inherited(arguments,[a,dojo.mixin({},b,this.editOptions)]);return c},_setConstraintsAttr:function(a){if(!a.currency&&this.currency)a.currency=this.currency;this.inherited(arguments,[dojo.currency._mixInDefaults(dojo.mixin(a,{exponent:false}))])}})}
if(!dojo._hasResource["dojo.cldr.supplemental"]){dojo._hasResource["dojo.cldr.supplemental"]=true;dojo.provide("dojo.cldr.supplemental");dojo.cldr.supplemental.getFirstDayOfWeek=function(a){a={mv:5,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,tn:6,ye:6,ar:0,as:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,ie:0,il:0,"in":0,is:0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mn:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,sy:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,zw:0}[dojo.cldr.supplemental._region(a)];
return a===undefined?1:a};dojo.cldr.supplemental._region=function(a){a=dojo.i18n.normalizeLocale(a);a=a.split("-");var b=a[1];if(b){if(b.length==4)b=a[2]}else b={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[a[0]];return b};dojo.cldr.supplemental.getWeekend=function(a){var b=dojo.cldr.supplemental._region(a);a={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[b];b={af:5,dz:5,ir:5,
om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[b];if(a===undefined)a=6;if(b===undefined)b=0;return{start:a,end:b}}}
if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.date.getDaysInMonth=function(a){var b=a.getMonth();if(b==1&&dojo.date.isLeapYear(a))return 29;return[31,28,31,30,31,30,31,31,30,31,30,31][b]};dojo.date.isLeapYear=function(a){a=a.getFullYear();return!(a%400)||!(a%4)&&!!(a%100)};dojo.date.getTimezoneName=function(a){var b=a.toString(),c="",d=b.indexOf("(");if(d>-1)c=b.substring(++d,b.indexOf(")"));else{d=/([A-Z\/]+) \d{4}$/;if(b=b.match(d))c=b[1];
else{b=a.toLocaleString();d=/ ([A-Z\/]+)$/;if(b=b.match(d))c=b[1]}}return c=="AM"||c=="PM"?"":c};dojo.date.compare=function(a,b,c){a=new Date(+a);b=new Date(+(b||new Date));if(c=="date"){a.setHours(0,0,0,0);b.setHours(0,0,0,0)}else if(c=="time"){a.setFullYear(0,0,0);b.setFullYear(0,0,0)}if(a>b)return 1;if(a<b)return-1;return 0};dojo.date.add=function(a,b,c){var d=new Date(+a),e=false,f="Date";switch(b){case "day":break;case "weekday":var g;if(b=c%5)g=parseInt(c/5);else{b=c>0?5:-5;g=c>0?(c-5)/5:(c+
5)/5}var h=a.getDay(),i=0;if(h==6&&c>0)i=1;else if(h==0&&c<0)i=-1;h+=b;if(h==0||h==6)i=c>0?2:-2;c=7*g+b+i;break;case "year":f="FullYear";e=true;break;case "week":c*=7;break;case "quarter":c*=3;case "month":e=true;f="Month";break;default:f="UTC"+b.charAt(0).toUpperCase()+b.substring(1)+"s"}if(f)d["set"+f](d["get"+f]()+c);e&&d.getDate()<a.getDate()&&d.setDate(0);return d};dojo.date.difference=function(a,b,c){b=b||new Date;c=c||"day";var d=b.getFullYear()-a.getFullYear(),e=1;switch(c){case "quarter":a=
a.getMonth();b=b.getMonth();a=Math.floor(a/3)+1;b=Math.floor(b/3)+1;b+=d*4;e=b-a;break;case "weekday":d=Math.round(dojo.date.difference(a,b,"day"));c=parseInt(dojo.date.difference(a,b,"week"));if(d%7==0)d=c*5;else{e=0;var f=a.getDay(),g=b.getDay();c=parseInt(d/7);b=d%7;a=new Date(a);a.setDate(a.getDate()+c*7);a=a.getDay();if(d>0)switch(true){case f==6:e=-1;break;case f==0:e=0;break;case g==6:e=-1;break;case g==0:e=-2;break;case a+b>5:e=-2}else if(d<0)switch(true){case f==6:e=0;break;case f==0:e=1;
break;case g==6:e=2;break;case g==0:e=1;break;case a+b<0:e=2}d+=e;d-=c*2}e=d;break;case "year":e=d;break;case "month":e=b.getMonth()-a.getMonth()+d*12;break;case "week":e=parseInt(dojo.date.difference(a,b,"day")/7);break;case "day":e/=24;case "hour":e/=60;case "minute":e/=60;case "second":e/=1E3;case "millisecond":e*=b.getTime()-a.getTime()}return Math.round(e)}}
if(!dojo._hasResource["dojo.date.locale"]){dojo._hasResource["dojo.date.locale"]=true;dojo.provide("dojo.date.locale");(function(){function a(d,e,f,g){return g.replace(/([a-z])\1*/ig,function(h){var i,j,k=h.charAt(0);h=h.length;var l=["abbr","wide","narrow"];switch(k){case "G":i=e[h<4?"eraAbbr":"eraNames"][d.getFullYear()<0?0:1];break;case "y":i=d.getFullYear();switch(h){case 1:break;case 2:if(!f.fullYear){i=String(i);i=i.substr(i.length-2);break}default:j=true}break;case "Q":case "q":i=Math.ceil((d.getMonth()+
1)/3);j=true;break;case "M":i=d.getMonth();if(h<3){i+=1;j=true}else{k=["months-format",l[h-3]].join("-");i=e[k][i]}break;case "w":i=dojo.date.locale._getWeekOfYear(d,0);j=true;break;case "d":i=d.getDate();j=true;break;case "D":i=dojo.date.locale._getDayOfYear(d);j=true;break;case "E":i=d.getDay();if(h<3){i+=1;j=true}else{k=["days-format",l[h-3]].join("-");i=e[k][i]}break;case "a":i=d.getHours()<12?"am":"pm";i=e["dayPeriods-format-wide-"+i];break;case "h":case "H":case "K":case "k":j=d.getHours();
switch(k){case "h":i=j%12||12;break;case "H":i=j;break;case "K":i=j%12;break;case "k":i=j||24}j=true;break;case "m":i=d.getMinutes();j=true;break;case "s":i=d.getSeconds();j=true;break;case "S":i=Math.round(d.getMilliseconds()*Math.pow(10,h-3));j=true;break;case "v":case "z":if(i=dojo.date.locale._getZone(d,true,f))break;h=4;case "Z":i=dojo.date.locale._getZone(d,false,f);i=[i<=0?"+":"-",dojo.string.pad(Math.floor(Math.abs(i)/60),2),dojo.string.pad(Math.abs(i)%60,2)];if(h==4){i.splice(0,0,"GMT");
i.splice(3,0,":")}i=i.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+g);}if(j)i=dojo.string.pad(i,h);return i})}function b(d,e,f,g){var h=function(k){return k};e=e||h;f=f||h;g=g||h;var i=d.match(/(''|[^'])+/g),j=d.charAt(0)=="'";dojo.forEach(i,function(k,l){if(k){i[l]=(j?f:e)(k.replace(/''/g,"'"));j=!j}else i[l]=""});return g(i.join(""))}function c(d,e,f,g){g=dojo.regexp.escapeString(g);f.strict||(g=g.replace(" a"," ?a"));return g.replace(/([a-z])\1*/ig,function(h){var i;
i=h.charAt(0);var j=h.length,k="",l="";if(f.strict){if(j>1)k="0{"+(j-1)+"}";if(j>2)l="0{"+(j-2)+"}"}else{k="0?";l="0{0,2}"}switch(i){case "y":i="\\d{2,4}";break;case "M":i=j>2?"\\S+?":k+"[1-9]|1[0-2]";break;case "D":i=k+"[1-9]|"+l+"[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6]";break;case "d":i="3[01]|[12]\\d|"+k+"[1-9]";break;case "w":i=k+"[1-9]|[1-4][0-9]|5[0-3]";break;case "E":i="\\S+";break;case "h":i=k+"[1-9]|1[0-2]";break;case "k":i=k+"\\d|1[01]";break;case "H":i=k+"\\d|1\\d|2[0-3]";break;case "K":i=
k+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":i="[0-5]\\d";break;case "S":i="\\d{"+j+"}";break;case "a":j=f.am||e["dayPeriods-format-wide-am"];k=f.pm||e["dayPeriods-format-wide-pm"];if(f.strict)i=j+"|"+k;else{i=j+"|"+k;if(j!=j.toLowerCase())i+="|"+j.toLowerCase();if(k!=k.toLowerCase())i+="|"+k.toLowerCase();if(i.indexOf(".")!=-1)i+="|"+i.replace(/\./g,"")}i=i.replace(/\./g,"\\.");break;default:i=".*"}d&&d.push(h);return"("+i+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}dojo.date.locale._getZone=function(d,
e){return e?dojo.date.getTimezoneName(d):d.getTimezoneOffset()};dojo.date.locale.format=function(d,e){e=e||{};var f=dojo.i18n.normalizeLocale(e.locale),g=e.formatLength||"short";f=dojo.date.locale._getGregorianBundle(f);var h=[],i=dojo.hitch(this,a,d,f,e);if(e.selector=="year")return b(f["dateFormatItem-yyyy"]||"yyyy",i);var j;if(e.selector!="date")(j=e.timePattern||f["timeFormat-"+g])&&h.push(b(j,i));if(e.selector!="time")(j=e.datePattern||f["dateFormat-"+g])&&h.push(b(j,i));return h.length==1?h[0]:
f["dateTimeFormat-"+g].replace(/\{(\d+)\}/g,function(k,l){return h[l]})};dojo.date.locale.regexp=function(d){return dojo.date.locale._parseInfo(d).regexp};dojo.date.locale._parseInfo=function(d){d=d||{};var e=dojo.i18n.normalizeLocale(d.locale);e=dojo.date.locale._getGregorianBundle(e);var f=d.formatLength||"short",g=d.datePattern||e["dateFormat-"+f],h=d.timePattern||e["timeFormat-"+f];f=d.selector=="date"?g:d.selector=="time"?h:e["dateTimeFormat-"+f].replace(/\{(\d+)\}/g,function(j,k){return[h,g][k]});
var i=[];return{regexp:b(f,dojo.hitch(this,c,i,e,d)),tokens:i,bundle:e}};dojo.date.locale.parse=function(d,e){var f=dojo.date.locale._parseInfo(e),g=f.tokens,h=f.bundle;f=RegExp("^"+f.regexp+"$",f.strict?"":"i").exec(d);if(!f)return null;var i=["abbr","wide","narrow"],j=[1970,0,1,0,0,0,0],k="";f=dojo.every(f,function(o,q){if(!q)return true;var p=g[q-1],r=p.length;switch(p.charAt(0)){case "y":if(r!=2&&e.strict)j[0]=o;else if(o<100){o=Number(o);r=""+(new Date).getFullYear();p=r.substring(0,2)*100;r=
Math.min(Number(r.substring(2,4))+20,99);j[0]=o<r?p+o:p-100+o}else{if(e.strict)return false;j[0]=o}break;case "M":if(r>2){p=h["months-format-"+i[r-3]].concat();if(!e.strict){o=o.replace(".","").toLowerCase();p=dojo.map(p,function(u){return u.replace(".","").toLowerCase()})}o=dojo.indexOf(p,o);if(o==-1)return false}else o--;j[1]=o;break;case "E":case "e":p=h["days-format-"+i[r-3]].concat();if(!e.strict){o=o.toLowerCase();p=dojo.map(p,function(u){return u.toLowerCase()})}o=dojo.indexOf(p,o);if(o==-1)return false;
break;case "D":j[1]=0;case "d":j[2]=o;break;case "a":p=e.am||h["dayPeriods-format-wide-am"];r=e.pm||h["dayPeriods-format-wide-pm"];if(!e.strict){var s=/\./g;o=o.replace(s,"").toLowerCase();p=p.replace(s,"").toLowerCase();r=r.replace(s,"").toLowerCase()}if(e.strict&&o!=p&&o!=r)return false;k=o==r?"p":o==p?"a":"";break;case "K":if(o==24)o=0;case "h":case "H":case "k":if(o>23)return false;j[3]=o;break;case "m":j[4]=o;break;case "s":j[5]=o;break;case "S":j[6]=o}return true});var l=+j[3];if(k==="p"&&l<
12)j[3]=l+12;else if(k==="a"&&l==12)j[3]=0;l=new Date(j[0],j[1],j[2],j[3],j[4],j[5],j[6]);e.strict&&l.setFullYear(j[0]);var n=g.join(""),m=n.indexOf("d")!=-1;n=n.indexOf("M")!=-1;if(!f||n&&l.getMonth()>j[1]||m&&l.getDate()>j[2])return null;if(n&&l.getMonth()<j[1]||m&&l.getDate()<j[2])l=dojo.date.add(l,"hour",1);return l}})();(function(){var a=[];dojo.date.locale.addCustomFormats=function(b,c){a.push({pkg:b,name:c})};dojo.date.locale._getGregorianBundle=function(b){var c={};dojo.forEach(a,function(d){d=
dojo.i18n.getLocalization(d.pkg,d.name,b);c=dojo.mixin(c,d)},this);return c}})();dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(a,b,c,d){var e;d=dojo.date.locale._getGregorianBundle(d);a=[a,c,b];if(c=="standAlone"){c=a.join("-");e=d[c];if(e[0]==1)e=undefined}a[1]="format";return(e||d[a.join("-")]).concat()};dojo.date.locale.isWeekend=function(a,b){var c=dojo.cldr.supplemental.getWeekend(b),d=(a||new Date).getDay();if(c.end<c.start){c.end+=7;if(d<c.start)d+=
7}return d>=c.start&&d<=c.end};dojo.date.locale._getDayOfYear=function(a){return dojo.date.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};dojo.date.locale._getWeekOfYear=function(a,b){if(arguments.length==1)b=0;var c=(new Date(a.getFullYear(),0,1)).getDay(),d=Math.floor((dojo.date.locale._getDayOfYear(a)+(c-b+7)%7-1)/7);c==b&&d++;return d}}
if(!dojo._hasResource["dijit.Calendar"]){dojo._hasResource["dijit.Calendar"]=true;dojo.provide("dijit.Calendar");dojo.declare("dijit.Calendar",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/Calendar.html",'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" dojoAttachEvent="onkeypress: _onKeyPress">\r\n\t<thead>\r\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\r\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' dojoAttachPoint="decrementMonth">\r\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarDecrease" waiRole="presentation"/>\r\n\t\t\t\t<span dojoAttachPoint="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\r\n\t\t\t</th>\r\n\t\t\t<th class=\'dijitReset\' colspan="5">\r\n\t\t\t\t<div class="dijitVisible">\r\n\t\t\t\t\t<div class="dijitPopup dijitMenu dijitMenuPassive dijitHidden" dojoAttachPoint="monthDropDown" dojoAttachEvent="onmouseup: _onMonthSelect, onmouseover: _onMenuHover, onmouseout: _onMenuHover">\r\n\t\t\t\t\t\t<div class="dijitCalendarMonthLabelTemplate dijitCalendarMonthLabel"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div dojoAttachPoint="monthLabelSpacer" class="dijitSpacer"></div>\r\n\t\t\t\t<div dojoAttachPoint="monthLabelNode" class="dijitCalendarMonthLabel dijitInline dijitVisible" dojoAttachEvent="onmousedown: _onMonthToggle"></div>\r\n\t\t\t</th>\r\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' dojoAttachPoint="incrementMonth">\r\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarIncrease" waiRole="presentation"/>\r\n\t\t\t\t<span dojoAttachPoint="increaseArrowNode" class="dijitA11ySideArrow">+</span>\r\n\t\t\t</th>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader"><span class="dijitCalendarDayLabel"></span></th>\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody dojoAttachEvent="onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut, onmousedown: _onDayMouseDown, onmouseup: _onDayMouseUp" class="dijitReset dijitCalendarBodyContainer">\r\n\t\t<tr class="dijitReset dijitCalendarWeekTemplate" role="row">\r\n\t\t\t<td class="dijitReset dijitCalendarDateTemplate" role="gridcell"><span class="dijitCalendarDateLabel"></span></td>\r\n\t\t</tr>\r\n\t</tbody>\r\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\r\n\t\t<tr>\r\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7">\r\n\t\t\t\t<h3 class="dijitCalendarYearLabel">\r\n\t\t\t\t\t<span dojoAttachPoint="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear"></span>\r\n\t\t\t\t\t<span dojoAttachPoint="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear"></span>\r\n\t\t\t\t\t<span dojoAttachPoint="nextYearLabelNode" class="dijitInline dijitCalendarNextYear"></span>\r\n\t\t\t\t</h3>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</tfoot>\r\n</table>\r\n'),
value:new Date,datePackage:"dojo.date",dayWidth:"narrow",tabIndex:"0",baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{tabIndex:"domNode"}),setValue:function(a){dojo.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",
a)},_getValueAttr:function(){var a=new this.dateClassObj(this.value);a.setHours(0,0,0,0);if(a.getDate()<this.value.getDate())a=this.dateFuncObj.add(a,"hour",1);return a},_setValueAttr:function(a){if(!this.value||this.dateFuncObj.compare(a,this.value)){a=new this.dateClassObj(a);a.setHours(1);this.displayMonth=new this.dateClassObj(a);if(!this.isDisabledDate(a,this.lang)){this.value=a;this.onChange(this.get("value"))}dojo.attr(this.domNode,"aria-label",this.dateLocaleModule.format(a,{selector:"date",
formatLength:"full"}));this._populateGrid()}},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(dojo.doc.createTextNode(b))},_populateGrid:function(){var a=this.displayMonth;a.setDate(1);var b=a.getDay(),c=this.dateFuncObj.getDaysInMonth(a),d=this.dateFuncObj.getDaysInMonth(this.dateFuncObj.add(a,"month",-1)),e=new this.dateClassObj,f=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);if(f>b)f-=7;dojo.query(".dijitCalendarDateTemplate",this.domNode).forEach(function(l,
n){n+=f;var m=new this.dateClassObj(a),o,q="dijitCalendar",p=0;if(n<b){o=d-b+n+1;p=-1;q+="Previous"}else if(n>=b+c){o=n-b-c+1;p=1;q+="Next"}else{o=n-b+1;q+="Current"}if(p)m=this.dateFuncObj.add(m,"month",p);m.setDate(o);this.dateFuncObj.compare(m,e,"date")||(q="dijitCalendarCurrentDate "+q);if(this._isSelectedDate(m,this.lang))q="dijitCalendarSelectedDate "+q;if(this.isDisabledDate(m,this.lang))q="dijitCalendarDisabledDate "+q;if(o=this.getClassForDate(m,this.lang))q=o+" "+q;l.className=q+"Month dijitCalendarDateTemplate";
l.dijitDateValue=m.valueOf();q=dojo.query(".dijitCalendarDateLabel",l)[0];m=m.getDateLocalized?m.getDateLocalized(this.lang):m.getDate();this._setText(q,m)},this);var g=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this._setText(this.monthLabelNode,g[a.getMonth()]);dojo.query(".dijitCalendarMonthLabelTemplate",this.domNode).forEach(function(l,n){dojo.toggleClass(l,"dijitHidden",!(n in g));this._setText(l,g[n])},this);var h=a.getFullYear()-1,i=new this.dateClassObj;dojo.forEach(["previous",
"current","next"],function(l){i.setFullYear(h++);this._setText(this[l+"YearLabelNode"],this.dateLocaleModule.format(i,{selector:"year",locale:this.lang}))},this);var j=this,k=function(l,n,m){j._connects.push(dijit.typematic.addMouseListener(j[l],j,function(o){o>=0&&j._adjustDisplay(n,m)},0.8,500))};k("incrementMonth","month",1);k("decrementMonth","month",-1);k("nextYearLabelNode","year",1);k("previousYearLabelNode","year",-1)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateClassObj=
dojo.getObject(a.datePackage&&a.datePackage!="dojo.date"?a.datePackage+".Date":"Date",false);this.datePackage=a.datePackage||this.datePackage;this.dateFuncObj=dojo.getObject(this.datePackage,false);this.dateLocaleModule=dojo.getObject(this.datePackage+".locale",false)},postMixInProperties:function(){isNaN(this.value)&&delete this.value;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);var a=dojo.hitch(this,function(f,g){for(var h=dojo.query(f,
this.domNode)[0],i=0;i<g;i++)h.parentNode.appendChild(h.cloneNode(true))});a(".dijitCalendarDayLabelTemplate",6);a(".dijitCalendarDateTemplate",6);a(".dijitCalendarWeekTemplate",5);var b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),c=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);dojo.query(".dijitCalendarDayLabel",this.domNode).forEach(function(f,g){this._setText(f,b[(g+c)%7])},this);var d=new this.dateClassObj(this.value),e=this.dateLocaleModule.getNames("months",
"wide","standAlone",this.lang,d);a(".dijitCalendarMonthLabelTemplate",e.length-1);dojo.query(".dijitCalendarMonthLabelTemplate",this.domNode).forEach(function(f,g){dojo.attr(f,"month",g);g in e&&this._setText(f,e[g]);dojo.place(f.cloneNode(true),this.monthLabelSpacer)},this);this.value=null;this.set("value",d)},_onMenuHover:function(a){dojo.stopEvent(a);dojo.toggleClass(a.target,"dijitMenuItemHover")},_adjustDisplay:function(a,b){this.displayMonth=this.dateFuncObj.add(this.displayMonth,a,b);this._populateGrid()},
_onMonthToggle:function(a){dojo.stopEvent(a);if(a.type=="mousedown"){a=dojo.position(this.monthLabelNode);var b={width:a.w+"px",top:-this.displayMonth.getMonth()*a.h+"px"};if(dojo.isIE&&dojo.isQuirks||dojo.isIE<7)b.left=-a.w/2+"px";dojo.style(this.monthDropDown,b);this._popupHandler=this.connect(document,"onmouseup","_onMonthToggle")}else{this.disconnect(this._popupHandler);delete this._popupHandler}dojo.toggleClass(this.monthDropDown,"dijitHidden");dojo.toggleClass(this.monthLabelNode,"dijitVisible")},
_onMonthSelect:function(a){this._onMonthToggle(a);this.displayMonth.setMonth(dojo.attr(a.target,"month"));this._populateGrid()},_onDayClick:function(a){dojo.stopEvent(a);for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);if(a&&!dojo.hasClass(a,"dijitCalendarDisabledDate")){this.set("value",a.dijitDateValue);this.onValueSelected(this.get("value"))}},_onDayMouseOver:function(a){if((a=dojo.hasClass(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue||a==this.previousYearLabelNode||
a==this.nextYearLabelNode)){dojo.addClass(a,"dijitCalendarHoveredDate");this._currentNode=a}},_onDayMouseOut:function(a){if(this._currentNode)if(!(a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode)){dojo.removeClass(this._currentNode,"dijitCalendarHoveredDate");dojo.hasClass(this._currentNode,"dijitCalendarActiveDate")&&dojo.removeClass(this._currentNode,"dijitCalendarActiveDate");this._currentNode=null}},_onDayMouseDown:function(a){if((a=a.target.parentNode)&&a.dijitDateValue){dojo.addClass(a,
"dijitCalendarActiveDate");this._currentNode=a}},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&dojo.removeClass(a,"dijitCalendarActiveDate")},_onKeyPress:function(a){var b=dojo.keys,c=-1,d,e=this.value;switch(a.keyCode){case b.RIGHT_ARROW:c=1;case b.LEFT_ARROW:d="day";this.isLeftToRight()||(c*=-1);break;case b.DOWN_ARROW:c=1;case b.UP_ARROW:d="week";break;case b.PAGE_DOWN:c=1;case b.PAGE_UP:d=a.ctrlKey?"year":"month";break;case b.END:e=this.dateFuncObj.add(e,"month",1);d="day";
case b.HOME:e=(new Date(e)).setDate(1);break;case b.ENTER:this.onValueSelected(this.get("value"));break;default:return}dojo.stopEvent(a);if(d)e=this.dateFuncObj.add(e,d,c);this.set("value",e)},onValueSelected:function(){},onChange:function(){},_isSelectedDate:function(a){return!this.dateFuncObj.compare(a,this.value,"date")},isDisabledDate:function(){},getClassForDate:function(){}})}
if(!dojo._hasResource["dijit.form._DateTimeTextBox"]){dojo._hasResource["dijit.form._DateTimeTextBox"]=true;dojo.provide("dijit.form._DateTimeTextBox");dojo.declare("dijit.form._DateTimeTextBox",dijit.form.RangeBoundTextBox,{regExpGen:dojo.date.locale.regexp,datePackage:"dojo.date",compare:dojo.date.compare,format:function(a,b){if(!a)return"";return this.dateLocaleModule.format(a,b)},parse:function(a,b){return this.dateLocaleModule.parse(a,b)||(this._isEmpty(a)?null:undefined)},serialize:function(a,
b){if(a.toGregorian)a=a.toGregorian();return dojo.date.stamp.toISOString(a,b)},value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(a){this.dateClassObj=dojo.getObject(a.datePackage?a.datePackage+".Date":"Date",false);this.value=new this.dateClassObj("");this.datePackage=a.datePackage||this.datePackage;this.dateLocaleModule=dojo.getObject(this.datePackage+".locale",false);this.regExpGen=this.dateLocaleModule.regexp},_setConstraintsAttr:function(a){a.selector=this._selector;
a.fullYear=true;var b=dojo.date.stamp.fromISOString;if(typeof a.min=="string")a.min=b(a.min);if(typeof a.max=="string")a.max=b(a.max);this.inherited(arguments,[a])},_onFocus:function(){this._open();this.inherited(arguments)},_setValueAttr:function(a,b,c){if(a!==undefined){if(!a||a.toString()==dijit.form._DateTimeTextBox.prototype.value.toString())a=null;if(a instanceof Date&&!(this.dateClassObj instanceof Date))a=new this.dateClassObj(a)}this.inherited(arguments,[a,b,c]);if(this._picker){a||(a=new this.dateClassObj);
this._picker.set("value",a)}},_open:function(){if(!(this.disabled||this.readOnly||!this.popupClass)){var a=this;if(!this._picker)this._picker=new (dojo.getObject(this.popupClass,false))({onValueSelected:function(b){if(a._tabbingAway)delete a._tabbingAway;else a.focus();setTimeout(dojo.hitch(a,"_close"),1);dijit.form._DateTimeTextBox.superclass._setValueAttr.call(a,b,true)},id:this.id+"_popup",dir:a.dir,lang:a.lang,value:this.get("value")||new this.dateClassObj,constraints:a.constraints,datePackage:a.datePackage,
isDisabledDate:function(b){var c=dojo.date.compare,d=a.constraints;return d&&(d.min&&c(d.min,b,a._selector)>0||d.max&&c(d.max,b,a._selector)<0)}});if(!this._opened){dijit.popup.open({parent:this,popup:this._picker,orient:{BL:"TL",TL:"BL"},around:this.domNode,onCancel:dojo.hitch(this,this._close),onClose:function(){a._opened=false}});this._opened=true}dojo.marginBox(this._picker.domNode,{w:this.domNode.offsetWidth})}},_close:function(){if(this._opened){dijit.popup.close(this._picker);this._opened=
false}},_onBlur:function(){this._close();if(this._picker){this._picker.destroy();delete this._picker}this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(a,b){this._setValueAttr(this.parse(a,this.constraints),b,a)},destroy:function(){if(this._picker){this._picker.destroy();delete this._picker}this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.connect(this.focusNode,"onkeypress",this._onKeyPress);this.connect(this.focusNode,
"onclick",this._open)},_onKeyPress:function(a){var b=this._picker,c=dojo.keys;if(b&&this._opened&&b.handleKey)if(b.handleKey(a)===false)return;if(this._opened&&a.charOrCode==c.ESCAPE&&!(a.shiftKey||a.ctrlKey||a.altKey||a.metaKey)){this._close();dojo.stopEvent(a)}else if(!this._opened&&a.charOrCode==c.DOWN_ARROW){this._open();dojo.stopEvent(a)}else if(a.charOrCode===c.TAB)this._tabbingAway=true;else if(this._opened&&(a.keyChar||a.charOrCode===c.BACKSPACE||a.charOrCode==c.DELETE))setTimeout(dojo.hitch(this,
function(){if(this._picker&&this._opened)dijit.placeOnScreenAroundElement(b.domNode.parentNode,this.domNode,{BL:"TL",TL:"BL"},b.orient?dojo.hitch(b,"orient"):null)}),1)}})}if(!dojo._hasResource["dijit.form.DateTextBox"]){dojo._hasResource["dijit.form.DateTextBox"]=true;dojo.provide("dijit.form.DateTextBox");dojo.declare("dijit.form.DateTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitDateTextBox",popupClass:"dijit.Calendar",_selector:"date",value:new Date("")})}
if(!dojo._hasResource["dijit.form.Form"]){dojo._hasResource["dijit.form.Form"]=true;dojo.provide("dijit.form.Form");dojo.declare("dijit.form.Form",[dijit._Widget,dijit._Templated,dijit.form._FormMixin],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form dojoAttachPoint='containerNode' dojoAttachEvent='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{action:"",method:"",
encType:"","accept-charset":"",accept:"",target:""}),postMixInProperties:function(){this.nameAttrSetting=this.name?"name='"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(a){this.encType=a;dojo.attr(this.domNode,"encType",a);if(dojo.isIE)this.domNode.encoding=a},postCreate:function(){if(dojo.isIE&&this.srcNodeRef&&this.srcNodeRef.attributes){var a=this.srcNodeRef.attributes.getNamedItem("encType");a&&!a.specified&&typeof a.value=="string"&&
this.set("encType",a.value)}this.inherited(arguments)},reset:function(a){var b={returnValue:true,preventDefault:function(){this.returnValue=false},stopPropagation:function(){},currentTarget:a?a.target:this.domNode,target:a?a.target:this.domNode};this.onReset(b)!==false&&b.returnValue&&this.inherited(arguments,[])},onReset:function(){return true},_onReset:function(a){this.reset(a);dojo.stopEvent(a);return false},_onSubmit:function(a){var b=dijit.form.Form.prototype;if(this.execute!=b.execute||this.onExecute!=
b.onExecute){dojo.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0");this.onExecute();this.execute(this.getValues())}this.onSubmit(a)===false&&dojo.stopEvent(a)},onSubmit:function(){return this.isValid()},submit:function(){this.onSubmit()!==false&&this.containerNode.submit()}})}
if(!dojo._hasResource["dijit.form.MultiSelect"]){dojo._hasResource["dijit.form.MultiSelect"]=true;dojo.provide("dijit.form.MultiSelect");dojo.declare("dijit.form.MultiSelect",dijit.form._FormValueWidget,{size:7,templateString:"<select multiple='true' ${!nameAttrSetting} dojoAttachPoint='containerNode,focusNode' dojoAttachEvent='onchange: _onChange'></select>",attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{size:"focusNode"}),reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,
true)},addSelected:function(a){a.getSelected().forEach(function(b){this.containerNode.appendChild(b);this.domNode.scrollTop=this.domNode.offsetHeight;b=a.domNode.scrollTop;a.domNode.scrollTop=0;a.domNode.scrollTop=b},this)},getSelected:function(){return dojo.query("option",this.containerNode).filter(function(a){return a.selected})},_getValueAttr:function(){return this.getSelected().map(function(a){return a.value})},multiple:true,_setValueAttr:function(a){dojo.query("option",this.containerNode).forEach(function(b){b.selected=
dojo.indexOf(a,b.value)!=-1})},invertSelection:function(a){dojo.query("option",this.containerNode).forEach(function(b){b.selected=!b.selected});this._handleOnChange(this.get("value"),a==true)},_onChange:function(){this._handleOnChange(this.get("value"),true)},resize:function(a){a&&dojo.marginBox(this.domNode,a)},postCreate:function(){this._onChange()}})}
if(!dojo._hasResource["dijit.form._Spinner"]){dojo._hasResource["dijit.form._Spinner"]=true;dojo.provide("dijit.form._Spinner");dojo.declare("dijit.form._Spinner",dijit.form.RangeBoundTextBox,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:dojo.cache("dijit.form","templates/Spinner.html",'<div class="dijit dijitReset dijitInlineTable dijitLeft"\r\n\tid="widget_${id}" waiRole="presentation"\r\n\t><div class="dijitReset dijitButtonNode dijitSpinnerButtonContainer"\r\n\t\t><input class="dijitReset dijitInputField dijitSpinnerButtonInner" type="text" tabIndex="-1" readOnly waiRole="presentation"\r\n\t\t/><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\r\n\t\t\tdojoAttachPoint="upArrowNode"\r\n\t\t\t><div class="dijitArrowButtonInner"\r\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9650;" type="text" tabIndex="-1" readOnly waiRole="presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/></div\r\n\t\t></div\r\n\t\t><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\r\n\t\t\tdojoAttachPoint="downArrowNode"\r\n\t\t\t><div class="dijitArrowButtonInner"\r\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9660;" type="text" tabIndex="-1" readOnly waiRole="presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/></div\r\n\t\t></div\r\n\t></div\r\n\t><div class=\'dijitReset dijitValidationContainer\'\r\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&Chi; " type="text" tabIndex="-1" readOnly waiRole="presentation"\r\n\t/></div\r\n\t><div class="dijitReset dijitInputField dijitInputContainer"\r\n\t\t><input class=\'dijitReset dijitInputInner\' dojoAttachPoint="textbox,focusNode" type="${type}" dojoAttachEvent="onkeypress:_onKeyPress"\r\n\t\t\twaiRole="spinbutton" autocomplete="off" ${!nameAttrSetting}\r\n\t/></div\r\n></div>\r\n'),
baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(a){return a},_arrowPressed:function(a,b,c){if(!(this.disabled||this.readOnly)){this._setValueAttr(this.adjust(this.get("value"),b*c),false);dijit.selectInputText(this.textbox,this.textbox.value.length)}},_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(a,b,c){var d=this.smallDelta;if(b==this.textbox){b=dojo.keys;c=c.charOrCode;d=c==
b.PAGE_UP||c==b.PAGE_DOWN?this.largeDelta:this.smallDelta;b=c==b.UP_ARROW||c==b.PAGE_UP?this.upArrowNode:this.downArrowNode}a==-1?this._arrowReleased(b):this._arrowPressed(b,b==this.upArrowNode?1:-1,d)},_wheelTimer:null,_mouseWheeled:function(a){dojo.stopEvent(a);a=a.detail?a.detail*-1:a.wheelDelta/120;if(a!==0){var b=this[a>0?"upArrowNode":"downArrowNode"];this._arrowPressed(b,a,this.smallDelta);this._wheelTimer||clearTimeout(this._wheelTimer);this._wheelTimer=setTimeout(dojo.hitch(this,"_arrowReleased",
b),50)}},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.DOWN_ARROW,
ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_DOWN,
ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})}
if(!dojo._hasResource["dijit.form.NumberSpinner"]){dojo._hasResource["dijit.form.NumberSpinner"]=true;dojo.provide("dijit.form.NumberSpinner");dojo.declare("dijit.form.NumberSpinner",[dijit.form._Spinner,dijit.form.NumberTextBoxMixin],{adjust:function(a,b){var c=this.constraints,d=isNaN(a),e=!isNaN(c.max),f=!isNaN(c.min);if(d&&b!=0)a=b>0?f?c.min:e?c.max:0:e?this.constraints.max:f?c.min:0;var g=a+b;if(d||isNaN(g))return a;if(e&&g>c.max)g=c.max;if(f&&g<c.min)g=c.min;return g},_onKeyPress:function(a){if((a.charOrCode==
dojo.keys.HOME||a.charOrCode==dojo.keys.END)&&!(a.ctrlKey||a.altKey||a.metaKey)&&typeof this.get("value")!="undefined"){var b=this.constraints[a.charOrCode==dojo.keys.HOME?"min":"max"];typeof b=="number"&&this._setValueAttr(b,false);dojo.stopEvent(a)}}})}
if(!dojo._hasResource["dijit.form.SimpleTextarea"]){dojo._hasResource["dijit.form.SimpleTextarea"]=true;dojo.provide("dijit.form.SimpleTextarea");dojo.declare("dijit.form.SimpleTextarea",dijit.form.TextBox,{baseClass:"dijitTextBox dijitTextArea",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{rows:"textbox",cols:"textbox"}),rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='off'></textarea>",
postMixInProperties:function(){if(!this.value&&this.srcNodeRef)this.value=this.srcNodeRef.value;this.inherited(arguments)},filter:function(a){if(a)a=a.replace(/\r/g,"");return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);dojo.isIE&&this.cols&&dojo.addClass(this.textbox,"dijitTextAreaCols")},_previousValue:"",_onInput:function(a){if(this.maxLength){var b=parseInt(this.maxLength),c=this.textbox.value.replace(/\r/g,"");b=c.length-b;if(b>0){a&&dojo.stopEvent(a);var d=this.textbox;
if(d.selectionStart){var e=d.selectionStart,f=0;if(dojo.isOpera)f=(this.textbox.value.substring(0,e).match(/\r/g)||[]).length;this.textbox.value=c.substring(0,e-b-f)+c.substring(e-f);d.setSelectionRange(e-b,e-b)}else if(dojo.doc.selection){d.focus();c=dojo.doc.selection.createRange();c.moveStart("character",-b);c.text="";c.select()}}this._previousValue=this.textbox.value}this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.form.HorizontalSlider"]){dojo._hasResource["dijit.form.HorizontalSlider"]=true;dojo.provide("dijit.form.HorizontalSlider");dojo.declare("dijit.form.HorizontalSlider",[dijit.form._FormValueWidget,dijit._Container],{templateString:dojo.cache("dijit.form","templates/HorizontalSlider.html",'<table class="dijit dijitReset dijitSlider dijitSliderH" cellspacing="0" cellpadding="0" border="0" rules="none" dojoAttachEvent="onkeypress:_onKeyPress,onkeyup:_onKeyUp"\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset" colspan="2"></td\r\n\t\t><td dojoAttachPoint="topDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"></td\r\n\t\t><td class="dijitReset" colspan="2"></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t><div class="dijitSliderDecrementIconH" tabIndex="-1" style="display:none" dojoAttachPoint="decrementButton"><span class="dijitSliderButtonInner">-</span></div\r\n\t\t></td\r\n\t\t><td class="dijitReset"\r\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" dojoAttachEvent="onmousedown:_onClkDecBumper"></div\r\n\t\t></td\r\n\t\t><td class="dijitReset"\r\n\t\t\t><input dojoAttachPoint="valueNode" type="hidden" ${!nameAttrSetting}\r\n\t\t\t/><div class="dijitReset dijitSliderBarContainerH" waiRole="presentation" dojoAttachPoint="sliderBarContainer"\r\n\t\t\t\t><div waiRole="presentation" dojoAttachPoint="progressBar" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent="onmousedown:_onBarClick"\r\n\t\t\t\t\t><div class="dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\t><div dojoAttachPoint="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachEvent="onmousedown:_onHandleClick" waiRole="slider" valuemin="${minimum}" valuemax="${maximum}"></div\r\n\t\t\t\t\t></div\r\n\t\t\t\t></div\r\n\t\t\t\t><div waiRole="presentation" dojoAttachPoint="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent="onmousedown:_onBarClick"></div\r\n\t\t\t></div\r\n\t\t></td\r\n\t\t><td class="dijitReset"\r\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" dojoAttachEvent="onmousedown:_onClkIncBumper"></div\r\n\t\t></td\r\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t><div class="dijitSliderIncrementIconH" tabIndex="-1" style="display:none" dojoAttachPoint="incrementButton"><span class="dijitSliderButtonInner">+</span></div\r\n\t\t></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset" colspan="2"></td\r\n\t\t><td dojoAttachPoint="containerNode,bottomDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"></td\r\n\t\t><td class="dijitReset" colspan="2"></td\r\n\t></tr\r\n></table>\r\n'),
value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:dijit.defaultDuration,widgetsInTemplate:true,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{id:""}),baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_startingPixelCount:"l",_handleOffsetCoord:"left",
_progressPixelSize:"width",_onKeyUp:function(a){this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey||this._setValueAttr(this.value,true)},_onKeyPress:function(a){if(!(this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey)){switch(a.charOrCode){case dojo.keys.HOME:this._setValueAttr(this.minimum,false);break;case dojo.keys.END:this._setValueAttr(this.maximum,false);break;case this._descending||this.isLeftToRight()?dojo.keys.RIGHT_ARROW:dojo.keys.LEFT_ARROW:case this._descending===false?
dojo.keys.DOWN_ARROW:dojo.keys.UP_ARROW:case this._descending===false?dojo.keys.PAGE_DOWN:dojo.keys.PAGE_UP:this.increment(a);break;case this._descending||this.isLeftToRight()?dojo.keys.LEFT_ARROW:dojo.keys.RIGHT_ARROW:case this._descending===false?dojo.keys.UP_ARROW:dojo.keys.DOWN_ARROW:case this._descending===false?dojo.keys.PAGE_UP:dojo.keys.PAGE_DOWN:this.decrement(a);break;default:return}dojo.stopEvent(a)}},_onHandleClick:function(a){if(!(this.disabled||this.readOnly)){dojo.isIE||dijit.focus(this.sliderHandle);
dojo.stopEvent(a)}},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!(this.disabled||this.readOnly||!this.clickSelect)){dijit.focus(this.sliderHandle);dojo.stopEvent(a);var b=dojo.position(this.sliderBarContainer,true),c=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?b[this._pixelCount]-c:c,b[this._pixelCount],true);this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,c){if(!(this.disabled||this.readOnly)){var d=this.discreteValues;
if(d<=1||d==Infinity)d=b;d--;this._setValueAttr((this.maximum-this.minimum)*Math.round((a<0?0:b<a?b:a)/(b/d))/d+this.minimum,c)}},_setValueAttr:function(a,b){this.valueNode.value=this.value=a;dijit.setWaiState(this.focusNode,"valuenow",a);this.inherited(arguments);var c=(a-this.minimum)/(this.maximum-this.minimum),d=this._descending===false?this.remainingBar:this.progressBar,e=this._descending===false?this.progressBar:this.remainingBar;this._inProgressAnim&&this._inProgressAnim.status!="stopped"&&
this._inProgressAnim.stop(true);if(b&&this.slideDuration>0&&d.style[this._progressPixelSize]){var f=this,g={},h=parseFloat(d.style[this._progressPixelSize]),i=this.slideDuration*(c-h/100);if(i!=0){if(i<0)i=0-i;g[this._progressPixelSize]={start:h,end:c*100,units:"%"};this._inProgressAnim=dojo.animateProperty({node:d,duration:i,onAnimate:function(j){e.style[f._progressPixelSize]=100-parseFloat(j[f._progressPixelSize])+"%"},onEnd:function(){delete f._inProgressAnim},properties:g});this._inProgressAnim.play()}}else{d.style[this._progressPixelSize]=
c*100+"%";e.style[this._progressPixelSize]=(1-c)*100+"%"}},_bumpValue:function(a,b){if(!(this.disabled||this.readOnly)){var c=dojo.getComputedStyle(this.sliderBarContainer),d=dojo._getContentBox(this.sliderBarContainer,c);c=this.discreteValues;if(c<=1||c==Infinity)c=d[this._pixelCount];c--;d=(this.value-this.minimum)*c/(this.maximum-this.minimum)+a;if(d<0)d=0;if(d>c)d=c;d=d*(this.maximum-this.minimum)/c+this.minimum;this._setValueAttr(d,b)}},_onClkBumper:function(a){this.disabled||this.readOnly||
!this.clickSelect||this._setValueAttr(a,true)},_onClkIncBumper:function(){this._onClkBumper(this._descending===false?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.charOrCode==dojo.keys.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.charOrCode==dojo.keys.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){dojo.stopEvent(a);var b=!dojo.isMozilla;this._bumpValue(a[b?
"wheelDelta":"detail"]*(b?1:-1)<0?-1:1,true)},startup:function(){if(!this._started){dojo.forEach(this.getChildren(),function(a){this[a.container]!=this.containerNode&&this[a.container].appendChild(a.domNode)},this);this.inherited(arguments)}},_typematicCallback:function(a,b,c){if(a==-1)this._setValueAttr(this.value,true);else this[b==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](c)},postCreate:function(){if(this.showButtons){this.incrementButton.style.display=
"";this.decrementButton.style.display="";this._connects.push(dijit.typematic.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500));this._connects.push(dijit.typematic.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500))}this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var a=dojo.declare(dijit.form._SliderMover,{widget:this});this._movable=new dojo.dnd.Moveable(this.sliderHandle,{mover:a});a=dojo.query('label[for="'+this.id+
'"]');if(a.length){a[0].id=this.id+"_label";dijit.setWaiState(this.focusNode,"labelledby",a[0].id)}dijit.setWaiState(this.focusNode,"valuemin",this.minimum);dijit.setWaiState(this.focusNode,"valuemax",this.maximum);this.inherited(arguments);this._layoutHackIE7()},destroy:function(){this._movable.destroy();this._inProgressAnim&&this._inProgressAnim.status!="stopped"&&this._inProgressAnim.stop(true);this._supportingWidgets=dijit.findWidgets(this.domNode);this.inherited(arguments)}});dojo.declare("dijit.form._SliderMover",
dojo.dnd.Mover,{onMouseMove:function(a){var b=this.widget,c=b._abspos;if(!c){c=b._abspos=dojo.position(b.sliderBarContainer,true);b._setPixelValue_=dojo.hitch(b,"_setPixelValue");b._isReversed_=b._isReversed()}a=a[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-a:a,c[b._pixelCount],false)},destroy:function(){dojo.dnd.Mover.prototype.destroy.apply(this,arguments);var a=this.widget;a._abspos=null;a._setValueAttr(a.value,true)}})}
if(!dojo._hasResource["dijit.form.VerticalSlider"]){dojo._hasResource["dijit.form.VerticalSlider"]=true;dojo.provide("dijit.form.VerticalSlider");dojo.declare("dijit.form.VerticalSlider",dijit.form.HorizontalSlider,{templateString:dojo.cache("dijit.form","templates/VerticalSlider.html",'<table class="dijit dijitReset dijitSlider dijitSliderV" cellspacing="0" cellpadding="0" border="0" rules="none" dojoAttachEvent="onkeypress:_onKeyPress,onkeyup:_onKeyUp"\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset"></td\r\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t><div class="dijitSliderIncrementIconV" tabIndex="-1" style="display:none" dojoAttachPoint="decrementButton"><span class="dijitSliderButtonInner">+</span></div\r\n\t\t></td\r\n\t\t><td class="dijitReset"></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset"></td\r\n\t\t><td class="dijitReset"\r\n\t\t\t><center><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper" dojoAttachEvent="onmousedown:_onClkIncBumper"></div></center\r\n\t\t></td\r\n\t\t><td class="dijitReset"></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td dojoAttachPoint="leftDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV"></td\r\n\t\t><td class="dijitReset" style="height:100%;"\r\n\t\t\t><input dojoAttachPoint="valueNode" type="hidden" ${!nameAttrSetting}\r\n\t\t\t/><center class="dijitReset dijitSliderBarContainerV" waiRole="presentation" dojoAttachPoint="sliderBarContainer"\r\n\t\t\t\t><div waiRole="presentation" dojoAttachPoint="remainingBar" class="dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" dojoAttachEvent="onmousedown:_onBarClick"><\!--#5629--\></div\r\n\t\t\t\t><div waiRole="presentation" dojoAttachPoint="progressBar" class="dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" dojoAttachEvent="onmousedown:_onBarClick"\r\n\t\t\t\t\t><div class="dijitSliderMoveable dijitSliderMoveableV" style="vertical-align:top;"\r\n\t\t\t\t\t\t><div dojoAttachPoint="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleV" dojoAttachEvent="onmousedown:_onHandleClick" waiRole="slider" valuemin="${minimum}" valuemax="${maximum}"></div\r\n\t\t\t\t\t></div\r\n\t\t\t\t></div\r\n\t\t\t></center\r\n\t\t></td\r\n\t\t><td dojoAttachPoint="containerNode,rightDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV"></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset"></td\r\n\t\t><td class="dijitReset"\r\n\t\t\t><center><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper" dojoAttachEvent="onmousedown:_onClkDecBumper"></div></center\r\n\t\t></td\r\n\t\t><td class="dijitReset"></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset"></td\r\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t><div class="dijitSliderDecrementIconV" tabIndex="-1" style="display:none" dojoAttachPoint="incrementButton"><span class="dijitSliderButtonInner">-</span></div\r\n\t\t></td\r\n\t\t><td class="dijitReset"></td\r\n\t></tr\r\n></table>\r\n'),
_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_startingPixelCount:"t",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:true,_isReversed:function(){return this._descending}})}
if(!dojo._hasResource["dijit.form.HorizontalRule"]){dojo._hasResource["dijit.form.HorizontalRule"]=true;dojo.provide("dijit.form.HorizontalRule");dojo.declare("dijit.form.HorizontalRule",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitRuleContainer dijitRuleContainerH"></div>',count:3,container:"containerNode",ruleStyle:"",_positionPrefix:'<div class="dijitRuleMark dijitRuleMarkH" style="left:',_positionSuffix:"%;",_suffix:'"></div>',_genHTML:function(a){return this._positionPrefix+
a+this._positionSuffix+this.ruleStyle+this._suffix},_isHorizontal:true,postCreate:function(){var a;if(this.count==1)a=this._genHTML(50,0);else{var b,c=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){a=this._genHTML(0,0);for(b=1;b<this.count-1;b++)a+=this._genHTML(c*b,b);a+=this._genHTML(100,this.count-1)}else{a=this._genHTML(100,0);for(b=1;b<this.count-1;b++)a+=this._genHTML(100-c*b,b);a+=this._genHTML(0,this.count-1)}}this.domNode.innerHTML=a}})}
if(!dojo._hasResource["dijit.form.VerticalRule"]){dojo._hasResource["dijit.form.VerticalRule"]=true;dojo.provide("dijit.form.VerticalRule");dojo.declare("dijit.form.VerticalRule",dijit.form.HorizontalRule,{templateString:'<div class="dijitRuleContainer dijitRuleContainerV"></div>',_positionPrefix:'<div class="dijitRuleMark dijitRuleMarkV" style="top:',_isHorizontal:false})}
if(!dojo._hasResource["dijit.form.HorizontalRuleLabels"]){dojo._hasResource["dijit.form.HorizontalRuleLabels"]=true;dojo.provide("dijit.form.HorizontalRuleLabels");dojo.declare("dijit.form.HorizontalRuleLabels",dijit.form.HorizontalRule,{templateString:'<div class="dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH"></div>',labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:'<div class="dijitRuleLabelContainer dijitRuleLabelContainerH" style="left:',
_labelPrefix:'"><div class="dijitRuleLabel dijitRuleLabelH">',_suffix:"</div></div>",_calcPosition:function(a){return a},_genHTML:function(a,b){return this._positionPrefix+this._calcPosition(a)+this._positionSuffix+this.labelStyle+this._labelPrefix+this.labels[b]+this._suffix},getLabels:function(){var a=this.labels;a.length||(a=dojo.query("> li",this.srcNodeRef).map(function(e){return String(e.innerHTML)}));this.srcNodeRef.innerHTML="";if(!a.length&&this.count>1)for(var b=this.minimum,c=(this.maximum-
b)/(this.count-1),d=0;d<this.count;d++){a.push(d<this.numericMargin||d>=this.count-this.numericMargin?"":dojo.number.format(b,this.constraints));b+=c}return a},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length}})}
if(!dojo._hasResource["dijit.form.VerticalRuleLabels"]){dojo._hasResource["dijit.form.VerticalRuleLabels"]=true;dojo.provide("dijit.form.VerticalRuleLabels");dojo.declare("dijit.form.VerticalRuleLabels",dijit.form.HorizontalRuleLabels,{templateString:'<div class="dijitRuleContainer dijitRuleContainerV dijitRuleLabelsContainer dijitRuleLabelsContainerV"></div>',_positionPrefix:'<div class="dijitRuleLabelContainer dijitRuleLabelContainerV" style="top:',_labelPrefix:'"><span class="dijitRuleLabel dijitRuleLabelV">',
_calcPosition:function(a){return 100-a},_isHorizontal:false})}if(!dojo._hasResource["dijit.form.Slider"]){dojo._hasResource["dijit.form.Slider"]=true;dojo.provide("dijit.form.Slider");dojo.deprecated("Call require() for HorizontalSlider / VerticalRule, explicitly rather than 'dijit.form.Slider' itself","","2.0")}
if(!dojo._hasResource["dijit.form.Textarea"]){dojo._hasResource["dijit.form.Textarea"]=true;dojo.provide("dijit.form.Textarea");dojo.declare("dijit.form.Textarea",dijit.form.SimpleTextarea,{cols:"",_previousNewlines:0,_strictMode:dojo.doc.compatMode!="BackCompat",_getHeight:function(a){var b=a.scrollHeight;b+=dojo.isIE?a.offsetHeight-a.clientHeight-(dojo.isIE<8&&this._strictMode?dojo._getPadBorderExtents(a).h:0):dojo.isMoz?a.offsetHeight-a.clientHeight:dojo.isWebKit&&!(dojo.isSafari<4)?dojo._getBorderExtents(a).h:
dojo._getPadBorderExtents(a).h;return b},_estimateHeight:function(a){a.style.maxHeight="";a.style.height="auto";a.rows=(a.value.match(/\n/g)||[]).length+1},_needsHelpShrinking:dojo.isMoz||dojo.isWebKit,_onInput:function(){this.inherited(arguments);if(!this._busyResizing){this._busyResizing=true;var a=this.textbox;if(a.scrollHeight&&a.offsetHeight&&a.clientHeight){var b=this._getHeight(a)+"px";if(a.style.height!=b)a.style.maxHeight=a.style.height=b;if(this._needsHelpShrinking){this._setTimeoutHandle&&
clearTimeout(this._setTimeoutHandle);this._setTimeoutHandle=setTimeout(dojo.hitch(this,"_shrink"),0)}}else this._estimateHeight(a);this._busyResizing=false}},_busyResizing:false,_shrink:function(){this._setTimeoutHandle=null;if(this._needsHelpShrinking&&!this._busyResizing){this._busyResizing=true;var a=this.textbox,b=false;if(a.value==""){a.value=" ";b=true}var c=a.scrollHeight;if(c){var d=a.style.paddingBottom,e=dojo._getPadExtents(a);e=e.h-e.t;a.style.paddingBottom=e+1+"px";var f=this._getHeight(a)-
1+"px";if(a.style.maxHeight!=f){a.style.paddingBottom=e+c+"px";a.scrollTop=0;a.style.maxHeight=this._getHeight(a)-c+"px"}a.style.paddingBottom=d}else this._estimateHeight(a);if(b)a.value="";this._busyResizing=false}},resize:function(){this._onInput()},_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);dojo.style(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",
MozBoxSizing:"border-box"});this.connect(this.textbox,"onscroll",this._onInput);this.connect(this.textbox,"onresize",this._onInput);this.connect(this.textbox,"onfocus",this._onInput);this._setTimeoutHandle=setTimeout(dojo.hitch(this,"resize"),0)},uninitialize:function(){this._setTimeoutHandle&&clearTimeout(this._setTimeoutHandle);this.inherited(arguments)}})}
if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(a,b,c){var d=document.cookie;if(arguments.length==1){var e=d.match(RegExp("(?:^|; )"+dojo.regexp.escapeString(a)+"=([^;]*)"));return e?decodeURIComponent(e[1]):undefined}else{c=c||{};d=c.expires;if(typeof d=="number"){var f=new Date;f.setTime(f.getTime()+d*864E5);d=c.expires=f}if(d&&d.toUTCString)c.expires=d.toUTCString();b=encodeURIComponent(b);d=a+"="+b;for(e in c){d+="; "+
e;f=c[e];if(f!==true)d+="="+f}document.cookie=d}};dojo.cookie.isSupported=function(){if(!("cookieEnabled"in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1})}return navigator.cookieEnabled}}
if(!dojo._hasResource["dijit.layout.BorderContainer"]){dojo._hasResource["dijit.layout.BorderContainer"]=true;dojo.provide("dijit.layout.BorderContainer");dojo.declare("dijit.layout.BorderContainer",dijit.layout._LayoutWidget,{design:"headline",gutters:true,liveSplitters:true,persist:false,baseClass:"dijitBorderContainer",_splitterClass:"dijit.layout._Splitter",postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},postCreate:function(){this.inherited(arguments);
this._splitters={};this._splitterThickness={}},startup:function(){if(!this._started){dojo.forEach(this.getChildren(),this._setupChild,this);this.inherited(arguments)}},_setupChild:function(a){var b=a.region;if(b){this.inherited(arguments);dojo.addClass(a.domNode,this.baseClass+"Pane");var c=this.isLeftToRight();if(b=="leading")b=c?"left":"right";if(b=="trailing")b=c?"right":"left";this["_"+b]=a.domNode;this["_"+b+"Widget"]=a;if((a.splitter||this.gutters)&&!this._splitters[b]){c=new (dojo.getObject(a.splitter?
this._splitterClass:"dijit.layout._Gutter"))({id:a.id+"_splitter",container:this,child:a,region:b,live:this.liveSplitters});c.isSplitter=true;this._splitters[b]=c.domNode;dojo.place(this._splitters[b],a.domNode,"after");c.startup()}a.region=b}},_computeSplitterThickness:function(a){this._splitterThickness[a]=this._splitterThickness[a]||dojo.marginBox(this._splitters[a])[/top|bottom/.test(a)?"h":"w"]},layout:function(){for(var a in this._splitters)this._computeSplitterThickness(a);this._layoutChildren()},
addChild:function(){this.inherited(arguments);this._started&&this.layout()},removeChild:function(a){var b=a.region,c=this._splitters[b];if(c){dijit.byNode(c).destroy();delete this._splitters[b];delete this._splitterThickness[b]}this.inherited(arguments);delete this["_"+b];delete this["_"+b+"Widget"];this._started&&this._layoutChildren();dojo.removeClass(a.domNode,this.baseClass+"Pane")},getChildren:function(){return dojo.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return(a=
this._splitters[a])?dijit.byNode(a):null},resize:function(){if(!this.cs||!this.pe){var a=this.domNode;this.cs=dojo.getComputedStyle(a);this.pe=dojo._getPadExtents(a,this.cs);this.pe.r=dojo._toPixelValue(a,this.cs.paddingRight);this.pe.b=dojo._toPixelValue(a,this.cs.paddingBottom);dojo.style(a,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var c=this.design=="sidebar",d=0,e=0,f=0,g=0,h={},i={},j={},k={},l=this._center&&this._center.style||
{},n=/left|right/.test(a),m=!a||!n&&!c;n=!a||n&&c;if(this._top){h=(a=="top"||n)&&this._top.style;d=a=="top"?b:dojo.marginBox(this._top).h}if(this._left){i=(a=="left"||m)&&this._left.style;f=a=="left"?b:dojo.marginBox(this._left).w}if(this._right){j=(a=="right"||m)&&this._right.style;g=a=="right"?b:dojo.marginBox(this._right).w}if(this._bottom){k=(a=="bottom"||n)&&this._bottom.style;e=a=="bottom"?b:dojo.marginBox(this._bottom).h}var o=this._splitters;m=o.top;n=o.bottom;var q=o.left;o=o.right;var p=
this._splitterThickness,r=p.top||0,s=p.left||0,u=p.right||0,x=p.bottom||0;if(s>50||u>50){setTimeout(dojo.hitch(this,function(){this._splitterThickness={};for(var v in this._splitters)this._computeSplitterThickness(v);this._layoutChildren()}),50);return false}p=this.pe;var w={left:(c?f+s:0)+p.l+"px",right:(c?g+u:0)+p.r+"px"};if(m){dojo.mixin(m.style,w);m.style.top=d+p.t+"px"}if(n){dojo.mixin(n.style,w);n.style.bottom=e+p.b+"px"}w={top:(c?0:d+r)+p.t+"px",bottom:(c?0:e+x)+p.b+"px"};if(q){dojo.mixin(q.style,
w);q.style.left=f+p.l+"px"}if(o){dojo.mixin(o.style,w);o.style.right=g+p.r+"px"}dojo.mixin(l,{top:p.t+d+r+"px",left:p.l+f+s+"px",right:p.r+g+u+"px",bottom:p.b+e+x+"px"});l={top:c?p.t+"px":l.top,bottom:c?p.b+"px":l.bottom};dojo.mixin(i,l);dojo.mixin(j,l);i.left=p.l+"px";j.right=p.r+"px";h.top=p.t+"px";k.bottom=p.b+"px";if(c){h.left=k.left=f+s+p.l+"px";h.right=k.right=g+u+p.r+"px"}else{h.left=k.left=p.l+"px";h.right=k.right=p.r+"px"}h=this._borderBox.h-p.t-p.b;i=h-(d+r+e+x);h=c?h:i;j=this._borderBox.w-
p.l-p.r;k=j-(f+s+g+u);c=c?k:j;var t={top:{w:c,h:d},bottom:{w:c,h:e},left:{w:f,h:h},right:{w:g,h:h},center:{h:i,w:k}};if(a){d=this["_"+a+"Widget"];e={};e[/top|bottom/.test(a)?"h":"w"]=b;d.resize?d.resize(e,t[d.region]):dojo.marginBox(d.domNode,e)}if(dojo.isIE<8||dojo.isIE&&dojo.isQuirks||dojo.some(this.getChildren(),function(v){return v.domNode.tagName=="TEXTAREA"||v.domNode.tagName=="INPUT"})){d=function(v,z,A){if(v)v.resize?v.resize(z,A):dojo.marginBox(v.domNode,z)};if(q)q.style.height=h;if(o)o.style.height=
h;d(this._leftWidget,{h:h},t.left);d(this._rightWidget,{h:h},t.right);if(m)m.style.width=c;if(n)n.style.width=c;d(this._topWidget,{w:c},t.top);d(this._bottomWidget,{w:c},t.bottom);d(this._centerWidget,t.center)}else{d=!a||/top|bottom/.test(a)&&this.design!="sidebar";e=!a||/left|right/.test(a)&&this.design=="sidebar";var y={center:true,left:d,right:d,top:e,bottom:e};dojo.forEach(this.getChildren(),function(v){v.resize&&y[v.region]&&v.resize(null,t[v.region])},this)}}},destroy:function(){for(var a in this._splitters){var b=
this._splitters[a];dijit.byNode(b).destroy();dojo.destroy(b)}delete this._splitters;delete this._splitterThickness;this.inherited(arguments)}});dojo.extend(dijit._Widget,{region:"",splitter:false,minSize:0,maxSize:Infinity});dojo.declare("dijit.layout._Splitter",[dijit._Widget,dijit._Templated],{live:true,templateString:'<div class="dijitSplitter" dojoAttachEvent="onkeypress:_onKeyPress,onmousedown:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" waiRole="separator"><div class="dijitSplitterThumb"></div></div>',
postCreate:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);dojo.addClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region;if(this.container.persist){var a=dojo.cookie(this._cookieName);if(a)this.child.domNode.style[this.horizontal?"height":"width"]=a}},_computeMaxSize:function(){var a=this.horizontal?"h":"w",b=this.container._splitterThickness[this.region],c=
this.container["_"+{left:"right",right:"left",top:"bottom",bottom:"top",leading:"trailing",trailing:"leading"}[this.region]];a=dojo.contentBox(this.container.domNode)[a]-(c?dojo.marginBox(c)[a]:0)-20-b*2;return Math.min(this.child.maxSize,a)},_startDrag:function(a){if(!this.cover){this.cover=dojo.doc.createElement("div");dojo.addClass(this.cover,"dijitSplitterCover");dojo.place(this.cover,this.child.domNode,"after")}dojo.addClass(this.cover,"dijitSplitterCoverActive");this.fake&&dojo.destroy(this.fake);
if(!(this._resize=this.live)){(this.fake=this.domNode.cloneNode(true)).removeAttribute("id");dojo.addClass(this.domNode,"dijitSplitterShadow");dojo.place(this.fake,this.domNode,"after")}dojo.addClass(this.domNode,"dijitSplitterActive");dojo.addClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Active");if(this.fake){dojo.removeClass(this.fake,"dijitSplitterHover");dojo.removeClass(this.fake,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover")}var b=this._factor,c=this._computeMaxSize(),d=
this.child.minSize||20,e=this.horizontal,f=e?"pageY":"pageX",g=a[f],h=this.domNode.style,i=dojo.marginBox(this.child.domNode)[e?"h":"w"],j=this.region,k=parseInt(this.domNode.style[j],10),l=this._resize,n=dojo.hitch(this.container,this.container._layoutChildren);e=dojo.doc;this._handlers=(this._handlers||[]).concat([dojo.connect(e,"onmousemove",this._drag=function(m,o){var q=m[f]-g,p=b*q+i,r=Math.max(Math.min(p,c),d);if(l||o)n(j,r);h[j]=b*q+k+(r-p)+"px"}),dojo.connect(e,"ondragstart",dojo.stopEvent),
dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent),dojo.connect(e,"onmouseup",this,"_stopDrag")]);dojo.stopEvent(a)},_onMouse:function(a){a=a.type=="mouseover"||a.type=="mouseenter";dojo.toggleClass(this.domNode,"dijitSplitterHover",a);dojo.toggleClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&dojo.removeClass(this.cover,"dijitSplitterCoverActive");this.fake&&dojo.destroy(this.fake);dojo.removeClass(this.domNode,"dijitSplitterActive");
dojo.removeClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Active");dojo.removeClass(this.domNode,"dijitSplitterShadow");this._drag(a);this._drag(a,true)}finally{this._cleanupHandlers();delete this._drag}if(this.container.persist)dojo.cookie(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){dojo.forEach(this._handlers,dojo.disconnect);delete this._handlers},_onKeyPress:function(a){this._resize=true;var b=this.horizontal,
c=1,d=dojo.keys;switch(a.charOrCode){case b?d.UP_ARROW:d.LEFT_ARROW:c*=-1;case b?d.DOWN_ARROW:d.RIGHT_ARROW:break;default:return}b=dojo.marginBox(this.child.domNode)[b?"h":"w"]+this._factor*c;this.container._layoutChildren(this.region,Math.max(Math.min(b,this._computeMaxSize()),this.child.minSize));dojo.stopEvent(a)},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}});dojo.declare("dijit.layout._Gutter",
[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitGutter" waiRole="presentation"></div>',postCreate:function(){this.horizontal=/top|bottom/.test(this.region);dojo.addClass(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}})}
if(!dojo._hasResource["dijit.layout.StackController"]){dojo._hasResource["dijit.layout.StackController"]=true;dojo.provide("dijit.layout.StackController");dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span wairole='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",postCreate:function(){dijit.setWaiRole(this.domNode,"tablist");this.pane2button={};this.pane2handles=
{};this.subscribe(this.containerId+"-startup","onStartup");this.subscribe(this.containerId+"-addChild","onAddChild");this.subscribe(this.containerId+"-removeChild","onRemoveChild");this.subscribe(this.containerId+"-selectChild","onSelectChild");this.subscribe(this.containerId+"-containerKeyPress","onContainerKeyPress")},onStartup:function(a){dojo.forEach(a.children,this.onAddChild,this);if(a.selected)this.onSelectChild(a.selected)},destroy:function(){for(var a in this.pane2button)this.onRemoveChild(dijit.byId(a));
this.inherited(arguments)},onAddChild:function(a,b){var c=new (dojo.getObject(this.buttonWidget))({id:this.id+"_"+a.id,label:a.title,dir:a.dir,lang:a.lang,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,title:a.tooltip});dijit.setWaiState(c.focusNode,"selected","false");this.pane2handles[a.id]=[this.connect(a,"set",function(d,e){var f={title:"label",showTitle:"showLabel",iconClass:"iconClass",closable:"closeButton",tooltip:"title"}[d];f&&c.set(f,e)}),this.connect(c,"onClick",dojo.hitch(this,
"onButtonClick",a)),this.connect(c,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",a))];this.addChild(c,b);this.pane2button[a.id]=c;a.controlButton=c;if(!this._currentChild){c.focusNode.setAttribute("tabIndex","0");dijit.setWaiState(c.focusNode,"selected","true");this._currentChild=a}!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList&&this._rectifyRtlTabList()},onRemoveChild:function(a){if(this._currentChild===a)this._currentChild=null;dojo.forEach(this.pane2handles[a.id],this.disconnect,
this);delete this.pane2handles[a.id];var b=this.pane2button[a.id];if(b){this.removeChild(b);delete this.pane2button[a.id];b.destroy()}delete a.controlButton},onSelectChild:function(a){if(a){if(this._currentChild){var b=this.pane2button[this._currentChild.id];b.set("checked",false);dijit.setWaiState(b.focusNode,"selected","false");b.focusNode.setAttribute("tabIndex","-1")}b=this.pane2button[a.id];b.set("checked",true);dijit.setWaiState(b.focusNode,"selected","true");this._currentChild=a;b.focusNode.setAttribute("tabIndex",
"0");a=dijit.byId(this.containerId);dijit.setWaiState(a.containerNode,"labelledby",b.id)}},onButtonClick:function(a){dijit.byId(this.containerId).selectChild(a)},onCloseButtonClick:function(a){dijit.byId(this.containerId).closeChild(a);if(this._currentChild)if(a=this.pane2button[this._currentChild.id])dijit.focus(a.focusNode||a.domNode)},adjacent:function(a){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition)))a=!a;var b=this.getChildren(),c=dojo.indexOf(b,this.pane2button[this._currentChild.id]);
return b[(c+(a?1:b.length-1))%b.length]},onkeypress:function(a){if(!(this.disabled||a.altKey)){var b=null;if(a.ctrlKey||!a._djpage){var c=dojo.keys;switch(a.charOrCode){case c.LEFT_ARROW:case c.UP_ARROW:a._djpage||(b=false);break;case c.PAGE_UP:if(a.ctrlKey)b=false;break;case c.RIGHT_ARROW:case c.DOWN_ARROW:a._djpage||(b=true);break;case c.PAGE_DOWN:if(a.ctrlKey)b=true;break;case c.DELETE:if(this._currentChild.closable)this.onCloseButtonClick(this._currentChild);dojo.stopEvent(a);break;default:if(a.ctrlKey)if(a.charOrCode===
c.TAB){this.adjacent(!a.shiftKey).onClick();dojo.stopEvent(a)}else if(a.charOrCode=="w"){if(this._currentChild.closable)this.onCloseButtonClick(this._currentChild);dojo.stopEvent(a)}}if(b!==null){this.adjacent(b).onClick();dojo.stopEvent(a)}}}},onContainerKeyPress:function(a){a.e._djpage=a.page;this.onkeypress(a.e)}});dojo.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",postCreate:function(){dijit.setWaiRole(this.focusNode||this.domNode,"tab");this.inherited(arguments)},
onClick:function(){dijit.focus(this.focusNode)},onClickCloseButton:function(a){a.stopPropagation()}})}
if(!dojo._hasResource["dijit.layout.StackContainer"]){dojo._hasResource["dijit.layout.StackContainer"]=true;dojo.provide("dijit.layout.StackContainer");dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:true,persist:false,baseClass:"dijitStackContainer",postCreate:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitLayoutContainer");dijit.setWaiRole(this.containerNode,"tabpanel");this.connect(this.domNode,"onkeypress",this._onKeyPress)},startup:function(){if(!this._started){var a=
this.getChildren();dojo.forEach(a,this._setupChild,this);if(this.persist)this.selectedChildWidget=dijit.byId(dojo.cookie(this.id+"_selectedChild"));else dojo.some(a,function(c){if(c.selected)this.selectedChildWidget=c;return c.selected},this);var b=this.selectedChildWidget;if(!b&&a[0]){b=this.selectedChildWidget=a[0];b.selected=true}dojo.publish(this.id+"-startup",[{children:a,selected:b}]);this.inherited(arguments)}},resize:function(){var a=this.selectedChildWidget;if(a&&!this._hasBeenShown){this._hasBeenShown=
true;this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);dojo.removeClass(a.domNode,"dijitVisible");dojo.addClass(a.domNode,"dijitHidden");a.domNode.title=""},addChild:function(a,b){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-addChild",[a,b]);this.layout();this.selectedChildWidget||this.selectChild(a)}},removeChild:function(a){this.inherited(arguments);this._started&&dojo.publish(this.id+"-removeChild",[a]);if(!this._beingDestroyed){if(this.selectedChildWidget===
a){this.selectedChildWidget=undefined;if(this._started){var b=this.getChildren();b.length&&this.selectChild(b[0])}}this._started&&this.layout()}},selectChild:function(a,b){a=dijit.byId(a);if(this.selectedChildWidget!=a){this._transition(a,this.selectedChildWidget,b);this.selectedChildWidget=a;dojo.publish(this.id+"-selectChild",[a]);this.persist&&dojo.cookie(this.id+"_selectedChild",this.selectedChildWidget.id)}},_transition:function(a,b){b&&this._hideChild(b);this._showChild(a);if(a.resize)this.doLayout?
a.resize(this._containerContentBox||this._contentBox):a.resize()},_adjacent:function(a){var b=this.getChildren(),c=dojo.indexOf(b,this.selectedChildWidget);c+=a?1:b.length-1;return b[c%b.length]},forward:function(){this.selectChild(this._adjacent(true),true)},back:function(){this.selectChild(this._adjacent(false),true)},_onKeyPress:function(a){dojo.publish(this.id+"-containerKeyPress",[{e:a,page:this}])},layout:function(){if(this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize)this.selectedChildWidget.resize(this._containerContentBox||
this._contentBox)},_showChild:function(a){var b=this.getChildren();a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a.selected=true;dojo.removeClass(a.domNode,"dijitHidden");dojo.addClass(a.domNode,"dijitVisible");a._onShow()},_hideChild:function(a){a.selected=false;dojo.removeClass(a.domNode,"dijitVisible");dojo.addClass(a.domNode,"dijitHidden");a.onHide()},closeChild:function(a){if(a.onClose(this,a)){this.removeChild(a);a.destroyRecursive()}},destroyDescendants:function(a){dojo.forEach(this.getChildren(),
function(b){this.removeChild(b);b.destroyRecursive(a)},this)}});dojo.extend(dijit._Widget,{selected:false,closable:false,iconClass:"",showTitle:true})}
if(!dojo._hasResource["dijit.layout._TabContainerBase"]){dojo._hasResource["dijit.layout._TabContainerBase"]=true;dojo.provide("dijit.layout._TabContainerBase");dojo.declare("dijit.layout._TabContainerBase",[dijit.layout.StackContainer,dijit._Templated],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,nested:false,templateString:dojo.cache("dijit.layout","templates/TabContainer.html",'<div class="dijitTabContainer">\r\n\t<div class="dijitTabListWrapper" dojoAttachPoint="tablistNode"></div>\r\n\t<div dojoAttachPoint="tablistSpacer" class="dijitTabSpacer ${baseClass}-spacer"></div>\r\n\t<div class="dijitTabPaneWrapper ${baseClass}-container" dojoAttachPoint="containerNode"></div>\r\n</div>\r\n'),
postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&dojo.style(this.srcNodeRef,"visibility","hidden");this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);this.doLayout||dojo.addClass(this.domNode,"dijitTabContainerNoLayout");if(this.nested){dojo.addClass(this.domNode,"dijitTabContainerNested");dojo.addClass(this.tablist.containerNode,
"dijitTabContainerTabListNested");dojo.addClass(this.tablistSpacer,"dijitTabContainerSpacerNested");dojo.addClass(this.containerNode,"dijitTabPaneWrapperNested")}else dojo.addClass(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(a){dojo.addClass(a.domNode,"dijitTabPane");this.inherited(arguments)},startup:function(){if(!this._started){this.tablist.startup();this.inherited(arguments)}},layout:function(){if(!(!this._contentBox||typeof this._contentBox.l=="undefined")){var a=
this.selectedChildWidget;if(this.doLayout){var b=this.tabPosition.replace(/-h/,"");this.tablist.layoutAlign=b;b=[this.tablist,{domNode:this.tablistSpacer,layoutAlign:b},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,b);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,b[2]);a&&a.resize&&a.resize(this._containerContentBox)}else{this.tablist.resize&&this.tablist.resize({w:dojo.contentBox(this.domNode).w});a&&
a.resize&&a.resize()}}},destroy:function(){this.tablist&&this.tablist.destroy();this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.layout.TabController"]){dojo._hasResource["dijit.layout.TabController"]=true;dojo.provide("dijit.layout.TabController");dojo.declare("dijit.layout.TabController",dijit.layout.StackController,{templateString:"<div wairole='tablist' dojoAttachEvent='onkeypress:onkeypress'></div>",tabPosition:"top",buttonWidget:"dijit.layout._TabButton",_rectifyRtlTabList:function(){if(!(0>=this.tabPosition.indexOf("-h")))if(this.pane2button){var a=0,b;for(b in this.pane2button)a=Math.max(a,
this.pane2button[b].innerDiv.scrollWidth);for(b in this.pane2button)this.pane2button[b].innerDiv.style.width=a+"px"}}});dojo.declare("dijit.layout._TabButton",dijit.layout._StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:dojo.cache("dijit.layout","templates/_TabButton.html","<div waiRole=\"presentation\" dojoAttachPoint=\"titleNode\" dojoAttachEvent='onclick:onClick'>\r\n    <div waiRole=\"presentation\" class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>\r\n        <div waiRole=\"presentation\" class='dijitTabContent' dojoAttachPoint='tabContent'>\r\n        \t<div waiRole=\"presentation\" dojoAttachPoint='focusNode'>\r\n\t\t        <img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon\" dojoAttachPoint='iconNode' />\r\n\t\t        <span dojoAttachPoint='containerNode' class='tabLabel'></span>\r\n\t\t        <span class=\"dijitInline dijitTabCloseButton dijitTabCloseIcon\" dojoAttachPoint='closeNode'\r\n\t\t        \t\tdojoAttachEvent='onclick: onClickCloseButton' waiRole=\"presentation\">\r\n\t\t            <span dojoAttachPoint='closeText' class='dijitTabCloseText'>x</span\r\n\t\t        ></span>\r\n\t\t\t</div>\r\n        </div>\r\n    </div>\r\n</div>\r\n"),
scrollOnFocus:false,postMixInProperties:function(){if(!this.iconClass)this.iconClass="dijitTabButtonIcon"},postCreate:function(){this.inherited(arguments);dojo.setSelectable(this.containerNode,false);this.iconNode.className=="dijitTabButtonIcon"&&dojo.style(this.iconNode,"width","1px")},startup:function(){this.inherited(arguments);var a=this.domNode;setTimeout(function(){a.className=a.className},1)},_setCloseButtonAttr:function(a){this.closeButton=a;dojo.toggleClass(this.innerDiv,"dijitClosable",
a);this.closeNode.style.display=a?"":"none";if(a){a=dojo.i18n.getLocalization("dijit","common");this.closeNode&&dojo.attr(this.closeNode,"title",a.itemClose);a=dojo.i18n.getLocalization("dijit","common");this._closeMenu=new dijit.Menu({id:this.id+"_Menu",dir:this.dir,lang:this.lang,targetNodeIds:[this.domNode]});this._closeMenu.addChild(new dijit.MenuItem({label:a.itemClose,dir:this.dir,lang:this.lang,onClick:dojo.hitch(this,"onClickCloseButton")}))}else if(this._closeMenu){this._closeMenu.destroyRecursive();
delete this._closeMenu}},_setLabelAttr:function(){this.inherited(arguments);if(this.showLabel==false&&!this.params.title)this.iconNode.alt=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"")},destroy:function(){if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu}this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.layout.ScrollingTabController"]){dojo._hasResource["dijit.layout.ScrollingTabController"]=true;dojo.provide("dijit.layout.ScrollingTabController");dojo.declare("dijit.layout.ScrollingTabController",dijit.layout.TabController,{templateString:dojo.cache("dijit.layout","templates/ScrollingTabController.html",'<div class="dijitTabListContainer-${tabPosition}" style="visibility:hidden">\r\n\t<div dojoType="dijit.layout._ScrollingTabControllerButton"\r\n\t\t\tclass="tabStripButton-${tabPosition}"\r\n\t\t\tid="${id}_menuBtn" iconClass="dijitTabStripMenuIcon"\r\n\t\t\tdojoAttachPoint="_menuBtn" showLabel=false>&#9660;</div>\r\n\t<div dojoType="dijit.layout._ScrollingTabControllerButton"\r\n\t\t\tclass="tabStripButton-${tabPosition}"\r\n\t\t\tid="${id}_leftBtn" iconClass="dijitTabStripSlideLeftIcon"\r\n\t\t\tdojoAttachPoint="_leftBtn" dojoAttachEvent="onClick: doSlideLeft" showLabel=false>&#9664;</div>\r\n\t<div dojoType="dijit.layout._ScrollingTabControllerButton"\r\n\t\t\tclass="tabStripButton-${tabPosition}"\r\n\t\t\tid="${id}_rightBtn" iconClass="dijitTabStripSlideRightIcon"\r\n\t\t\tdojoAttachPoint="_rightBtn" dojoAttachEvent="onClick: doSlideRight" showLabel=false>&#9654;</div>\r\n\t<div class=\'dijitTabListWrapper\' dojoAttachPoint=\'tablistWrapper\'>\r\n\t\t<div wairole=\'tablist\' dojoAttachEvent=\'onkeypress:onkeypress\'\r\n\t\t\t\tdojoAttachPoint=\'containerNode\' class=\'nowrapTabStrip\'></div>\r\n\t</div>\r\n</div>\r\n'),
useMenu:true,useSlider:true,tabStripClass:"",widgetsInTemplate:true,_minScroll:5,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{"class":"containerNode"}),postCreate:function(){this.inherited(arguments);var a=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();if(!this.tabStripClass){this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None";dojo.addClass(a,"tabStrip-disabled")}dojo.addClass(this.tablistWrapper,
this.tabStripClass)},onStartup:function(){this.inherited(arguments);dojo.style(this.domNode,"visibility","visible");this._postStartup=true},onAddChild:function(a,b){this.inherited(arguments);var c;if(this.useMenu){var d=this.containerId;c=new dijit.MenuItem({id:a.id+"_stcMi",label:a.title,dir:a.dir,lang:a.lang,onClick:dojo.hitch(this,function(){dijit.byId(d).selectChild(a)})});this._menuChildren[a.id]=c;this._menu.addChild(c,b)}this.pane2handles[a.id].push(this.connect(this.pane2button[a.id],"set",
function(e,f){if(this._postStartup)if(e=="label"){c&&c.set(e,f);this._dim&&this.resize(this._dim)}}));dojo.style(this.containerNode,"width",dojo.style(this.containerNode,"width")+200+"px")},onRemoveChild:function(a){if(this._selectedTab===this.pane2button[a.id].domNode)this._selectedTab=null;if(this.useMenu&&a&&a.id&&this._menuChildren[a.id]){this._menu.removeChild(this._menuChildren[a.id]);this._menuChildren[a.id].destroy();delete this._menuChildren[a.id]}this.inherited(arguments)},_initButtons:function(){this._menuChildren=
{};this._btnWidth=0;this._buttons=dojo.query("> .tabStripButton",this.domNode).filter(function(a){if(this.useMenu&&a==this._menuBtn.domNode||this.useSlider&&(a==this._rightBtn.domNode||a==this._leftBtn.domNode)){this._btnWidth+=dojo.marginBox(a).w;return true}else{dojo.style(a,"display","none");return false}},this);if(this.useMenu){this._menu=new dijit.Menu({id:this.id+"_menu",dir:this.dir,lang:this.lang,targetNodeIds:[this._menuBtn.domNode],leftClickToOpen:true,refocus:false});this._supportingWidgets.push(this._menu)}},
_getTabsWidth:function(){var a=this.getChildren();if(a.length){var b=a[this.isLeftToRight()?0:a.length-1].domNode;a=a[this.isLeftToRight()?a.length-1:0].domNode;return a.offsetLeft+dojo.style(a,"width")-b.offsetLeft}else return 0},_enableBtn:function(a){var b=this._getTabsWidth();a=a||dojo.style(this.scrollNode,"width");return b>0&&a<b},resize:function(a){if(this.domNode.offsetWidth!=0){this._dim=a;this.scrollNode.style.height="auto";this._contentBox=dijit.layout.marginBox2contentBox(this.domNode,
{h:0,w:a.w});this._contentBox.h=this.scrollNode.offsetHeight;dojo.contentBox(this.domNode,this._contentBox);this._buttons.style("display",this._enableBtn(this._contentBox.w)?"":"none");this._leftBtn.layoutAlign="left";this._rightBtn.layoutAlign="right";this._menuBtn.layoutAlign=this.isLeftToRight()?"right":"left";dijit.layout.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,layoutAlign:"client"}]);if(this._selectedTab){this._anim&&this._anim.status()==
"playing"&&this._anim.stop();a=this.scrollNode;var b=this._convertToScrollLeft(this._getScrollForSelectedTab());a.scrollLeft=b}this._setButtonClass(this._getScroll());this._postResize=true}},_getScroll:function(){return this.isLeftToRight()||dojo.isIE<8||dojo.isIE&&dojo.isQuirks||dojo.isWebKit?this.scrollNode.scrollLeft:dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width")+(dojo.isIE==8?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(a){if(this.isLeftToRight()||
dojo.isIE<8||dojo.isIE&&dojo.isQuirks||dojo.isWebKit)return a;else{var b=dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width");return(dojo.isIE==8?-1:1)*(a-b)}},onSelectChild:function(a){var b=this.pane2button[a.id];if(b&&a){b=b.domNode;if(this._postResize&&b!=this._selectedTab){this._selectedTab=b;var c=this._getScroll();if(c>b.offsetLeft||c+dojo.style(this.scrollNode,"width")<b.offsetLeft+dojo.style(b,"width"))this.createSmoothScroll().play()}this.inherited(arguments)}},_getScrollBounds:function(){var a=
this.getChildren(),b=dojo.style(this.scrollNode,"width"),c=dojo.style(this.containerNode,"width")-b,d=this._getTabsWidth();if(a.length&&d>b)return{min:this.isLeftToRight()?0:a[a.length-1].domNode.offsetLeft,max:this.isLeftToRight()?a[a.length-1].domNode.offsetLeft+dojo.style(a[a.length-1].domNode,"width")-b:c};else{a=this.isLeftToRight()?0:c;return{min:a,max:a}}},_getScrollForSelectedTab:function(){var a=this._selectedTab,b=dojo.style(this.scrollNode,"width"),c=this._getScrollBounds();a=a.offsetLeft+
dojo.style(a,"width")/2-b/2;return a=Math.min(Math.max(a,c.min),c.max)},createSmoothScroll:function(a){if(arguments.length>0){var b=this._getScrollBounds();a=Math.min(Math.max(a,b.min),b.max)}else a=this._getScrollForSelectedTab();this._anim&&this._anim.status()=="playing"&&this._anim.stop();var c=this,d=this.scrollNode,e=new dojo._Animation({beforeBegin:function(){this.curve&&delete this.curve;var f=d.scrollLeft,g=c._convertToScrollLeft(a);e.curve=new dojo._Line(f,g)},onAnimate:function(f){d.scrollLeft=
f}});this._anim=e;this._setButtonClass(a);return e},_getBtnNode:function(a){for(a=a.target;a&&!dojo.hasClass(a,"tabStripButton");)a=a.parentNode;return a},doSlideRight:function(a){this.doSlide(1,this._getBtnNode(a))},doSlideLeft:function(a){this.doSlide(-1,this._getBtnNode(a))},doSlide:function(a,b){if(!(b&&dojo.hasClass(b,"dijitTabDisabled"))){var c=dojo.style(this.scrollNode,"width")*0.75*a;c=this._getScroll()+c;this._setButtonClass(c);this.createSmoothScroll(c).play()}},_setButtonClass:function(a){var b=
this._getScrollBounds();this._leftBtn.set("disabled",a<=b.min);this._rightBtn.set("disabled",a>=b.max)}});dojo.declare("dijit.layout._ScrollingTabControllerButton",dijit.form.Button,{baseClass:"dijitTab tabStripButton",templateString:dojo.cache("dijit.layout","templates/_ScrollingTabControllerButton.html",'<div dojoAttachEvent="onclick:_onButtonClick">\r\n\t<div waiRole="presentation" class="dijitTabInnerDiv" dojoattachpoint="innerDiv,focusNode">\r\n\t\t<div waiRole="presentation" class="dijitTabContent dijitButtonContents" dojoattachpoint="tabContent">\r\n\t\t\t<img waiRole="presentation" alt="" src="${_blankGif}" class="dijitTabStripIcon" dojoAttachPoint="iconNode"/>\r\n\t\t\t<span dojoAttachPoint="containerNode,titleNode" class="dijitButtonText"></span>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'),
tabIndex:"-1"})}
if(!dojo._hasResource["dijit.layout.TabContainer"]){dojo._hasResource["dijit.layout.TabContainer"]=true;dojo.provide("dijit.layout.TabContainer");dojo.declare("dijit.layout.TabContainer",dijit.layout._TabContainerBase,{useMenu:true,useSlider:true,controllerWidget:"",_makeController:function(a){var b=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");return new (dojo.getObject(this.controllerWidget))({id:this.id+"_tablist",dir:this.dir,lang:this.lang,tabPosition:this.tabPosition,doLayout:this.doLayout,
containerId:this.id,"class":b,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},a)},postMixInProperties:function(){this.inherited(arguments);if(!this.controllerWidget)this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"dijit.layout.ScrollingTabController":"dijit.layout.TabController"}})}
if(!dojo._hasResource["dojo.DeferredList"]){dojo._hasResource["dojo.DeferredList"]=true;dojo.provide("dojo.DeferredList");dojo.DeferredList=function(a,b,c,d){var e=[];dojo.Deferred.call(this);var f=this;a.length===0&&!b&&this.resolve([0,[]]);var g=0;dojo.forEach(a,function(h,i){function j(k,l){e[i]=[k,l];g++;g===a.length&&f.resolve(e)}h.then(function(k){b?f.resolve([i,k]):j(true,k)},function(k){c?f.reject(k):j(false,k);if(d)return null;throw k;})})};dojo.DeferredList.prototype=new dojo.Deferred;dojo.DeferredList.prototype.gatherResults=
function(a){a=new dojo.DeferredList(a,false,true,false);a.addCallback(function(b){var c=[];dojo.forEach(b,function(d){c.push(d[1])});return c});return a}}
if(!dojo._hasResource["dijit.tree.TreeStoreModel"]){dojo._hasResource["dijit.tree.TreeStoreModel"]=true;dojo.provide("dijit.tree.TreeStoreModel");dojo.declare("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:false,constructor:function(a){dojo.mixin(this,a);this.connects=[];a=this.store;if(!a.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.Tree: store must support dojo.data.Identity");
if(a.getFeatures()["dojo.data.api.Notification"])this.connects=this.connects.concat([dojo.connect(a,"onNew",this,"onNewItem"),dojo.connect(a,"onDelete",this,"onDeleteItem"),dojo.connect(a,"onSet",this,"onSetItem")])},destroy:function(){dojo.forEach(this.connects,dojo.disconnect)},getRoot:function(a,b){this.root?a(this.root):this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(c){if(c.length!=1)throw Error(this.declaredClass+": query "+dojo.toJson(this.query)+" returned "+c.length+
" items, but must return exactly one item");this.root=c[0];a(this.root)}),onError:b})},mayHaveChildren:function(a){return dojo.some(this.childrenAttrs,function(b){return this.store.hasAttribute(a,b)},this)},getChildren:function(a,b,c){var d=this.store;if(d.isItemLoaded(a)){for(var e=[],f=0;f<this.childrenAttrs.length;f++){var g=d.getValues(a,this.childrenAttrs[f]);e=e.concat(g)}var h=0;this.deferItemLoadingUntilExpand||dojo.forEach(e,function(j){d.isItemLoaded(j)||h++});h==0?b(e):dojo.forEach(e,function(j,
k){d.isItemLoaded(j)||d.loadItem({item:j,onItem:function(l){e[k]=l;--h==0&&b(e)},onError:c})})}else{var i=dojo.hitch(this,arguments.callee);d.loadItem({item:a,onItem:function(j){i(j,b,c)},onError:c})}},isItem:function(a){return this.store.isItem(a)},fetchItemByIdentity:function(a){this.store.fetchItemByIdentity(a)},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return this.labelAttr?this.store.getValue(a,this.labelAttr):this.store.getLabel(a)},newItem:function(a,b,
c){var d={parent:b,attribute:this.childrenAttrs[0],insertIndex:c};this.newItemIdAttr&&a[this.newItemIdAttr]?this.fetchItemByIdentity({identity:a[this.newItemIdAttr],scope:this,onItem:function(e){e?this.pasteItem(e,null,b,true,c):this.store.newItem(a,d)}}):this.store.newItem(a,d)},pasteItem:function(a,b,c,d,e){var f=this.store,g=this.childrenAttrs[0];b&&dojo.forEach(this.childrenAttrs,function(i){if(f.containsValue(b,i,a)){if(!d){var j=dojo.filter(f.getValues(b,i),function(k){return k!=a});f.setValues(b,
i,j)}g=i}});if(c)if(typeof e=="number"){var h=f.getValues(c,g).slice();h.splice(e,0,a);f.setValues(c,g,h)}else f.setValues(c,g,f.getValues(c,g).concat(a))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(a,b){b&&this.getChildren(b.item,dojo.hitch(this,function(c){this.onChildrenChange(b.item,c)}))},onDeleteItem:function(a){this.onDelete(a)},onSetItem:function(a,b){if(dojo.indexOf(this.childrenAttrs,b)!=-1)this.getChildren(a,dojo.hitch(this,function(c){this.onChildrenChange(a,
c)}));else this.onChange(a)}})}
if(!dojo._hasResource["dijit.tree.ForestStoreModel"]){dojo._hasResource["dijit.tree.ForestStoreModel"]=true;dojo.provide("dijit.tree.ForestStoreModel");dojo.declare("dijit.tree.ForestStoreModel",dijit.tree.TreeStoreModel,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:true,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,b,c){if(a===this.root)this.root.children?
b(this.root.children):this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(d){this.root.children=d;b(d)}),onError:c});else this.inherited(arguments)},isItem:function(a){return a===this.root?true:this.inherited(arguments)},fetchItemByIdentity:function(a){if(a.identity==this.root.id){var b=a.scope?a.scope:dojo.global;a.onItem&&a.onItem.call(b,this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===
this.root?this.root.label:this.inherited(arguments)},newItem:function(a,b){if(b===this.root){this.onNewRootItem(a);return this.store.newItem(a)}else return this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,b,c,d,e){if(b===this.root)if(!d)this.onLeaveRoot(a);dijit.tree.TreeStoreModel.prototype.pasteItem.call(this,a,b===this.root?null:b,c===this.root?null:c,d,e);if(c===this.root)this.onAddToRoot(a)},onAddToRoot:function(a){console.log(this,": item ",a," added to root")},onLeaveRoot:function(a){console.log(this,
": item ",a," removed from root")},_requeryTop:function(){var a=this.root.children||[];this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(b){this.root.children=b;if(a.length!=b.length||dojo.some(a,function(c,d){return b[d]!=c}))this.onChildrenChange(this.root,b)})})},onNewItem:function(){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(a){dojo.indexOf(this.root.children,a)!=-1&&this._requeryTop();this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.Tree"]){dojo._hasResource["dijit.Tree"]=true;dojo.provide("dijit.Tree");dojo.declare("dijit._TreeNode",[dijit._Widget,dijit._Templated,dijit._Container,dijit._Contained,dijit._CssStateMixin],{item:null,isTreeNode:true,label:"",isExpandable:null,isExpanded:false,state:"UNCHECKED",templateString:dojo.cache("dijit","templates/TreeNode.html",'<div class="dijitTreeNode" waiRole="presentation"\r\n\t><div dojoAttachPoint="rowNode" class="dijitTreeRow" waiRole="presentation" dojoAttachEvent="onmouseenter:_onMouseEnter, onmouseleave:_onMouseLeave, onclick:_onClick, ondblclick:_onDblClick"\r\n\t\t><img src="${_blankGif}" alt="" dojoAttachPoint="expandoNode" class="dijitTreeExpando" waiRole="presentation"\r\n\t\t/><span dojoAttachPoint="expandoNodeText" class="dijitExpandoText" waiRole="presentation"\r\n\t\t></span\r\n\t\t><span dojoAttachPoint="contentNode"\r\n\t\t\tclass="dijitTreeContent" waiRole="presentation">\r\n\t\t\t<img src="${_blankGif}" alt="" dojoAttachPoint="iconNode" class="dijitIcon dijitTreeIcon" waiRole="presentation"\r\n\t\t\t/><span dojoAttachPoint="labelNode" class="dijitTreeLabel" wairole="treeitem" tabindex="-1" waiState="selected-false" dojoAttachEvent="onfocus:_onLabelFocus"></span>\r\n\t\t</span\r\n\t></div>\r\n\t<div dojoAttachPoint="containerNode" class="dijitTreeContainer" waiRole="presentation" style="display: none;"></div>\r\n</div>\r\n'),
baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow",labelNode:"dijitTreeLabel"},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"labelNode",type:"innerText"},tooltip:{node:"rowNode",type:"attribute",attribute:"title"}}),postCreate:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&dijit.setWaiState(this.labelNode,"expanded",this.isExpanded)},_setIndentAttr:function(a){this.indent=a;var b=Math.max(a,
0)*this.tree._nodePixelIndent+"px";dojo.style(this.domNode,"backgroundPosition",b+" 0px");dojo.style(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);dojo.forEach(this.getChildren(),function(c){c.set("indent",a+1)})},markProcessing:function(){this.state="LOADING";this._setExpando(true)},unmarkProcessing:function(){this._setExpando(false)},_updateItemClasses:function(a){var b=this.tree,c=b.model;if(b._v10Compat&&a===c.root)a=null;this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,
"label","Label");this._applyClassAndStyle(a,"row","Row")},_applyClassAndStyle:function(a,b,c){var d="_"+b+"Class";b+="Node";this[d]&&dojo.removeClass(this[b],this[d]);this[d]=this.tree["get"+c+"Class"](a,this.isExpanded);this[d]&&dojo.addClass(this[b],this[d]);dojo.style(this[b],this.tree["get"+c+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent();!a||a.rowNode.style.display=="none"?dojo.addClass(this.domNode,"dijitTreeIsRoot"):dojo.toggleClass(this.domNode,"dijitTreeIsLast",
!this.getNextSibling())},_setExpando:function(a){var b=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;dojo.removeClass(this.expandoNode,b);dojo.addClass(this.expandoNode,b[a]);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return this._expandDeferred;this._wipeOut&&this._wipeOut.stop();this.isExpanded=true;dijit.setWaiState(this.labelNode,"expanded","true");
dijit.setWaiRole(this.containerNode,"group");dojo.addClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&dijit.setWaiState(this.tree.domNode,"expanded","true");var a,b=dojo.fx.wipeIn({node:this.containerNode,duration:dijit.defaultDuration,onEnd:function(){a.callback(true)}});a=this._expandDeferred=new dojo.Deferred(function(){b.stop()});b.play();return a},collapse:function(){if(this.isExpanded){if(this._expandDeferred){this._expandDeferred.cancel();
delete this._expandDeferred}this.isExpanded=false;dijit.setWaiState(this.labelNode,"expanded","false");this==this.tree.rootNode&&dijit.setWaiState(this.tree.domNode,"expanded","false");dojo.removeClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(!this._wipeOut)this._wipeOut=dojo.fx.wipeOut({node:this.containerNode,duration:dijit.defaultDuration});this._wipeOut.play()}},indent:0,setChildItems:function(a){var b=this.tree,c=b.model,d=[];dojo.forEach(this.getChildren(),
function(e){dijit._Container.prototype.removeChild.call(this,e)},this);this.state="LOADED";if(a&&a.length>0){this.isExpandable=true;dojo.forEach(a,function(e){var f=c.getIdentity(e),g=b._itemNodesMap[f],h;if(g)for(var i=0;i<g.length;i++)if(g[i]&&!g[i].getParent()){h=g[i];h.set("indent",this.indent+1);break}if(!h){h=this.tree._createTreeNode({item:e,tree:b,isExpandable:c.mayHaveChildren(e),label:b.getLabel(e),tooltip:b.getTooltip(e),dir:b.dir,lang:b.lang,indent:this.indent+1});if(g)g.push(h);else b._itemNodesMap[f]=
[h]}this.addChild(h);if(this.tree.autoExpand||this.tree._state(e))d.push(b._expandNode(h))},this);dojo.forEach(this.getChildren(),function(e){e._updateLayout()})}else this.isExpandable=false;this._setExpando&&this._setExpando(false);this._updateItemClasses(this.item);if(this==b.rootNode)if(a=this.tree.showRoot?this:this.getChildren()[0]){a.setFocusable(true);b.lastFocused=a}else b.domNode.setAttribute("tabIndex","0");return new dojo.DeferredList(d)},removeChild:function(){this.inherited(arguments);
var a=this.getChildren();if(a.length==0){this.isExpandable=false;this.collapse()}dojo.forEach(a,function(b){b._updateLayout()})},makeExpandable:function(){this.isExpandable=true;this._setExpando(false)},_onLabelFocus:function(){this.tree._onNodeFocus(this)},setSelected:function(a){dijit.setWaiState(this.labelNode,"selected",a);dojo.toggleClass(this.rowNode,"dijitTreeRowSelected",a)},setFocusable:function(a){this.labelNode.setAttribute("tabIndex",a?"0":"-1")},_onClick:function(a){this.tree._onClick(this,
a)},_onDblClick:function(a){this.tree._onDblClick(this,a)},_onMouseEnter:function(a){this.tree._onNodeMouseEnter(this,a)},_onMouseLeave:function(a){this.tree._onNodeMouseLeave(this,a)}});dojo.declare("dijit.Tree",[dijit._Widget,dijit._Templated],{store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],path:[],selectedItem:null,openOnClick:false,openOnDblClick:false,templateString:dojo.cache("dijit","templates/Tree.html",'<div class="dijitTree dijitTreeContainer" waiRole="tree"\r\n\tdojoAttachEvent="onkeypress:_onKeyPress">\r\n\t<div class="dijitInline dijitTreeIndent" style="position: absolute; top: -9999px" dojoAttachPoint="indentDetector"></div>\r\n</div>\r\n'),
persist:true,autoExpand:false,dndController:null,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){dojo.publish(this.id,[dojo.mixin({tree:this,event:a},b||{})])},postMixInProperties:function(){this.tree=this;if(this.autoExpand)this.persist=false;this._itemNodesMap=
{};if(!this.cookieName)this.cookieName=this.id+"SaveStateCookie";this._loadDeferred=new dojo.Deferred;this.inherited(arguments)},postCreate:function(){this._initState();this.model||this._store2model();this.connect(this.model,"onChange","_onItemChange");this.connect(this.model,"onChildrenChange","_onItemChildrenChange");this.connect(this.model,"onDelete","_onItemDelete");this._load();this.inherited(arguments);if(this.dndController){if(dojo.isString(this.dndController))this.dndController=dojo.getObject(this.dndController);
for(var a={},b=0;b<this.dndParams.length;b++)if(this[this.dndParams[b]])a[this.dndParams[b]]=this[this.dndParams[b]];this.dndController=new this.dndController(this,a)}},_store2model:function(){this._v10Compat=true;dojo.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren)a.mayHaveChildren=dojo.hitch(this,"mayHaveChildren");
if(this.params.getItemChildren)a.getChildren=dojo.hitch(this,function(b,c,d){this.getItemChildren(this._v10Compat&&b===this.model.root?null:b,c,d)});this.model=new dijit.tree.ForestStoreModel(a);this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(dojo.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:true,label:this.label||this.getLabel(a),indent:this.showRoot?0:-1});if(!this.showRoot)b.rowNode.style.display=
"none";this.domNode.appendChild(b.domNode);a=this.model.getIdentity(a);if(this._itemNodesMap[a])this._itemNodesMap[a].push(b);else this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).addCallback(dojo.hitch(this,function(){this._loadDeferred.callback(true);this.onLoad()}))}),function(a){console.error(this,": error loading root: ",a)})},getNodesByItem:function(a){if(!a)return[];return[].concat(this._itemNodesMap[dojo.isString(a)?a:this.model.getIdentity(a)])},_setSelectedItemAttr:function(a){var b=
this.get("selectedItem");a=!a||dojo.isString(a)?a:this.model.getIdentity(a);if(!(a==b&&this.model.getIdentity(b))){b=this._itemNodesMap[a];this._selectNode(b&&b[0]||null)}},_getSelectedItemAttr:function(){return this.selectedNode&&this.selectedNode.item},_setPathAttr:function(a){var b=new dojo.Deferred;this._selectNode(null);if(!a||!a.length){b.resolve(true);return b}this._loadDeferred.addCallback(dojo.hitch(this,function(){function c(){var e=a.shift();e=dojo.isString(e)?e:this.model.getIdentity(e);
dojo.some(this._itemNodesMap[e],function(f){if(f.getParent()==d){d=f;return true}return false});if(a.length)this._expandNode(d).addCallback(dojo.hitch(this,c));else{this._selectNode(d);b.resolve(true)}}if(this.rootNode)if(a[0]!==this.rootNode.item&&dojo.isString(a[0])&&a[0]!=this.model.getIdentity(this.rootNode.item))b.reject(Error(this.id+":path[0] doesn't match this.rootNode.item.  Maybe you are using the wrong tree."));else{a.shift();var d=this.rootNode;this._expandNode(d).addCallback(dojo.hitch(this,
c))}else b.reject(Error("!this.rootNode"))}));return b},_getPathAttr:function(){if(this.selectedNode){for(var a=[],b=this.selectedNode;b&&b!==this.rootNode;){a.unshift(b.item);b=b.getParent()}a.unshift(this.rootNode.item);return a}},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},
getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onKeyPress:function(a){if(!a.altKey){var b=dojo.keys,c=dijit.getEnclosingWidget(a.target);if(c){var d=a.charOrCode;if(typeof d=="string"){if(!a.altKey&&!a.ctrlKey&&!a.shiftKey&&!a.metaKey){this._onLetterKeyNav({node:c,key:d.toLowerCase()});dojo.stopEvent(a)}}else{if(this._curSearch){clearTimeout(this._curSearch.timer);delete this._curSearch}var e=this._keyHandlerMap;if(!e){e={};e[b.ENTER]=
"_onEnterKey";e[this.isLeftToRight()?b.LEFT_ARROW:b.RIGHT_ARROW]="_onLeftArrow";e[this.isLeftToRight()?b.RIGHT_ARROW:b.LEFT_ARROW]="_onRightArrow";e[b.UP_ARROW]="_onUpArrow";e[b.DOWN_ARROW]="_onDownArrow";e[b.HOME]="_onHomeKey";e[b.END]="_onEndKey";this._keyHandlerMap=e}if(this._keyHandlerMap[d]){this[this._keyHandlerMap[d]]({node:c,item:c.item,evt:a});dojo.stopEvent(a)}}}}},_onEnterKey:function(a,b){this._publish("execute",{item:a.item,node:a.node});this._selectNode(a.node);this.onClick(a.item,a.node,
b)},_onDownArrow:function(a){(a=this._getNextNode(a.node))&&a.isTreeNode&&this.focusNode(a)},_onUpArrow:function(a){a=a.node;var b=a.getPreviousSibling();if(b)for(a=b;a.isExpandable&&a.isExpanded&&a.hasChildren();){a=a.getChildren();a=a[a.length-1]}else{b=a.getParent();!this.showRoot&&b===this.rootNode||(a=b)}a&&a.isTreeNode&&this.focusNode(a)},_onRightArrow:function(a){a=a.node;if(a.isExpandable&&!a.isExpanded)this._expandNode(a);else if(a.hasChildren())(a=a.getChildren()[0])&&a.isTreeNode&&this.focusNode(a)},
_onLeftArrow:function(a){a=a.node;if(a.isExpandable&&a.isExpanded)this._collapseNode(a);else(a=a.getParent())&&a.isTreeNode&&!(!this.showRoot&&a===this.rootNode)&&this.focusNode(a)},_onHomeKey:function(){var a=this._getRootOrFirstNode();a&&this.focusNode(a)},_onEndKey:function(){for(var a=this.rootNode;a.isExpanded;){a=a.getChildren();a=a[a.length-1]}a&&a.isTreeNode&&this.focusNode(a)},multiCharSearchDuration:250,_onLetterKeyNav:function(a){var b=this._curSearch;if(b){b.pattern+=a.key;clearTimeout(b.timer)}else b=
this._curSearch={pattern:a.key,startNode:a.node};var c=this;b.timer=setTimeout(function(){delete c._curSearch},this.multiCharSearchDuration);a=b.startNode;do(a=this._getNextNode(a))||(a=this._getRootOrFirstNode());while(a!==b.startNode&&a.label.toLowerCase().substr(0,b.pattern.length)!=b.pattern);a&&a.isTreeNode&&a!==b.startNode&&this.focusNode(a)},_onClick:function(a,b){var c=b.target;c=c==a.expandoNode||c==a.expandoNodeText;if(this.openOnClick&&a.isExpandable||c)a.isExpandable&&this._onExpandoClick({node:a});
else{this._publish("execute",{item:a.item,node:a,evt:b});this.onClick(a.item,a,b);this.focusNode(a)}c||this._selectNode(a);dojo.stopEvent(b)},_onDblClick:function(a,b){var c=b.target;c=c==a.expandoNode||c==a.expandoNodeText;if(this.openOnDblClick&&a.isExpandable||c)a.isExpandable&&this._onExpandoClick({node:a});else{this._publish("execute",{item:a.item,node:a,evt:b});this.onDblClick(a.item,a,b);this.focusNode(a)}c||this._selectNode(a);dojo.stopEvent(b)},_onExpandoClick:function(a){a=a.node;this.focusNode(a);
a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];else{for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null}},_getRootOrFirstNode:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;
if(a.isExpandable)if(a.state!="LOADING"){a.collapse();this.onClose(a.item,a);if(a.item){this._state(a.item,false);this._saveState()}}},_expandNode:function(a,b){if(a._expandNodeDeferred&&!b)return a._expandNodeDeferred;var c=this.model,d=a.item,e=this;switch(a.state){case "UNCHECKED":a.markProcessing();var f=a._expandNodeDeferred=new dojo.Deferred;c.getChildren(d,function(g){a.unmarkProcessing();g=a.setChildItems(g);var h=e._expandNode(a,true);g.addCallback(function(){h.addCallback(function(){f.callback()})})},
function(g){console.error(e,": error loading root children: ",g)});break;default:f=a._expandNodeDeferred=a.expand();this.onOpen(a.item,a);if(d){this._state(d,true);this._saveState()}}return f},focusNode:function(a){dijit.focus(a.labelNode)},_selectNode:function(a){this.selectedNode&&!this.selectedNode._destroyed&&this.selectedNode.setSelected(false);a&&a.setSelected(true);this.selectedNode=a},_onNodeFocus:function(a){if(a&&a!=this.lastFocused){this.lastFocused&&!this.lastFocused._destroyed&&this.lastFocused.setFocusable(false);
a.setFocusable(true);this.lastFocused=a}},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this._itemNodesMap[this.model.getIdentity(a)];if(b){var c=this.getLabel(a),d=this.getTooltip(a);dojo.forEach(b,function(e){e.set({item:a,label:c,tooltip:d});e._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var c=this._itemNodesMap[this.model.getIdentity(a)];c&&dojo.forEach(c,function(d){d.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);
var b=this._itemNodesMap[a];if(b){dojo.forEach(b,function(c){var d=c.getParent();d&&d.removeChild(c);c.destroyRecursive()});delete this._itemNodesMap[a]}},_initState:function(){if(this.persist){var a=dojo.cookie(this.cookieName);this._openedItemIds={};a&&dojo.forEach(a.split(","),function(b){this._openedItemIds[b]=true},this)}},_state:function(a,b){if(!this.persist)return false;var c=this.model.getIdentity(a);if(arguments.length===1)return this._openedItemIds[c];if(b)this._openedItemIds[c]=true;else delete this._openedItemIds[c]},
_saveState:function(){if(this.persist){var a=[],b;for(b in this._openedItemIds)a.push(b);dojo.cookie(this.cookieName,a.join(","),{expires:365})}},destroy:function(){if(this._curSearch){clearTimeout(this._curSearch.timer);delete this._curSearch}this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!dojo.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){if(a){dojo.marginBox(this.domNode,
a);dojo.style(this.domNode,"overflow","auto")}this._nodePixelIndent=dojo.marginBox(this.tree.indentDetector).w;if(this.tree.rootNode)this.tree.rootNode.set("indent",this.showRoot?0:-1)},_createTreeNode:function(a){return new dijit._TreeNode(a)}})}
if(!dojo._hasResource["dojo.data.ItemFileWriteStore"]){dojo._hasResource["dojo.data.ItemFileWriteStore"]=true;dojo.provide("dojo.data.ItemFileWriteStore");dojo.declare("dojo.data.ItemFileWriteStore",dojo.data.ItemFileReadStore,{constructor:function(a){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap.Date.serialize)this._datatypeMap.Date.serialize=function(b){return dojo.date.stamp.toISOString(b,
{zulu:true})};if(a&&a.referenceIntegrity===false)this.referenceIntegrity=false;this._saveInProgress=false},referenceIntegrity:true,_assert:function(a){if(!a)throw Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},newItem:function(a,b){this._assert(!this._saveInProgress);this._loadFinished||this._forceLoad();if(typeof a!="object"&&typeof a!="undefined")throw Error("newItem() was passed something other than an object");
var c=null,d=this._getIdentifierAttribute();if(d===Number)c=this._arrayOfAllItems.length;else{c=a[d];if(typeof c==="undefined")throw Error("newItem() was not passed an identity for the new item");if(dojo.isArray(c))throw Error("newItem() was not passed an single-valued identity");}this._itemsByIdentity&&this._assert(typeof this._itemsByIdentity[c]==="undefined");this._assert(typeof this._pending._newItems[c]==="undefined");this._assert(typeof this._pending._deletedItems[c]==="undefined");var e={};
e[this._storeRefPropName]=this;e[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[c]=e;e[d]=[c]}this._arrayOfAllItems.push(e);d=null;if(b&&b.parent&&b.attribute){d={item:b.parent,attribute:b.attribute,oldValue:undefined};var f=this.getValues(b.parent,b.attribute);if(f&&f.length>0){var g=f.slice(0,f.length);d.oldValue=f.length===1?f[0]:f.slice(0,f.length);g.push(e);this._setValueOrValues(b.parent,b.attribute,g,false);d.newValue=this.getValues(b.parent,
b.attribute)}else{this._setValueOrValues(b.parent,b.attribute,e,false);d.newValue=e}}else{e[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(e)}this._pending._newItems[c]=e;for(var h in a){if(h===this._storeRefPropName||h===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");c=a[h];dojo.isArray(c)||(c=[c]);e[h]=c;if(this.referenceIntegrity)for(f=0;f<c.length;f++){g=c[f];this.isItem(g)&&this._addReferenceToMap(g,e,h)}}this.onNew(e,d);return e},_removeArrayElement:function(a,
b){var c=dojo.indexOf(a,b);if(c!=-1){a.splice(c,1);return true}return false},deleteItem:function(a){this._assert(!this._saveInProgress);this._assertIsItem(a);var b=a[this._itemNumPropName],c=this.getIdentity(a);if(this.referenceIntegrity){var d=this.getAttributes(a);if(a[this._reverseRefMap])a["backup_"+this._reverseRefMap]=dojo.clone(a[this._reverseRefMap]);dojo.forEach(d,function(j){dojo.forEach(this.getValues(a,j),function(k){if(this.isItem(k)){a["backupRefs_"+this._reverseRefMap]||(a["backupRefs_"+
this._reverseRefMap]=[]);a["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(k),attr:j});this._removeReferenceFromMap(k,a,j)}},this)},this);if(d=a[this._reverseRefMap])for(var e in d){var f=null;if(f=this._itemsByIdentity?this._itemsByIdentity[e]:this._arrayOfAllItems[e])for(var g in d[e]){var h=this.getValues(f,g)||[],i=dojo.filter(h,function(j){return!(this.isItem(j)&&this.getIdentity(j)==c)},this);this._removeReferenceFromMap(a,f,g);i.length<h.length&&this._setValueOrValues(f,g,i,true)}}}this._arrayOfAllItems[b]=
null;a[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[c];this._pending._deletedItems[c]=a;a[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,a);this.onDelete(a);return true},setValue:function(a,b,c){return this._setValueOrValues(a,b,c,true)},setValues:function(a,b,c){return this._setValueOrValues(a,b,c,true)},unsetAttribute:function(a,b){return this._setValueOrValues(a,b,[],true)},_setValueOrValues:function(a,b,c,d){this._assert(!this._saveInProgress);
this._assertIsItem(a);this._assert(dojo.isString(b));this._assert(typeof c!=="undefined");var e=this._getIdentifierAttribute();if(b==e)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");e=this._getValueOrValues(a,b);var f=this.getIdentity(a);if(!this._pending._modifiedItems[f]){var g={},h;for(h in a)g[h]=h===this._storeRefPropName||h===this._itemNumPropName||h===this._rootItemPropName?a[h]:h===this._reverseRefMap?dojo.clone(a[h]):a[h].slice(0,a[h].length);
this._pending._modifiedItems[f]=g}f=false;if(dojo.isArray(c)&&c.length===0){f=delete a[b];c=undefined;if(this.referenceIntegrity&&e){h=e;dojo.isArray(h)||(h=[h]);for(var i=0;i<h.length;i++){g=h[i];this.isItem(g)&&this._removeReferenceFromMap(g,a,b)}}}else{f=dojo.isArray(c)?c.slice(0,c.length):[c];if(this.referenceIntegrity)if(e){h=e;dojo.isArray(h)||(h=[h]);var j={};dojo.forEach(h,function(k){if(this.isItem(k)){k=this.getIdentity(k);j[k.toString()]=true}},this);dojo.forEach(f,function(k){if(this.isItem(k)){var l=
this.getIdentity(k);if(j[l.toString()])delete j[l.toString()];else this._addReferenceToMap(k,a,b)}},this);for(i in j)this._removeReferenceFromMap(this._itemsByIdentity?this._itemsByIdentity[i]:this._arrayOfAllItems[i],a,b)}else for(i=0;i<f.length;i++){g=f[i];this.isItem(g)&&this._addReferenceToMap(g,a,b)}a[b]=f;f=true}if(d)this.onSet(a,b,e,c);return f},_addReferenceToMap:function(a,b,c){b=this.getIdentity(b);var d=a[this._reverseRefMap];d||(d=a[this._reverseRefMap]={});(a=d[b])||(a=d[b]={});a[c]=
true},_removeReferenceFromMap:function(a,b,c){b=this.getIdentity(b);var d=a[this._reverseRefMap],e;if(d){for(e in d)if(e==b){delete d[e][c];this._isEmpty(d[e])&&delete d[e]}this._isEmpty(d)&&delete a[this._reverseRefMap]}},_dumpReferenceMap:function(){var a;for(a=0;a<this._arrayOfAllItems.length;a++){var b=this._arrayOfAllItems[a];b&&b[this._reverseRefMap]&&console.log("Item: ["+this.getIdentity(b)+"] is referenced by: "+dojo.toJson(b[this._reverseRefMap]))}},_getValueOrValues:function(a,b){var c=
undefined;if(this.hasAttribute(a,b)){c=this.getValues(a,b);c=c.length==1?c[0]:c}return c},_flatten:function(a){if(this.isItem(a))return{_reference:this.getIdentity(a)};else{if(typeof a==="object")for(var b in this._datatypeMap){var c=this._datatypeMap[b];if(dojo.isObject(c)&&!dojo.isFunction(c)){if(a instanceof c.type){if(!c.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+b+"]");return{_type:b,_value:c.serialize(a)}}}else if(a instanceof c)return{_type:b,_value:a.toString()}}return a}},
_getNewFileContentString:function(){var a={},b=this._getIdentifierAttribute();if(b!==Number)a.identifier=b;if(this._labelAttr)a.label=this._labelAttr;a.items=[];for(b=0;b<this._arrayOfAllItems.length;++b){var c=this._arrayOfAllItems[b];if(c!==null){var d={},e;for(e in c)if(e!==this._storeRefPropName&&e!==this._itemNumPropName&&e!==this._reverseRefMap&&e!==this._rootItemPropName){var f=e,g=this.getValues(c,f);if(g.length==1)d[f]=this._flatten(g[0]);else for(var h=[],i=0;i<g.length;++i){h.push(this._flatten(g[i]));
d[f]=h}}a.items.push(d)}}return dojo.toJson(a,true)},_isEmpty:function(a){var b=true;if(dojo.isObject(a))for(var c in a){b=false;break}else if(dojo.isArray(a))if(a.length>0)b=false;return b},save:function(a){this._assert(!this._saveInProgress);this._saveInProgress=true;var b=this,c=function(){b._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};b._saveInProgress=false;if(a&&a.onComplete)a.onComplete.call(a.scope||dojo.global)},d=function(f){b._saveInProgress=false;if(a&&a.onError)a.onError.call(a.scope||
dojo.global,f)};if(this._saveEverything){var e=this._getNewFileContentString();this._saveEverything(c,d,e)}this._saveCustom&&this._saveCustom(c,d);!this._saveEverything&&!this._saveCustom&&c()},revert:function(){this._assert(!this._saveInProgress);for(var a in this._pending._modifiedItems){var b=this._pending._modifiedItems[a],c=null;c=this._itemsByIdentity?this._itemsByIdentity[a]:this._arrayOfAllItems[a];b[this._storeRefPropName]=this;for(key in c)delete c[key];dojo.mixin(c,b)}var d;for(a in this._pending._deletedItems){d=
this._pending._deletedItems[a];d[this._storeRefPropName]=this;b=d[this._itemNumPropName];if(d["backup_"+this._reverseRefMap]){d[this._reverseRefMap]=d["backup_"+this._reverseRefMap];delete d["backup_"+this._reverseRefMap]}this._arrayOfAllItems[b]=d;if(this._itemsByIdentity)this._itemsByIdentity[a]=d;d[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(d)}for(a in this._pending._deletedItems){d=this._pending._deletedItems[a];if(d["backupRefs_"+this._reverseRefMap]){dojo.forEach(d["backupRefs_"+
this._reverseRefMap],function(e){this._addReferenceToMap(this._itemsByIdentity?this._itemsByIdentity[e.id]:this._arrayOfAllItems[e.id],d,e.attr)},this);delete d["backupRefs_"+this._reverseRefMap]}}for(a in this._pending._newItems){b=this._pending._newItems[a];b[this._storeRefPropName]=null;this._arrayOfAllItems[b[this._itemNumPropName]]=null;b[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,b);this._itemsByIdentity&&delete this._itemsByIdentity[a]}this._pending={_newItems:{},
_modifiedItems:{},_deletedItems:{}};return true},isDirty:function(a){if(a){a=this.getIdentity(a);return(new Boolean(this._pending._newItems[a]||this._pending._modifiedItems[a]||this._pending._deletedItems[a])).valueOf()}else{if(!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems))return true;return false}},onSet:function(){},onNew:function(){},onDelete:function(){},close:function(){if(this.clearOnClose)if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");
else this.inherited(arguments)}})}
if(!dojo._hasResource["dojox.xml.parser"]){dojo._hasResource["dojox.xml.parser"]=true;dojo.provide("dojox.xml.parser");dojox.xml.parser.parse=function(a,b){var c=dojo.doc,d;b=b||"text/xml";if(a&&dojo.trim(a)&&"DOMParser"in dojo.global){d=(new DOMParser).parseFromString(a,b);c=d.documentElement;if(c.nodeName=="parsererror"&&c.namespaceURI=="http://www.mozilla.org/newlayout/xml/parsererror.xml"){var e=c.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0];if(e)e=
e.firstChild.data;throw Error("Error parsing text "+c.firstChild.data+" \n"+e);}return d}else if("ActiveXObject"in dojo.global){c=function(g){return"MSXML"+g+".DOMDocument"};c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];dojo.some(c,function(g){try{d=new ActiveXObject(g)}catch(h){return false}return true});if(a&&d){d.async=false;d.loadXML(a);c=d.parseError;if(c.errorCode!==0)throw Error("Line: "+c.line+"\nCol: "+c.linepos+"\nReason: "+c.reason+"\nError Code: "+c.errorCode+"\nSource: "+c.srcText);}if(d)return d}else if(c.implementation&&
c.implementation.createDocument)if(a&&dojo.trim(a)&&c.createElement){e=c.createElement("xml");e.innerHTML=a;var f=c.implementation.createDocument("foo","",null);dojo.forEach(e.childNodes,function(g){f.importNode(g,true)});return f}else return c.implementation.createDocument("","",null);return null};dojox.xml.parser.textContent=function(a,b){if(arguments.length>1){dojox.xml.parser.replaceChildren(a,(a.ownerDocument||dojo.doc).createTextNode(b));return b}else{if(a.textContent!==undefined)return a.textContent;
var c="";a&&dojo.forEach(a.childNodes,function(d){switch(d.nodeType){case 1:case 5:c+=dojox.xml.parser.textContent(d);break;case 3:case 2:case 4:c+=d.nodeValue}});return c}};dojox.xml.parser.replaceChildren=function(a,b){var c=[];dojo.isIE&&dojo.forEach(a.childNodes,function(d){c.push(d)});dojox.xml.parser.removeChildren(a);dojo.forEach(c,dojo.destroy);dojo.isArray(b)?dojo.forEach(b,function(d){a.appendChild(d)}):a.appendChild(b)};dojox.xml.parser.removeChildren=function(a){for(var b=a.childNodes.length;a.hasChildNodes();)a.removeChild(a.firstChild);
return b};dojox.xml.parser.innerXML=function(a){if(a.innerXML)return a.innerXML;else if(a.xml)return a.xml;else if(typeof XMLSerializer!="undefined")return(new XMLSerializer).serializeToString(a);return null}}
if(!dojo._hasResource["dojox.data.HtmlStore"]){dojo._hasResource["dojox.data.HtmlStore"]=true;dojo.provide("dojox.data.HtmlStore");dojo.declare("dojox.data.HtmlStore",null,{constructor:function(a){if(a&&"urlPreventCache"in a)this.urlPreventCache=a.urlPreventCache?true:false;if(a&&"trimWhitespace"in a)this.trimWhitespace=a.trimWhitespace?true:false;if(a.url){if(!a.dataId)throw Error("dojo.data.HtmlStore: Cannot instantiate using url without an id!");this.url=a.url;this.dataId=a.dataId}else{if(a.dataId){this._rootNode=
dojo.byId(a.dataId);this.dataId=this._rootNode.id}else this._rootNode=dojo.byId(this.dataId);this._indexItems()}},url:"",dataId:"",trimWhitespace:false,urlPreventCache:false,_indexItems:function(){this._getHeadings();if(this._rootNode.rows){if(this._rootNode.tBodies&&this._rootNode.tBodies.length>0)this._rootNode=this._rootNode.tBodies[0];var a;for(a=0;a<this._rootNode.rows.length;a++){this._rootNode.rows[a].store=this;this._rootNode.rows[a]._ident=a+1}}else{var b=1;for(a=0;a<this._rootNode.childNodes.length;a++)if(this._rootNode.childNodes[a].nodeType===
1){this._rootNode.childNodes[a].store=this;this._rootNode.childNodes[a]._ident=b;b++}}},_getHeadings:function(){this._headings=[];if(this._rootNode.tHead)dojo.forEach(this._rootNode.tHead.rows[0].cells,dojo.hitch(this,function(a){a=dojox.xml.parser.textContent(a);this._headings.push(this.trimWhitespace?dojo.trim(a):a)}));else this._headings=["name"]},_getAllItems:function(){var a=[],b;if(this._rootNode.rows)for(b=0;b<this._rootNode.rows.length;b++)a.push(this._rootNode.rows[b]);else for(b=0;b<this._rootNode.childNodes.length;b++)this._rootNode.childNodes[b].nodeType===
1&&a.push(this._rootNode.childNodes[b]);return a},_assertIsItem:function(a){if(!this.isItem(a))throw Error("dojo.data.HtmlStore: a function was passed an item argument that was not an item");},_assertIsAttribute:function(a){if(typeof a!=="string")throw Error("dojo.data.HtmlStore: a function was passed an attribute argument that was not an attribute name string");return dojo.indexOf(this._headings,a)},getValue:function(a,b,c){a=this.getValues(a,b);return a.length>0?a[0]:c},getValues:function(a,b){this._assertIsItem(a);
var c=this._assertIsAttribute(b);if(c>-1){c=a.cells?dojox.xml.parser.textContent(a.cells[c]):dojox.xml.parser.textContent(a);return[this.trimWhitespace?dojo.trim(c):c]}return[]},getAttributes:function(a){this._assertIsItem(a);for(var b=[],c=0;c<this._headings.length;c++)this.hasAttribute(a,this._headings[c])&&b.push(this._headings[c]);return b},hasAttribute:function(a,b){return this.getValues(a,b).length>0},containsValue:function(a,b,c){var d=undefined;if(typeof c==="string")d=dojo.data.util.filter.patternToRegExp(c,
false);return this._containsValue(a,b,c,d)},_containsValue:function(a,b,c,d){a=this.getValues(a,b);for(b=0;b<a.length;++b){var e=a[b];if(typeof e==="string"&&d)return e.match(d)!==null;else if(c===e)return true}return false},isItem:function(a){if(a&&a.store&&a.store===this)return true;return false},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},_fetchItems:function(a,b,c){if(this._rootNode)this._finishFetchItems(a,b,c);else if(this.url){var d=this,
e=dojo.xhrGet({url:this.url,handleAs:"text",preventCache:this.urlPreventCache});e.addCallback(function(f){var g=function(i,j){if(i.id==j)return i;if(i.childNodes)for(var k=0;k<i.childNodes.length;k++){var l=g(i.childNodes[k],j);if(l)return l}return null},h=document.createElement("div");h.innerHTML=f;d._rootNode=g(h,d.dataId);d._indexItems();d._finishFetchItems(a,b,c)});e.addErrback(function(f){c(f,a)})}else this._rootNode=dojo.byId(this.dataId)},_finishFetchItems:function(a,b){var c=[],d=this._getAllItems();
if(a.query){var e=a.queryOptions?a.queryOptions.ignoreCase:false;c=[];var f={},g,h;for(g in a.query){h=a.query[g]+"";if(typeof h==="string")f[g]=dojo.data.util.filter.patternToRegExp(h,e)}for(e=0;e<d.length;++e){var i=true,j=d[e];for(g in a.query){h=a.query[g]+"";this._containsValue(j,g,h,f[g])||(i=false)}i&&c.push(j)}}else if(d.length>0)c=d.slice(0,d.length);b(c,a)},getFeatures:function(){return{"dojo.data.api.Read":true,"dojo.data.api.Identity":true}},close:function(){},getLabel:function(a){if(this.isItem(a))return a.cells?
"Item #"+this.getIdentity(a):this.getValue(a,"name")},getLabelAttributes:function(a){return a.cells?null:["name"]},getIdentity:function(a){this._assertIsItem(a);return this.hasAttribute(a,"name")?this.getValue(a,"name"):a._ident},getIdentityAttributes:function(){return null},fetchItemByIdentity:function(a){var b=a.identity,c=this,d=null,e=null;if(this._rootNode){if(this._rootNode.rows[b+1]){d=this._rootNode.rows[b+1];if(a.onItem){e=a.scope?a.scope:dojo.global;a.onItem.call(e,d)}}}else if(this.url){var f=
dojo.xhrGet({url:this.url,handleAs:"text"});f.addCallback(function(g){var h=function(j,k){if(j.id==k)return j;if(j.childNodes)for(var l=0;l<j.childNodes.length;l++){var n=h(j.childNodes[l],k);if(n)return n}return null},i=document.createElement("div");i.innerHTML=g;c._rootNode=h(i,c.dataId);c._indexItems();if(c._rootNode.rows&&b<=c._rootNode.rows.length)d=c._rootNode.rows[b-1];else for(g=0;g<c._rootNode.childNodes.length;g++)if(c._rootNode.childNodes[g].nodeType===1&&b===dojox.xml.parser.textContent(c._rootNode.childNodes[g])){d=
c._rootNode.childNodes[g];break}if(a.onItem){e=a.scope?a.scope:dojo.global;a.onItem.call(e,d)}});f.addErrback(function(g){if(a.onError){e=a.scope?a.scope:dojo.global;a.onError.call(e,g)}})}else{this._rootNode=dojo.byId(this.dataId);this._indexItems();if(c._rootNode.rows)d=this._rootNode.rows[b+1];else for(f=0;f<c._rootNode.childNodes.length;f++)if(c._rootNode.childNodes[f].nodeType===1&&b===dojox.xml.parser.textContent(c._rootNode.childNodes[f]))d=c._rootNode.childNodes[f];if(a.onItem){e=a.scope?
a.scope:dojo.global;a.onItem.call(e,d)}}}});dojo.extend(dojox.data.HtmlStore,dojo.data.util.simpleFetch)}
if(!dojo._hasResource["dojox.data.QueryReadStore"]){dojo._hasResource["dojox.data.QueryReadStore"]=true;dojo.provide("dojox.data.QueryReadStore");dojo.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,_numRows:-1,lastRequestHash:null,doClientPaging:false,doClientSorting:false,_itemsByIdentity:null,_identifier:null,_features:{"dojo.data.api.Read":true,"dojo.data.api.Identity":true},_labelAttr:"label",constructor:function(a){dojo.mixin(this,
a)},getValue:function(a,b,c){this._assertIsItem(a);if(!dojo.isString(b))throw Error(this._className+".getValue(): Invalid attribute, string expected!");if(!this.hasAttribute(a,b)){if(c)return c;console.log(this._className+".getValue(): Item does not have the attribute '"+b+"'.")}return a.i[b]},getValues:function(a,b){this._assertIsItem(a);var c=[];this.hasAttribute(a,b)&&c.push(a.i[b]);return c},getAttributes:function(a){this._assertIsItem(a);var b=[],c;for(c in a.i)b.push(c);return b},hasAttribute:function(a,
b){return this.isItem(a)&&typeof a.i[b]!="undefined"},containsValue:function(a,b,c){a=this.getValues(a,b);b=a.length;for(var d=0;d<b;d++)if(a[d]==c)return true;return false},isItem:function(a){if(a)return typeof a.r!="undefined"&&a.r==this;return false},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this.isItemLoaded(a.item)},fetch:function(a){a=a||{};if(!a.store)a.store=this;var b=this;this._fetchItems(a,function(c,d,e){var f=d.abort||null,g=false,h=d.start?d.start:0;if(b.doClientPaging==
false)h=0;var i=d.count?h+d.count:c.length;d.abort=function(){g=true;f&&f.call(d)};var j=d.scope||dojo.global;if(!d.store)d.store=b;d.onBegin&&d.onBegin.call(j,e,d);d.sort&&b.doClientSorting&&c.sort(dojo.data.util.sorter.createSortFunction(d.sort,b));if(d.onItem)for(e=h;e<c.length&&e<i;++e){var k=c[e];g||d.onItem.call(j,k,d)}if(d.onComplete&&!g){e=null;d.onItem||(e=c.slice(h,i));d.onComplete.call(j,e,d)}},function(c,d){if(d.onError)d.onError.call(d.scope||dojo.global,c,d)});return a},getFeatures:function(){return this._features},
close:function(){},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(){if(this._labelAttr)return[this._labelAttr];return null},_xhrFetchHandler:function(a,b,c){a=this._filterResponse(a);if(a.label)this._labelAttr=a.label;var d=a.numRows||-1;this._items=[];dojo.forEach(a.items,function(h){this._items.push({i:h,r:this})},this);a=a.identifier;this._itemsByIdentity={};if(a){this._identifier=a;var e;for(e=0;e<this._items.length;++e){var f=
this._items[e].i,g=f[a];if(this._itemsByIdentity[g])throw Error(this._className+":  The json data as specified by: ["+this.url+"] is malformed.  Items within the list have identifier: ["+a+"].  Value collided: ["+g+"]");else this._itemsByIdentity[g]=f}}else{this._identifier=Number;for(e=0;e<this._items.length;++e)this._items[e].n=e}d=this._numRows=d===-1?this._items.length:d;c(this._items,b,d);this._numRows=d},_fetchItems:function(a,b,c){var d=a.serverQuery||a.query||{};if(!this.doClientPaging){d.start=
a.start||0;if(a.count)d.count=a.count}if(!this.doClientSorting&&a.sort){var e=[];dojo.forEach(a.sort,function(g){if(g&&g.attribute)e.push((g.descending?"-":"")+g.attribute)});d.sort=e.join(",")}if(this.doClientPaging&&this._lastServerQuery!==null&&dojo.toJson(d)==dojo.toJson(this._lastServerQuery)){this._numRows=this._numRows===-1?this._items.length:this._numRows;b(this._items,a,this._numRows)}else{var f=(this.requestMethod.toLowerCase()=="post"?dojo.xhrPost:dojo.xhrGet)({url:this.url,handleAs:"json-comment-optional",
content:d});f.addCallback(dojo.hitch(this,function(g){this._xhrFetchHandler(g,a,b,c)}));f.addErrback(function(g){c(g,a)});this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=dojo.mixin({},d)}},_filterResponse:function(a){return a},_assertIsItem:function(a){if(!this.isItem(a))throw Error(this._className+": Invalid item argument.");},_assertIsAttribute:function(a){if(typeof a!=="string")throw Error(this._className+": Invalid attribute argument ('"+
a+"').");},fetchItemByIdentity:function(a){if(this._itemsByIdentity){var b=this._itemsByIdentity[a.identity];if(b!==undefined){if(a.onItem)a.onItem.call(a.scope?a.scope:dojo.global,{i:b,r:this});return}}this._fetchItems({serverQuery:{id:a.identity}},function(c){var d=a.scope?a.scope:dojo.global;try{var e=null;if(c&&c.length==1)e=c[0];a.onItem&&a.onItem.call(d,e)}catch(f){a.onError&&a.onError.call(d,f)}},function(c){var d=a.scope?a.scope:dojo.global;a.onError&&a.onError.call(d,c)})},getIdentity:function(a){var b=
null;return b=this._identifier===Number?a.n:a.i[this._identifier]},getIdentityAttributes:function(){return[this._identifier]}})}
if(!dojo._hasResource["dojox.editor.plugins.ToolbarLineBreak"]){dojo._hasResource["dojox.editor.plugins.ToolbarLineBreak"]=true;dojo.provide("dojox.editor.plugins.ToolbarLineBreak");dojo.declare("dojox.editor.plugins._ToolbarLineBreak",[dijit._Widget,dijit._Templated],{templateString:"<span class='dijit dijitReset'><br></span>",postCreate:function(){dojo.setSelectable(this.domNode,false)},isFocusable:function(){return false}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin){var b=
a.args.name.toLowerCase();if(b==="||"||b==="toolbarlinebreak")a.plugin=new dijit._editor._Plugin({button:new dojox.editor.plugins._ToolbarLineBreak,setEditor:function(c){this.editor=c}})}})}
if(!dojo._hasResource["dojox.embed.Flash"]){dojo._hasResource["dojox.embed.Flash"]=true;dojo.provide("dojox.embed.Flash");(function(){function a(g){g=dojo.delegate(f,g);if(!("path"in g)){console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided.");return null}if(!("id"in g))g.id=d+e++;return g}var b,c,d="dojox-embed-flash-",e=0,f={expressInstall:false,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};
if(dojo.isIE){b=function(g){g=a(g);if(!g)return null;var h,i=g.path;if(g.vars){var j=[];for(h in g.vars)j.push(h+"="+g.vars[h]);g.params.FlashVars=j.join("&");delete g.vars}i='<object id="'+g.id+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+g.width+'" height="'+g.height+'"'+(g.style?' style="'+g.style+'"':"")+'><param name="movie" value="'+i+'" />';if(g.params)for(h in g.params)i+='<param name="'+h+'" value="'+g.params[h]+'" />';i+="</object>";return{id:g.id,markup:i}};c=function(){for(var g=
10,h=null;!h&&g>7;)try{h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+g--)}catch(i){}if(h){g=h.GetVariable("$version").split(" ")[1].split(",");return{major:g[0]!=null?parseInt(g[0]):0,minor:g[1]!=null?parseInt(g[1]):0,rev:g[2]!=null?parseInt(g[2]):0}}return{major:0,minor:0,rev:0}}();dojo.addOnUnload(function(){var g=function(){};dojo.query("object").reverse().style("display","none").forEach(function(h){for(var i in h)if(i!="FlashVars"&&dojo.isFunction(h[i]))try{h[i]=g}catch(j){}})})}else{b=
function(g){g=a(g);if(!g)return null;var h,i=g.path;if(g.vars){var j=[];for(h in g.vars)j.push(h+"="+g.vars[h]);g.params.flashVars=j.join("&");delete g.vars}i='<embed type="application/x-shockwave-flash" src="'+i+'" id="'+g.id+'" width="'+g.width+'" height="'+g.height+'"'+(g.style?' style="'+g.style+'" ':"")+'swLiveConnect="'+g.swLiveConnect+'" allowScriptAccess="'+g.allowScriptAccess+'" allowNetworking="'+g.allowNetworking+'" pluginspage="'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';
if(g.params)for(h in g.params)i+=" "+h+'="'+g.params[h]+'"';i+=" />";return{id:g.id,markup:i}};c=function(){var g=navigator.plugins["Shockwave Flash"];if(g&&g.description){g=g.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".");return{major:g[0]!=null?parseInt(g[0]):0,minor:g[1]!=null?parseInt(g[1]):0,rev:g[2]!=null?parseInt(g[2]):0}}return{major:0,minor:0,rev:0}}()}dojox.embed.Flash=function(g,h){if(location.href.toLowerCase().indexOf("file://")>-1)throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=dojox.embed.Flash.available;this.minimumVersion=g.minimumVersion||9;this.domNode=this.movie=this.id=null;if(h)h=dojo.byId(h);setTimeout(dojo.hitch(this,function(){if(g.expressInstall||this.available&&this.available>=this.minimumVersion)if(g&&h)this.init(g,h);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};dojo.extend(dojox.embed.Flash,{onReady:function(g){console.warn("embed.Flash.movie.onReady:",g)},onLoad:function(g){console.warn("embed.Flash.movie.onLoad:",g)},onError:function(){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(g,h){console.log("embed.Flash.movie.init");this.destroy();h=dojo.byId(h||this.domNode);if(!h)throw Error("dojox.embed.Flash: no domNode reference has been passed.");
var i=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;if(dojox.embed.Flash.initialized){this.id=dojox.embed.Flash.place(g,h);this.domNode=h;setTimeout(dojo.hitch(this,function(){this.movie=this.byId(this.id,g.doc);this.onReady(this.movie);this._poller=setInterval(dojo.hitch(this,function(){try{i=this.movie.PercentLoaded()}catch(j){console.warn("this.movie.PercentLoaded() failed")}if(i==100)this._onload();else if(i==0&&this._pollCount++>this._pollMax){clearInterval(this._poller);
throw Error("Building SWF failed.");}}),this.pollTime)}),1)}},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(g){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var g=dojo.delegate({id:true,movie:true,domNode:true,onReady:true,onLoad:true}),h;for(h in this)g[h]||delete this[h];this._poller?dojo.connect(this,"onLoad",this,"_destroy"):this._destroy()}},byId:function(g,h){h=h||document;if(h.embeds[g])return h.embeds[g];if(h[g])return h[g];if(window[g])return window[g];
if(document[g])return document[g];return null}});dojo.mixin(dojox.embed.Flash,{minSupported:8,available:c.major,supported:c.major>=c.required,minimumRequired:c.required,version:c,initialized:false,onInitialize:function(){dojox.embed.Flash.initialized=true},__ie_markup__:function(g){return b(g)},proxy:function(g,h){dojo.forEach(dojo.isArray(h)?h:[h],function(i){this[i]=dojo.hitch(this,function(){return function(){return eval(this.movie.CallFunction('<invoke name="'+i+'" returntype="javascript"><arguments>'+
dojo.map(arguments,function(j){return __flash__toXML(j)}).join("")+"</arguments></invoke>"))}.apply(this,arguments||[])})},g)}});dojox.embed.Flash.place=function(g,h){var i=b(g);h=dojo.byId(h);if(!h){h=dojo.doc.createElement("div");h.id=i.id+"-container";dojo.body().appendChild(h)}if(i){h.innerHTML=i.markup;return i.id}return null};dojox.embed.Flash.onInitialize()})()}
if(!dojo._hasResource["dojo.io.iframe"]){dojo._hasResource["dojo.io.iframe"]=true;dojo.provide("dojo.io.iframe");dojo.io.iframe={create:function(a,b,c){if(window[a])return window[a];if(window.frames[a])return window.frames[a];var d=null;if(!c){dojo.config.useXDomain&&!dojo.config.dojoBlankHtmlUrl&&console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl to the path on your domain to blank.html");
c=dojo.config.dojoBlankHtmlUrl||dojo.moduleUrl("dojo","resources/blank.html")}d=dojo.doc.createElement(dojo.isIE?'<iframe name="'+a+'" src="'+c+'" onload="'+b+'">':"iframe");with(d){name=a;setAttribute("name",a);id=a}dojo.body().appendChild(d);window[a]=d;with(d.style){dojo.isSafari<3||(position="absolute");height=width=left=top="1px";visibility="hidden"}if(!dojo.isIE){this.setSrc(d,c,true);d.onload=new Function(b)}return d},setSrc:function(a,b,c){try{if(c){var d;if(d=dojo.isIE||dojo.isWebKit>521?
a.contentWindow.document:dojo.isSafari?a.document:a.contentWindow)d.location.replace(b);else a.location=b}else if(dojo.isWebKit)a.location=b;else frames[a.name].location=b}catch(e){console.log("dojo.io.iframe.setSrc: ",e)}},doc:function(a){return a.contentDocument||a.name&&a.document&&dojo.doc.getElementsByTagName("iframe")[a.name].contentWindow&&dojo.doc.getElementsByTagName("iframe")[a.name].contentWindow.document||a.name&&dojo.doc.frames[a.name]&&dojo.doc.frames[a.name].document||null},send:function(a){if(!this._frame)this._frame=
this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");a=dojo._ioSetArgs(a,function(b){b.canceled=true;b.ioArgs._callNext()},function(b){var c=null;try{var d=b.ioArgs,e=dojo.io.iframe,f=e.doc(e._frame),g=d.handleAs;c=f;if(g!="html")if(g=="xml"){if(dojo.isIE){dojo.query("a",e._frame.contentWindow.document.documentElement).orphan();var h=e._frame.contentWindow.document.documentElement.innerText;h=h.replace(/>\s+</g,"><");h=dojo.trim(h);c=dojo._contentHandlers.xml({responseText:h})}}else{c=
f.getElementsByTagName("textarea")[0].value;if(g=="json")c=dojo.fromJson(c);else if(g=="javascript")c=dojo.eval(c)}}catch(i){c=i}finally{d._callNext()}return c},function(b,c){c.ioArgs._hasError=true;c.ioArgs._callNext();return b});a.ioArgs._callNext=function(){if(!this._calledNext){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest()}};this._dfdQueue.push(a);this._fireNextRequest();dojo._ioWatch(a,function(b){return!b.ioArgs._hasError},function(b){return!!b.ioArgs._finished},
function(b){b.ioArgs._finished?b.callback(b):b.errback(Error("Invalid dojo.io.iframe request state"))});return a},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if(!(this._currentDfd||this._dfdQueue.length==0)){do var a=this._currentDfd=this._dfdQueue.shift();while(a&&a.canceled&&this._dfdQueue.length);if(!a||a.canceled)this._currentDfd=null;else{var b=a.ioArgs,c=b.args;b._contentToClean=[];var d=dojo.byId(c.form),e=c.content||{};if(d){if(e){var f=
function(m,o){var q;if(dojo.isIE)q=dojo.doc.createElement("<input type='hidden' name='"+m+"'>");else{q=dojo.doc.createElement("input");q.type="hidden";q.name=m}q.value=o;d.appendChild(q);b._contentToClean.push(m)},g;for(g in e){var h=e[g];if(dojo.isArray(h)&&h.length>1){var i;for(i=0;i<h.length;i++)f(g,h[i])}else if(d[g])d[g].value=h;else f(g,h)}}var j=d.getAttributeNode("action"),k=d.getAttributeNode("method"),l=d.getAttributeNode("target");if(c.url){b._originalAction=j?j.value:null;if(j)j.value=
c.url;else d.setAttribute("action",c.url)}if(!k||!k.value)if(k)k.value=c.method?c.method:"post";else d.setAttribute("method",c.method?c.method:"post");b._originalTarget=l?l.value:null;if(l)l.value=this._iframeName;else d.setAttribute("target",this._iframeName);d.target=this._iframeName;dojo._ioNotifyStart(a);d.submit()}else{f=c.url+(c.url.indexOf("?")>-1?"&":"?")+b.query;dojo._ioNotifyStart(a);this.setSrc(this._frame,f,true)}}}}catch(n){a.errback(n)}},_iframeOnload:function(){var a=this._currentDfd;
if(a){a=a.ioArgs;var b=dojo.byId(a.args.form);if(b){for(var c=a._contentToClean,d=0;d<c.length;d++)for(var e=c[d],f=0;f<b.childNodes.length;f++){var g=b.childNodes[f];if(g.name==e){dojo.destroy(g);break}}a._originalAction&&b.setAttribute("action",a._originalAction);if(a._originalTarget){b.setAttribute("target",a._originalTarget);b.target=a._originalTarget}}a._finished=true}else this._fireNextRequest()}}}
if(!dojo._hasResource["dojox.html.styles"]){dojo._hasResource["dojox.html.styles"]=true;dojo.provide("dojox.html.styles");(function(){var a={},b={},c=[];dojox.html.insertCssRule=function(d,e,f){f=dojox.html.getDynamicStyleSheet(f);var g=d+" {"+e+"}";console.log("insertRule:",g);if(dojo.isIE){f.cssText+=g;console.log("ss.cssText:",f.cssText)}else f.sheet?f.sheet.insertRule(g,f._indicies.length):f.appendChild(dojo.doc.createTextNode(g));f._indicies.push(d+" "+e);return d};dojox.html.removeCssRule=function(d,
e,f){var g,h=-1,i;for(i in a)if(!(f&&f!=i)){g=a[i];for(var j=0;j<g._indicies.length;j++)if(d+" "+e==g._indicies[j]){h=j;break}if(h>-1)break}if(!g){console.log("No dynamic style sheet has been created from which to remove a rule.");return false}if(h==-1){console.log("The css rule was not found and could not be removed.");return false}g._indicies.splice(h,1);if(dojo.isIE)g.removeRule(h);else if(g.sheet)g.sheet.deleteRule(h);else document.styleSheets[0]&&console.log("what browser hath useth thith?");
return true};dojox.html.getStyleSheet=function(d){if(a[d||"default"])return a[d||"default"];if(!d)return false;var e=dojox.html.getStyleSheets();if(e[d])return dojox.html.getStyleSheets()[d];for(var f in e)if(e[f].href&&e[f].href.indexOf(d)>-1)return e[f];return false};dojox.html.getDynamicStyleSheet=function(d){d||(d="default");if(!a[d]){if(dojo.doc.createStyleSheet){a[d]=dojo.doc.createStyleSheet();a[d].title=d}else{a[d]=dojo.doc.createElement("style");a[d].setAttribute("type","text/css");dojo.doc.getElementsByTagName("head")[0].appendChild(a[d]);
console.log(d," ss created: ",a[d].sheet)}a[d]._indicies=[]}return a[d]};dojox.html.enableStyleSheet=function(d){if(d=dojox.html.getStyleSheet(d))if(d.sheet)d.sheet.disabled=false;else d.disabled=false};dojox.html.disableStyleSheet=function(d){if(d=dojox.html.getStyleSheet(d))if(d.sheet)d.sheet.disabled=true;else d.disabled=true};dojox.html.activeStyleSheet=function(d){var e=dojox.html.getToggledStyleSheets();if(arguments.length==1)dojo.forEach(e,function(g){g.disabled=g.title==d?false:true});else for(var f=
0;f<e.length;f++)if(e[f].disabled==false)return e[f];return true};dojox.html.getPreferredStyleSheet=function(){};dojox.html.getToggledStyleSheets=function(){if(!c.length){var d=dojox.html.getStyleSheets(),e;for(e in d)d[e].title&&c.push(d[e])}return c};dojox.html.getStyleSheets=function(){if(b.collected)return b;dojo.forEach(dojo.doc.styleSheets,function(d){var e=d.sheet?d.sheet:d;d=e.title||e.href;if(dojo.isIE){if(e.cssText.indexOf("#default#VML")==-1)if(e.href)b[d]=e;else if(e.imports.length)dojo.forEach(e.imports,
function(f){b[f.title||f.href]=f});else b[d]=e}else{b[d]=e;b[d].id=e.ownerNode.id;dojo.forEach(e.cssRules,function(f){if(f.href){b[f.href]=f.styleSheet;b[f.href].id=e.ownerNode.id}})}});b.collected=true;return b}})()}
if(!dojo._hasResource["dojox.embed.flashVars"]){dojo._hasResource["dojox.embed.flashVars"]=true;dojo.provide("dojox.embed.flashVars");dojo.mixin(dojox.embed.flashVars,{serialize:function(a,b){var c=function(g){if(typeof g=="string"){g=g.replace(/;/g,"_sc_");g=g.replace(/\./g,"_pr_");g=g.replace(/\:/g,"_cl_")}return g},d=dojox.embed.flashVars.serialize,e="";if(dojo.isArray(b)){for(var f=0;f<b.length;f++)e+=d(a+"."+f,c(b[f]))+";";return e.replace(/;{2,}/g,";")}else if(dojo.isObject(b)){for(f in b)e+=
d(a+"."+f,c(b[f]))+";";return e.replace(/;{2,}/g,";")}return a+":"+b}})}
if(!dojo._hasResource["dojox.form.FileUploader"]){dojo._hasResource["dojox.form.FileUploader"]=true;dojo.provide("dojox.form.FileUploader");dojo.experimental("dojox.form.FileUploader");dojo.declare("dojox.form.FileUploader",[dijit._Widget,dijit._Templated,dijit._Contained],{swfPath:dojo.config.uploaderPath||dojo.moduleUrl("dojox.form","resources/uploader.swf"),templateString:'<div><div dojoAttachPoint="progNode"><div dojoAttachPoint="progTextNode"></div></div><div dojoAttachPoint="insideNode" class="uploaderInsideNode"></div></div>',uploadUrl:"",
isDebug:false,devMode:false,baseClass:"dojoxUploaderNorm",hoverClass:"dojoxUploaderHover",activeClass:"dojoxUploaderActive",disabledClass:"dojoxUploaderDisabled",force:"",uploaderType:"",flashObject:null,flashMovie:null,flashDiv:null,insideNode:null,deferredUploading:1,fileListId:"",uploadOnChange:false,selectMultipleFiles:true,htmlFieldName:"uploadedfile",flashFieldName:"flashUploadFiles",fileMask:null,minFlashVersion:9,tabIndex:-1,showProgress:false,progressMessage:"Loading",progressBackgroundUrl:dojo.moduleUrl("dijit",
"themes/tundra/images/buttonActive.png"),progressBackgroundColor:"#ededed",progressWidgetId:"",skipServerCheck:false,serverTimeout:5E3,log:function(){this.isDebug&&console.log(Array.prototype.slice.call(arguments).join(" "))},constructor:function(){this._subs=[]},postMixInProperties:function(){this.fileList=[];this._cons=[];this.fileMask=this.fileMask||[];this.fileInputs=[];this.fileCount=0;this._disabled=this.flashReady=false;this.force=this.force.toLowerCase();this.uploaderType=(dojox.embed.Flash.available>=
this.minFlashVersion||this.force=="flash")&&this.force!="html"?"flash":"html";this.deferredUploading=this.deferredUploading===true?1:this.deferredUploading;this._refNode=this.srcNodeRef;this.getButtonStyle()},startup:function(){},postCreate:function(){this.inherited(arguments);this.setButtonStyle();var a;if(this.uploaderType=="flash")a="createFlashUploader";else{this.uploaderType="html";a="createHtmlUploader"}var b=this.getHiddenWidget();if(b)var c=dojo.connect(b,"onShow",this,function(){dojo.disconnect(c);
this[a]()});else this[a]();this.fileListId&&this.connect(dojo.byId(this.fileListId),"click",function(d){d=d.target.parentNode.parentNode.parentNode;d.id&&d.id.indexOf("file_")>-1&&this.removeFile(d.id.split("file_")[1])});dojo.addOnUnload(this,this.destroy)},getHiddenWidget:function(){for(var a=this.domNode.parentNode;a;){var b=a.getAttribute&&a.getAttribute("widgetId");if(b&&dijit.byId(b).onShow)return dijit.byId(b);a=a.parentNode}return null},getHiddenNode:function(a){if(!a)return null;var b=null;
for(a=a.parentNode;a.tagName.toLowerCase()!="body";){if(dojo.style(a,"display")=="none"){b=a;break}a=a.parentNode}return b},getButtonStyle:function(){var a=this.srcNodeRef;if(this._hiddenNode=this.getHiddenNode(a)){console.info("Turning on hidden node");dojo.style(this._hiddenNode,"display","block")}this.button&&console.warn("DEPRECATED: FileUploader.button - will be removed in 1.5. FileUploader should be created as widget.");if(!a&&this.button&&this.button.domNode){var b=true;a=this.button.domNode.className+
" dijitButtonNode";var c=this.getText(dojo.query(".dijitButtonText",this.button.domNode)[0]);this.srcNodeRef=a=dojo.place('<button id="'+this.button.id+'" class="'+a+'">'+c+"</button>",this.button.domNode,"after");this.button.destroy();this.baseClass="dijitButton";this.hoverClass="dijitButtonHover";this.pressClass="dijitButtonActive";this.disabledClass="dijitButtonDisabled"}else if(!this.srcNodeRef&&this.button)a=this.button;if(dojo.attr(a,"class"))this.baseClass+=" "+dojo.attr(a,"class");dojo.attr(a,
"class",this.baseClass);this.norm=this.getStyle(a);this.width=this.norm.w;this.height=this.norm.h;if(this.uploaderType=="flash"){this.over=this.getTempNodeStyle(a,this.baseClass+" "+this.hoverClass,b);this.down=this.getTempNodeStyle(a,this.baseClass+" "+this.activeClass,b);this.dsbl=this.getTempNodeStyle(a,this.baseClass+" "+this.disabledClass,b);this.fhtml={cn:this.getText(a),nr:this.norm,ov:this.over,dn:this.down,ds:this.dsbl}}else{this.fhtml={cn:this.getText(a),nr:this.norm};if(this.norm.va=="middle")this.norm.lh=
this.norm.h}if(this.devMode){this.log("classes - base:",this.baseClass," hover:",this.hoverClass,"active:",this.activeClass);this.log("fhtml:",this.fhtml);this.log("norm:",this.norm);this.log("over:",this.over);this.log("down:",this.down)}},setButtonStyle:function(){dojo.style(this.domNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+"px",padding:"0px",lineHeight:"normal",position:"relative"});this.uploaderType=="html"&&this.norm.va=="middle"&&dojo.style(this.domNode,"lineHeight",this.norm.lh+
"px");if(this.showProgress){this.progTextNode.innerHTML=this.progressMessage;dojo.style(this.progTextNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",lineHeight:this.fhtml.nr.h+0+"px",position:"absolute"});dojo.style(this.progNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",position:"absolute",display:"none",backgroundImage:"url("+this.progressBackgroundUrl+")",backgroundPosition:"bottom",backgroundRepeat:"repeat-x",
backgroundColor:this.progressBackgroundColor})}else dojo.destroy(this.progNode);dojo.style(this.insideNode,{position:"absolute",top:"0px",left:"0px",display:""});dojo.addClass(this.domNode,this.srcNodeRef.className);this.fhtml.nr.d.indexOf("inline")>-1&&dojo.addClass(this.domNode,"dijitInline");try{this.insideNode.innerHTML=this.fhtml.cn}catch(a){if(this.uploaderType=="flash"){this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);dojo.body().appendChild(this.insideNode);this.insideNode.innerHTML=
this.fhtml.cn;var b=dojo.connect(this,"onReady",this,function(){dojo.disconnect(b);this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);this.domNode.appendChild(this.insideNode)})}else this.insideNode.appendChild(document.createTextNode(this.fhtml.cn))}this.flashDiv=this.insideNode;this._hiddenNode&&dojo.style(this._hiddenNode,"display","none")},onChange:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onError:function(){},onReady:function(){},
onLoad:function(){},submit:function(a){this.upload(a?dojo.formToObject(a):null);return false},upload:function(a){if(!this.fileList.length)return false;if(!this.uploadUrl){console.warn("uploadUrl not provided. Aborting.");return false}this.showProgress||this.set("disabled",true);if(this.progressWidgetId){var b=dijit.byId(this.progressWidgetId).domNode;if(dojo.style(b,"display")=="none"){this.restoreProgDisplay="none";dojo.style(b,"display","block")}if(dojo.style(b,"visibility")=="hidden"){this.restoreProgDisplay=
"hidden";dojo.style(b,"visibility","visible")}}if(a&&!a.target)this.postData=a;this.log("upload type:",this.uploaderType," - postData:",this.postData);for(a=0;a<this.fileList.length;a++){b=this.fileList[a];b.bytesLoaded=0;b.bytesTotal=b.size||1E5;b.percent=0}this.uploaderType=="flash"?this.uploadFlash():this.uploadHTML();return false},removeFile:function(a,b){var c;for(c=0;c<this.fileList.length;c++)if(this.fileList[c].name==a){b||this.fileList.splice(c,1);break}if(this.uploaderType=="flash")this.flashMovie.removeFile(a);
else if(!b){dojo.destroy(this.fileInputs[c]);this.fileInputs.splice(c,1);this._renumberInputs()}this.fileListId&&dojo.destroy("file_"+a)},destroyAll:function(){console.warn("DEPRECATED for 1.5 - use destroy() instead");this.destroy()},destroy:function(){if(this.uploaderType=="flash"&&!this.flashMovie)this._cons.push(dojo.connect(this,"onLoad",this,"destroy"));else{dojo.forEach(this._subs,dojo.unsubscribe,dojo);dojo.forEach(this._cons,dojo.disconnect,dojo);this.scrollConnect&&dojo.disconnect(this.scrollConnect);
if(this.uploaderType=="flash"){this.flashObject.destroy();dojo.destroy(this.flashDiv)}else{dojo.destroy("dojoIoIframe");dojo.destroy(this._fileInput);dojo.destroy(this._formNode)}this.inherited(arguments)}},hide:function(){console.warn("DEPRECATED for 1.5 - use dojo.style(domNode, 'display', 'none' instead");dojo.style(this.domNode,"display","none")},show:function(){console.warn("DEPRECATED for 1.5 - use dojo.style(domNode, 'display', '') instead");dojo.style(this.domNode,"display","")},disable:function(a){console.warn("DEPRECATED: FileUploader.disable() - will be removed in 1.5. Use set('disable', true) instead.");
this.set("disable",a)},_displayProgress:function(a){if(a===true){this.uploaderType=="flash"?dojo.style(this.insideNode,"left","-2500px"):dojo.style(this.insideNode,"display","none");dojo.style(this.progNode,"display","")}else if(a===false){dojo.style(this.insideNode,{display:"",left:"0px"});dojo.style(this.progNode,"display","none")}else dojo.style(this.progNode,"width",a*this.fhtml.nr.w+"px")},_animateProgress:function(){this._displayProgress(true);var a=false,b=dojo.connect(this,"_complete",function(){dojo.disconnect(b);
a=true}),c=0,d=setInterval(dojo.hitch(this,function(){c+=5;if(c>this.fhtml.nr.w){c=0;a=true}this._displayProgress(c/this.fhtml.nr.w);if(a){clearInterval(d);setTimeout(dojo.hitch(this,function(){this._displayProgress(false)}),500)}}),50)},_error:function(a){if(typeof a=="string")a=Error(a);this.onError(a)},_addToFileList:function(){if(this.fileListId){var a="";dojo.forEach(this.fileList,function(b){a+='<table id="file_'+b.name+'" class="fileToUpload"><tr><td class="fileToUploadClose"></td><td class="fileToUploadName">'+
b.name+'</td><td class="fileToUploadSize">'+(b.size?Math.ceil(b.size*0.0010)+"kb":"")+"</td></tr></table>"},this);dojo.byId(this.fileListId).innerHTML=a}},_change:function(a){dojo.isIE&&dojo.forEach(a,function(b){b.name=b.name.split("\\")[b.name.split("\\").length-1]});if(this.selectMultipleFiles)this.fileList=this.fileList.concat(a);else{this.fileList[0]&&this.removeFile(this.fileList[0].name,true);this.fileList=a}this._addToFileList();this.onChange(a);if(this.uploadOnChange){this.uploaderType==
"html"&&this._buildFileInput();this.upload()}else if(this.uploaderType=="html"&&this.selectMultipleFiles){this._buildFileInput();this._connectInput()}},_complete:function(a){a=dojo.isArray(a)?a:[a];dojo.forEach(a,function(b){b.ERROR&&this._error(b.ERROR)},this);dojo.forEach(this.fileList,function(b){b.bytesLoaded=1;b.bytesTotal=1;b.percent=100;this._progress(b)},this);dojo.forEach(this.fileList,function(b){this.removeFile(b.name,true)},this);this.onComplete(a);this.fileList=[];this._resetHTML();this.set("disabled",
false);this.restoreProgDisplay&&setTimeout(dojo.hitch(this,function(){dojo.style(dijit.byId(this.progressWidgetId).domNode,this.restoreProgDisplay=="none"?"display":"visibility",this.restoreProgDisplay)}),500)},_progress:function(a){for(var b=0,c=0,d=0;d<this.fileList.length;d++){var e=this.fileList[d];if(e.name==a.name){e.bytesLoaded=a.bytesLoaded;e.bytesTotal=a.bytesTotal;e.percent=Math.ceil(e.bytesLoaded/e.bytesTotal*100);this.log(e.name,"percent:",e.percent)}c+=Math.ceil(0.0010*e.bytesLoaded);
b+=Math.ceil(0.0010*e.bytesTotal)}a=Math.ceil(c/b*100);this.progressWidgetId&&dijit.byId(this.progressWidgetId).update({progress:a+"%"});this.showProgress&&this._displayProgress(a*0.01);this.onProgress(this.fileList)},_getDisabledAttr:function(){return this._disabled},_setDisabledAttr:function(a){if(this._disabled!=a){if(this.uploaderType=="flash"){if(!this.flashReady){var b=dojo.connect(this,"onLoad",this,function(){dojo.disconnect(b);this._setDisabledAttr(a)});return}this._disabled=a;this.flashMovie.doDisable(a)}else{this._disabled=
a;dojo.style(this._fileInput,"display",this._disabled?"none":"")}dojo.toggleClass(this.domNode,this.disabledClass,a)}},_onFlashBlur:function(){this.flashMovie.blur();if(!this.nextFocusObject&&this.tabIndex)for(var a=dojo.query("[tabIndex]"),b=0;b<a.length;b++)if(a[b].tabIndex>=Number(this.tabIndex)+1){this.nextFocusObject=a[b];break}this.nextFocusObject.focus()},_disconnect:function(){dojo.forEach(this._cons,dojo.disconnect,dojo)},uploadHTML:function(){this.selectMultipleFiles&&dojo.destroy(this._fileInput);
this._setHtmlPostData();this.showProgress&&this._animateProgress();dojo.io.iframe.send({url:this.uploadUrl,form:this._formNode,handleAs:"json",error:dojo.hitch(this,function(a){this._error("HTML Upload Error:"+a.message)}),load:dojo.hitch(this,function(a){this._complete(a)})})},createHtmlUploader:function(){this._buildForm();this._setFormStyle();this._buildFileInput();this._connectInput();this._styleContent();dojo.style(this.insideNode,"visibility","visible");this.onReady()},_connectInput:function(){this._disconnect();
this._cons.push(dojo.connect(this._fileInput,"mouseover",this,function(a){dojo.addClass(this.domNode,this.hoverClass);this.onMouseOver(a)}));this._cons.push(dojo.connect(this._fileInput,"mouseout",this,function(a){dojo.removeClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,this.hoverClass);this.onMouseOut(a);this._checkHtmlCancel("off")}));this._cons.push(dojo.connect(this._fileInput,"mousedown",this,function(a){dojo.addClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,
this.hoverClass);this.onMouseDown(a)}));this._cons.push(dojo.connect(this._fileInput,"mouseup",this,function(a){dojo.removeClass(this.domNode,this.activeClass);this.onMouseUp(a);this.onClick(a);this._checkHtmlCancel("up")}));this._cons.push(dojo.connect(this._fileInput,"change",this,function(){this._checkHtmlCancel("change");this._change([{name:this._fileInput.value,type:"",size:0}])}));this.tabIndex>=0&&dojo.attr(this.domNode,"tabIndex",this.tabIndex)},_checkHtmlCancel:function(a){if(a=="change")this.dialogIsOpen=
false;if(a=="up")this.dialogIsOpen=true;if(a=="off"){if(this.dialogIsOpen)this.onCancel();this.dialogIsOpen=false}},_styleContent:function(){var a=this.fhtml.nr;dojo.style(this.insideNode,{width:a.w+"px",height:a.va=="middle"?a.h+"px":"auto",textAlign:a.ta,paddingTop:a.p[0]+"px",paddingRight:a.p[1]+"px",paddingBottom:a.p[2]+"px",paddingLeft:a.p[3]+"px"});try{dojo.style(this.insideNode,"lineHeight","inherit")}catch(b){}},_resetHTML:function(){if(this.uploaderType=="html"&&this._formNode){this.fileInputs=
[];dojo.query("*",this._formNode).forEach(function(a){dojo.destroy(a)});this.fileCount=0;this._buildFileInput();this._connectInput()}},_buildForm:function(){if(!this._formNode){if(dojo.isIE){this._formNode=document.createElement('<form enctype="multipart/form-data" method="post">');this._formNode.encoding="multipart/form-data"}else{this._formNode=document.createElement("form");this._formNode.setAttribute("enctype","multipart/form-data")}this._formNode.id=dijit.getUniqueId("FileUploaderForm");this.domNode.appendChild(this._formNode)}},
_buildFileInput:function(){if(this._fileInput){this._disconnect();this._fileInput.id+=this.fileCount;dojo.style(this._fileInput,"display","none")}this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var a=this.htmlFieldName;if(this.selectMultipleFiles){a+=this.fileCount;this.fileCount++}dojo.attr(this._fileInput,{id:this.id,name:a,type:"file"});dojo.addClass(this._fileInput,"dijitFileInputReal");console.warn("BUILD FI");this._formNode.appendChild(this._fileInput);
a=dojo.marginBox(this._fileInput);dojo.style(this._fileInput,{position:"relative",left:this.fhtml.nr.w-a.w+"px",opacity:0})},_renumberInputs:function(){if(this.selectMultipleFiles){var a;this.fileCount=0;dojo.forEach(this.fileInputs,function(b){a=this.htmlFieldName+this.fileCount;this.fileCount++;dojo.attr(b,"name",a)},this)}},_setFormStyle:function(){dojox.html.insertCssRule("#"+this._formNode.id+" input","font-size:"+Math.max(2,Math.max(Math.ceil(this.fhtml.nr.w/60),Math.ceil(this.fhtml.nr.h/15)))+
"em");dojo.style(this.domNode,{overflow:"hidden",position:"relative"});dojo.style(this.insideNode,"position","absolute")},_setHtmlPostData:function(){if(this.postData)for(var a in this.postData)dojo.create("input",{type:"hidden",name:a,value:this.postData[a]},this._formNode)},uploadFlash:function(){try{if(this.showProgress){this._displayProgress(true);var a=dojo.connect(this,"_complete",this,function(){dojo.disconnect(a);this._displayProgress(false)})}var b={},c;for(c in this.postData)b[c]=this.postData[c];
console.warn("this.postData:",b);this.flashMovie.doUpload(b)}catch(d){this._error("FileUploader - Sorry, the SWF failed to initialize."+d)}},createFlashUploader:function(){if(this.uploadUrl=this.uploadUrl.toString())if(this.uploadUrl.toLowerCase().indexOf("http")<0&&this.uploadUrl.indexOf("/")!=0){var a=window.location.href.split("/");a.pop();a=a.join("/")+"/";this.uploadUrl=a+this.uploadUrl;this.log("SWF Fixed - Relative loc:",a," abs loc:",this.uploadUrl)}else this.log("SWF URL unmodified:",this.uploadUrl);
else console.warn("Warning: no uploadUrl provided.");a={expressInstall:true,path:this.swfPath.uri||this.swfPath,width:this.fhtml.nr.w,height:this.fhtml.nr.h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName,uploadUrl:this.uploadUrl,uploadOnSelect:this.uploadOnChange,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.selectMultipleFiles,id:this.id,isDebug:this.isDebug,devMode:this.devMode,flashButton:dojox.embed.flashVars.serialize("fh",
this.fhtml),fileMask:dojox.embed.flashVars.serialize("fm",this.fileMask),noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque"}};this.flashObject=new dojox.embed.Flash(a,this.insideNode);this.flashObject.onError=dojo.hitch(function(b){this._error("Flash Error: "+b)});this.flashObject.onReady=dojo.hitch(this,function(){dojo.style(this.insideNode,"visibility","visible");this.log("FileUploader flash object ready");this.onReady(this)});this.flashObject.onLoad=
dojo.hitch(this,function(b){this.flashMovie=b;this.flashReady=true;this.onLoad(this)});this._connectFlash()},_connectFlash:function(){this._doSub("/filesSelected","_change");this._doSub("/filesUploaded","_complete");this._doSub("/filesProgress","_progress");this._doSub("/filesError","_error");this._doSub("/filesCanceled","onCancel");this._doSub("/stageBlur","_onFlashBlur");this._doSub("/up","onMouseUp");this._doSub("/down","onMouseDown");this._doSub("/over","onMouseOver");this._doSub("/out","onMouseOut");
this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});this.tabIndex>=0&&dojo.attr(this.domNode,"tabIndex",this.tabIndex)},_doSub:function(a,b){this._subs.push(dojo.subscribe(this.id+a,this,b))},urlencode:function(a){if(!a||a=="none")return false;return a.replace(/:/g,"||").replace(/\./g,"^^").replace("url(","").replace(")","").replace(/'/g,"").replace(/"/g,"")},isButton:function(a){a=a.tagName.toLowerCase();return a=="button"||a=="input"},getTextStyle:function(a){var b=
{};b.ff=dojo.style(a,"fontFamily");if(b.ff){b.ff=b.ff.replace(", ",",");b.ff=b.ff.replace(/\"|\'/g,"");b.ff=b.ff=="sans-serif"?"Arial":b.ff;b.fw=dojo.style(a,"fontWeight");b.fi=dojo.style(a,"fontStyle");b.fs=parseInt(dojo.style(a,"fontSize"),10);if(dojo.style(a,"fontSize").indexOf("%")>-1)for(var c=a;c.tagName;){console.log(" P FONT:",dojo.style(a,"fontSize"));if(dojo.style(c,"fontSize").indexOf("%")==-1){b.fs=parseInt(dojo.style(c,"fontSize"),10);break}if(c.tagName.toLowerCase()=="body")b.fs=0.16*
parseInt(dojo.style(c,"fontSize"),10);c=c.parentNode}b.fc=(new dojo.Color(dojo.style(a,"color"))).toHex();b.fc=parseInt(b.fc.substring(1,Infinity),16)}b.lh=dojo.style(a,"lineHeight");b.ta=dojo.style(a,"textAlign");b.ta=b.ta=="start"||!b.ta?"left":b.ta;b.va=this.isButton(a)?"middle":b.lh==b.h?"middle":dojo.style(a,"verticalAlign");return b},getText:function(a){a=dojo.trim(a.innerHTML);if(a.indexOf("<")>-1)a=escape(a);return a},getStyle:function(a){var b={},c=dojo.contentBox(a),d=dojo._getPadExtents(a);
b.p=[d.t,d.w-d.l,d.h-d.t,d.l];b.w=c.w+d.w;b.h=c.h+d.h;b.d=dojo.style(a,"display");c=new dojo.Color(dojo.style(a,"backgroundColor"));b.bc=c.a==0?"#ffffff":c.toHex();b.bc=parseInt(b.bc.substring(1,Infinity),16);if(c=this.urlencode(dojo.style(a,"backgroundImage"))){b.bi={url:c,rp:dojo.style(a,"backgroundRepeat"),pos:escape(dojo.style(a,"backgroundPosition"))};if(!b.bi.pos){c=dojo.style(a,"backgroundPositionX");d=dojo.style(a,"backgroundPositionY");b.bi.pos=escape((c=="left"?"0%":c=="right"?"100%":c)+
" "+(d=="top"?"0%":d=="bottom"?"100%":d))}}return dojo.mixin(b,this.getTextStyle(a))},getTempNodeStyle:function(a,b,c){if(c){c=dojo.place("<"+a.tagName+"><span>"+a.innerHTML+"</span></"+a.tagName+">",a.parentNode);var d=c.firstChild;dojo.addClass(d,a.className);dojo.addClass(c,b);a=this.getStyle(d)}else{c=dojo.place("<"+a.tagName+">"+a.innerHTML+"</"+a.tagName+">",a.parentNode);dojo.addClass(c,a.className);dojo.addClass(c,b);c.id=a.id;a=this.getStyle(c)}dojo.destroy(c);return a}})}
if(!dojo._hasResource["dojox.editor.plugins.UploadImage"]){dojo._hasResource["dojox.editor.plugins.UploadImage"]=true;dojo.provide("dojox.editor.plugins.UploadImage");dojo.experimental("dojox.editor.plugins.UploadImage");dojo.declare("dojox.editor.plugins.UploadImage",dijit._editor._Plugin,{tempImageUrl:"",iconClassPrefix:"editorIcon",useDefaultCommand:false,uploadUrl:"",button:null,label:"Upload",setToolbar:function(a){this.button.destroy();this.createFileInput();a.addChild(this.button)},_initButton:function(){this.command=
"uploadImage";this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",arguments);delete this.command},createFileInput:function(){var a=dojo.create("span",{innerHTML:"."},document.body);dojo.style(a,{width:"40px",height:"20px",paddingLeft:"8px",paddingRight:"8px"});this.button=new dojox.form.FileUploader({isDebug:true,uploadUrl:this.uploadUrl,uploadOnChange:true,selectMultipleFiles:false,baseClass:"dojoxEditorUploadNorm",hoverClass:"dojoxEditorUploadHover",activeClass:"dojoxEditorUploadActive",
disabledClass:"dojoxEditorUploadDisabled"},a);this.connect(this.button,"onChange","insertTempImage");this.connect(this.button,"onComplete","onComplete")},onComplete:function(a){a=a[0];var b=dojo.withGlobal(this.editor.window,"byId",dojo,[this.currentImageId]),c;c=this.downloadPath?this.downloadPath+a.name:a.file;b.src=c;dojo.attr(b,"_djrealurl",c);if(a.width){b.width=a.width;b.height=a.height}},insertTempImage:function(){this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",
'<img id="'+this.currentImageId+'" src="'+this.tempImageUrl+'" width="32" height="32"/>')}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin)switch(a.args.name){case "uploadImage":a.plugin=new dojox.editor.plugins.UploadImage({url:a.args.url})}})}
if(!dojo._hasResource["dojox.form.CheckedMultiSelect"]){dojo._hasResource["dojox.form.CheckedMultiSelect"]=true;dojo.provide("dojox.form.CheckedMultiSelect");dojo.declare("dojox.form._CheckedMultiSelectItem",[dijit._Widget,dijit._Templated],{widgetsInTemplate:true,templateString:dojo.cache("dojox.form","resources/_CheckedMultiSelectItem.html",'<div class="dijitReset ${baseClass}"\r\n\t><input class="${baseClass}Box" dojoType="dijit.form.CheckBox" dojoAttachPoint="checkBox" \r\n\t\tdojoAttachEvent="_onClick:_changeBox" type="${_type.type}" baseClass="${_type.baseClass}"\r\n\t/><div class="dijitInline ${baseClass}Label" dojoAttachPoint="labelNode" dojoAttachEvent="onclick:_onClick"></div\r\n></div>\r\n'),
baseClass:"dojoxMultiSelectItem",option:null,parent:null,disabled:false,readOnly:false,postMixInProperties:function(){this._type=this.parent.multiple?{type:"checkbox",baseClass:"dijitCheckBox"}:{type:"radio",baseClass:"dijitRadio"};this.disabled=this.option.disabled=this.option.disabled||false;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.labelNode.innerHTML=this.option.label},_changeBox:function(){if(!(this.get("disabled")||this.get("readOnly"))){if(this.parent.multiple)this.option.selected=
this.checkBox.attr("value")&&true;else this.parent.attr("value",this.option.value);this.parent._updateSelection();this.parent.focus()}},_onClick:function(a){this.get("disabled")||this.get("readOnly")?dojo.stopEvent(a):this.checkBox._onClick(a)},_updateBox:function(){this.checkBox.attr("value",this.option.selected)},_setDisabledAttr:function(a){this.disabled=a||this.option.disabled;this.checkBox.attr("disabled",this.disabled);dojo.toggleClass(this.domNode,"dojoxMultiSelectDisabled",this.disabled)},
_setReadOnlyAttr:function(a){this.checkBox.attr("readOnly",a);this.readOnly=a}});dojo.declare("dojox.form.CheckedMultiSelect",dijit.form._FormSelectWidget,{templateString:dojo.cache("dojox.form","resources/CheckedMultiSelect.html",'<div class="dijit dijitReset dijitInline" dojoAttachEvent="onmousedown:_onMouseDown,onclick:focus"\r\n\t><select class="${baseClass}Select" multiple="true" dojoAttachPoint="containerNode,focusNode"></select\r\n\t><div dojoAttachPoint="wrapperDiv"></div\r\n></div>\r\n'),
baseClass:"dojoxMultiSelect",_onMouseDown:function(a){dojo.stopEvent(a)},_addOptionItem:function(a){this.wrapperDiv.appendChild((new dojox.form._CheckedMultiSelectItem({option:a,parent:this})).domNode)},_updateSelection:function(){this.inherited(arguments);dojo.forEach(this._getChildren(),function(a){a._updateBox()})},_getChildren:function(){return dojo.map(this.wrapperDiv.childNodes,function(a){return dijit.byNode(a)})},invertSelection:function(){dojo.forEach(this.options,function(a){a.selected=
!a.selected});this._updateSelection()},_setDisabledAttr:function(a){this.inherited(arguments);dojo.forEach(this._getChildren(),function(b){b&&b.attr&&b.attr("disabled",a)})},_setReadOnlyAttr:function(a){"readOnly"in this.attributeMap&&this._attrToDom("readOnly",a);this.readOnly=a;dojo.forEach(this._getChildren(),function(b){b&&b.attr&&b.attr("readOnly",a)})},uninitialize:function(){dojo.forEach(this._getChildren(),function(a){a.destroyRecursive()});this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.dijit"]){dojo._hasResource["dijit.dijit"]=true;dojo.provide("dijit.dijit")}
if(!dojo._hasResource["dojox.html.metrics"]){dojo._hasResource["dojox.html.metrics"]=true;dojo.provide("dojox.html.metrics");(function(){var a=dojox.html.metrics;a.getFontMeasurements=function(){var f={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};if(dojo.isIE)dojo.doc.documentElement.style.fontSize="100%";var g=dojo.doc.createElement("div"),h=g.style;h.position="absolute";h.left="-100px";h.top="0";h.width="30px";h.height="1000em";
h.borderWidth="0";h.margin="0";h.padding="0";h.outline="0";h.lineHeight="1";h.overflow="hidden";dojo.body().appendChild(g);for(var i in f){h.fontSize=i;f[i]=Math.round(g.offsetHeight*12/16)*16/12/1E3}dojo.body().removeChild(g);return f};var b=null;a.getCachedFontMeasurements=function(f){if(f||!b)b=a.getFontMeasurements();return b};var c=null,d={};a.getTextBox=function(f,g,h){var i,j;if(c)i=c;else{i=c=dojo.doc.createElement("div");var k=dojo.doc.createElement("div");k.appendChild(i);j=k.style;j.overflow=
"scroll";j.position="absolute";j.left="0px";j.top="-10000px";j.width="1px";j.height="1px";j.visibility="hidden";j.borderWidth="0";j.margin="0";j.padding="0";j.outline="0";dojo.body().appendChild(k)}i.className="";j=i.style;j.borderWidth="0";j.margin="0";j.padding="0";j.outline="0";if(arguments.length>1&&g)for(var l in g)l in d||(j[l]=g[l]);if(arguments.length>2&&h)i.className=h;i.innerHTML=f;j=dojo.position(i);j.w=i.parentNode.scrollWidth;return j};var e={w:16,h:16};a.getScrollbar=function(){return{w:e.w,
h:e.h}};a._fontResizeNode=null;a.initOnFontResize=function(){var f=a._fontResizeNode=dojo.doc.createElement("iframe"),g=f.style;g.position="absolute";g.width="5em";g.height="10em";g.top="-10000px";if(dojo.isIE)f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete")f.onresize=f.contentWindow.parent[dojox._scopeName].html.metrics._fontresize};else f.onload=function(){f.contentWindow.onresize=f.contentWindow.parent[dojox._scopeName].html.metrics._fontresize};f.setAttribute("src",
"javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'");dojo.body().appendChild(f);a.initOnFontResize=function(){}};a.onFontResize=function(){};a._fontresize=function(){a.onFontResize()};dojo.addOnUnload(function(){var f=a._fontResizeNode;if(f){if(dojo.isIE&&f.onresize)f.onresize=null;else if(f.contentWindow&&f.contentWindow.onresize)f.contentWindow.onresize=null;a._fontResizeNode=null}});dojo.addOnLoad(function(){try{var f=
dojo.doc.createElement("div");f.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";dojo.body().appendChild(f);e.w=f.offsetWidth-f.clientWidth;e.h=f.offsetHeight-f.clientHeight;dojo.body().removeChild(f);delete f}catch(g){}"fontSizeWatch"in dojo.config&&dojo.config.fontSizeWatch&&a.initOnFontResize()})})()}
if(!dojo._hasResource["dojox.grid.util"]){dojo._hasResource["dojox.grid.util"]=true;dojo.provide("dojox.grid.util");(function(){var a=dojox.grid.util;a.na="...";a.rowIndexTag="gridRowIndex";a.gridViewTag="gridView";a.fire=function(b,c,d){var e=b&&c&&b[c];return e&&(d?e.apply(b,d):b[c]())};a.setStyleHeightPx=function(b,c){if(c>=0){var d=b.style,e=c+"px";if(b&&d.height!=e)d.height=e}};a.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"];a.keyEvents=["keyup",
"keydown","keypress"];a.funnelEvents=function(b,c,d,e){e=e?e:a.mouseEvents.concat(a.keyEvents);for(var f=0,g=e.length;f<g;f++)c.connect(b,"on"+e[f],d)};a.removeNode=function(b){(b=dojo.byId(b))&&b.parentNode&&b.parentNode.removeChild(b);return b};a.arrayCompare=function(b,c){for(var d=0,e=b.length;d<e;d++)if(b[d]!=c[d])return false;return b.length==c.length};a.arrayInsert=function(b,c,d){if(b.length<=c)b[c]=d;else b.splice(c,0,d)};a.arrayRemove=function(b,c){b.splice(c,1)};a.arraySwap=function(b,
c,d){var e=b[c];b[c]=b[d];b[d]=e}})()}
if(!dojo._hasResource["dojox.grid._Scroller"]){dojo._hasResource["dojox.grid._Scroller"]=true;dojo.provide("dojox.grid._Scroller");(function(){var a=function(c){if(c){for(var d=dijit.registry.filter(function(g){return g.domNode&&dojo.isDescendant(g.domNode,c,true)}),e=0,f;f=d[e];e++)f.destroy();delete d}},b=function(c,d){for(var e=[],f=0,g;g=c.childNodes[f];){f++;var h=dojo.byId(g);(h&&h.tagName?h.tagName.toLowerCase():"")==d&&e.push(g)}return e};dojo.declare("dojox.grid._Scroller",null,{constructor:function(c){this.setContentNodes(c);
this.pageHeights=[];this.pageNodes=[];this.stack=[]},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(c,d,e){switch(arguments.length){case 3:this.rowsPerPage=e;case 2:this.keepRows=d;case 1:this.rowCount=c}this.defaultPageHeight=this.defaultRowHeight*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);
this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=dojo.hitch(this,"onscroll")}},_getPageCount:function(c,d){return c?Math.ceil(c/d)||1:0},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode},setKeepInfo:function(c){this.keepRows=c;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2)},setContentNodes:function(c){this.colCount=
(this.contentNodes=c)?this.contentNodes.length:0;this.pageNodes=[];for(c=0;c<this.colCount;c++)this.pageNodes[c]=[]},getDefaultNodes:function(){return this.pageNodes[0]||[]},invalidate:function(){this._invalidating=true;this.invalidateNodes();this.pageHeights=[];this.height=this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0;this.resize();this._invalidating=false},updateRowCount:function(c){this.invalidateNodes();this.rowCount=c;c=this.pageCount;if(c===0)this.height=
1;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<c)for(c-=1;c>=this.pageCount;c--){this.height-=this.getPageHeight(c);delete this.pageHeights[c]}else if(this.pageCount>c)this.height+=this.defaultPageHeight*(this.pageCount-c-1)+this.calcLastPageHeight();this.resize()},pageExists:function(c){return Boolean(this.getDefaultPageNode(c))},measurePage:function(c){if(this.grid.rowHeight)return((c+1)*this.rowsPerPage>this.rowCount?this.rowCount-c*this.rowsPerPage:this.rowsPerPage)*
(this.grid.rowHeight+1);return(c=this.getDefaultPageNode(c))&&c.innerHTML?c.offsetHeight:undefined},positionPage:function(c,d){for(var e=0;e<this.colCount;e++)this.pageNodes[e][c].style.top=d+"px"},repositionPages:function(c){for(var d=this.getDefaultNodes(),e=0,f=0;f<this.stack.length;f++)e=Math.max(this.stack[f],e);var g=(f=d[c])?this.getPageNodePosition(f)+this.getPageHeight(c):0;for(c+=1;c<=e;c++){if(f=d[c]){if(this.getPageNodePosition(f)==g)break;this.positionPage(c,g)}g+=this.getPageHeight(c)}},
installPage:function(c){for(var d=0;d<this.colCount;d++)this.contentNodes[d].appendChild(this.pageNodes[d][c])},preparePage:function(c,d){for(var e=d?this.popPage():null,f=0;f<this.colCount;f++){var g=this.pageNodes[f],h=e===null?this.createPageNode():this.invalidatePageNode(e,g);h.pageIndex=c;g[c]=h}},renderPage:function(c){var d=[],e;for(e=0;e<this.colCount;e++)d[e]=this.pageNodes[e][c];e=0;for(c*=this.rowsPerPage;e<this.rowsPerPage&&c<this.rowCount;e++,c++)this.renderRow(c,d)},removePage:function(c){var d=
0;for(c*=this.rowsPerPage;d<this.rowsPerPage;d++,c++)this.removeRow(c)},destroyPage:function(c){for(var d=0;d<this.colCount;d++){var e=this.invalidatePageNode(c,this.pageNodes[d]);e&&dojo.destroy(e)}},pacify:function(){},pacifying:false,pacifyTicks:200,setPacifying:function(c){if(this.pacifying!=c){this.pacifying=c;this.pacify(this.pacifying)}},startPacify:function(){this.startPacifyTicks=(new Date).getTime()},doPacify:function(){var c=(new Date).getTime()-this.startPacifyTicks>this.pacifyTicks;this.setPacifying(true);
this.startPacify();return c},endPacify:function(){this.setPacifying(false)},resize:function(){if(this.scrollboxNode)this.windowHeight=this.scrollboxNode.clientHeight;for(var c=0;c<this.colCount;c++)dojox.grid.util.setStyleHeightPx(this.contentNodes[c],Math.max(1,this.height));c=!this._invalidating;if(!c){var d=this.grid.attr("autoHeight");if(typeof d=="number"&&d<=Math.min(this.rowsPerPage,this.rowCount))c=true}c&&this.needPage(this.page,this.pageTop);c=this.page<this.pageCount-1?this.rowsPerPage:
this.rowCount%this.rowsPerPage||this.rowsPerPage;d=this.getPageHeight(this.page);this.averageRowHeight=d>0&&c>0?d/c:0},calcLastPageHeight:function(){if(!this.pageCount)return 0;var c=(this.rowCount%this.rowsPerPage||this.rowsPerPage)*this.defaultRowHeight;return this.pageHeights[this.pageCount-1]=c},updateContentHeight:function(c){this.height+=c;this.resize()},updatePageHeight:function(c,d){if(this.pageExists(c)){var e=this.getPageHeight(c),f=this.measurePage(c);if(f===undefined)f=e;this.pageHeights[c]=
f;if(e!=f){this.updateContentHeight(f-e);e=this.grid.attr("autoHeight");typeof e=="number"&&e>this.rowCount||e===true&&!d?this.grid.sizeChange():this.repositionPages(c)}return f}return 0},rowHeightChanged:function(c){this.updatePageHeight(Math.floor(c/this.rowsPerPage),false)},invalidateNodes:function(){for(;this.stack.length;)this.destroyPage(this.popPage())},createPageNode:function(){var c=document.createElement("div");dojo.attr(c,"role","presentation");c.style.position="absolute";c.style[dojo._isBodyLtr()?
"left":"right"]="0";return c},getPageHeight:function(c){c=this.pageHeights[c];return c!==undefined?c:this.defaultPageHeight},pushPage:function(c){return this.stack.push(c)},popPage:function(){return this.stack.shift()},findPage:function(c){for(var d=0,e=0,f=0;d<this.pageCount;d++,e+=f){f=this.getPageHeight(d);if(e+f>=c)break}this.page=d;this.pageTop=e},buildPage:function(c,d,e){this.preparePage(c,d);this.positionPage(c,e);this.installPage(c);this.renderPage(c);this.pushPage(c)},needPage:function(c,
d){var e=this.getPageHeight(c);if(this.pageExists(c))this.positionPage(c,d);else{this.buildPage(c,this.keepPages&&this.stack.length>=this.keepPages,d);e=this.updatePageHeight(c,true)}return e},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(c){this.grid.scrollTop=c;if(this.colCount){this.startPacify();this.findPage(c);for(var d=this.height,e=this.getScrollBottom(c),f=this.page,g=this.pageTop;f<this.pageCount&&(e<0||g<e);f++)g+=this.needPage(f,g);this.firstVisibleRow=
this.getFirstVisibleRow(this.page,this.pageTop,c);this.lastVisibleRow=this.getLastVisibleRow(f-1,g,e);d!=this.height&&this.repositionPages(f-1);this.endPacify()}},getScrollBottom:function(c){return this.windowHeight>=0?c+this.windowHeight:-1},processNodeEvent:function(c,d){for(var e=c.target;e&&e!=d&&e.parentNode&&e.parentNode.parentNode!=d;)e=e.parentNode;if(!e||!e.parentNode||e.parentNode.parentNode!=d)return false;c.topRowIndex=e.parentNode.pageIndex*this.rowsPerPage;var f=c.topRowIndex,g;a:{g=
0;for(var h,i=e.parentNode;h=i.childNodes[g++];)if(h==e){g-=1;break a}g=-1}c.rowIndex=f+g;c.rowTarget=e;return true},processEvent:function(c){return this.processNodeEvent(c,this.contentNode)},renderRow:function(){},removeRow:function(){},getDefaultPageNode:function(c){return this.getDefaultNodes()[c]},positionPageNode:function(){},getPageNodePosition:function(c){return c.offsetTop},invalidatePageNode:function(c,d){var e=d[c];if(e){delete d[c];this.removePage(c,e);a(e);e.innerHTML=""}return e},getPageRow:function(c){return c*
this.rowsPerPage},getLastPageRow:function(c){return Math.min(this.rowCount,this.getPageRow(c+1))-1},getFirstVisibleRow:function(c,d,e){if(!this.pageExists(c))return 0;var f=this.getPageRow(c),g=this.getDefaultNodes();c=b(g[c],"div");g=0;for(var h=c.length;g<h&&d<e;g++,f++)d+=c[g].offsetHeight;return f?f-1:f},getLastVisibleRow:function(c,d,e){if(!this.pageExists(c))return 0;var f=this.getDefaultNodes(),g=this.getLastPageRow(c);c=b(f[c],"div");for(f=c.length-1;f>=0&&d>e;f--,g--)d-=c[f].offsetHeight;
return g+1},findTopRow:function(c){var d=this.getDefaultNodes();d=b(d[this.page],"div");for(var e=0,f=d.length,g=this.pageTop,h;e<f;e++){h=d[e].offsetHeight;g+=h;if(g>=c){this.offset=h-(g-c);return e+this.page*this.rowsPerPage}}return-1},findScrollTop:function(c){var d=Math.floor(c/this.rowsPerPage),e=0,f;for(f=0;f<d;f++)e+=this.getPageHeight(f);this.pageTop=e;this.needPage(d,this.pageTop);f=this.getDefaultNodes();var g=b(f[d],"div");d=c-this.rowsPerPage*d;f=0;for(c=g.length;f<c&&f<d;f++)e+=g[f].offsetHeight;
return e},dummy:0})})()}
if(!dojo._hasResource["dojox.grid.cells._base"]){dojo._hasResource["dojox.grid.cells._base"]=true;dojo.provide("dojox.grid.cells._base");dojo.declare("dojox.grid._DeferredTextWidget",dijit._Widget,{deferred:null,_destroyOnRemove:true,postCreate:function(){this.deferred&&this.deferred.addBoth(dojo.hitch(this,function(a){if(this.domNode)this.domNode.innerHTML=a}))}});(function(){var a=function(){setTimeout(dojo.hitch.apply(dojo,arguments),0)},b=dojox.grid.cells;dojo.declare("dojox.grid.cells._Base",null,
{styles:"",classes:"",editable:false,alwaysEditing:false,formatter:null,defaultValue:"...",value:null,hidden:false,noresize:false,draggable:true,_valueProp:"value",_formatPending:false,constructor:function(c){this._props=c||{};dojo.mixin(this,c);if(this.draggable===undefined)this.draggable=true},_defaultFormat:function(c,d){var e=this.grid.formatterScope||this,f=this.formatter;if(f&&e&&typeof f=="string")f=this.formatter=e[f];e=c!=this.defaultValue&&f?f.apply(e,d):c;if(typeof e=="undefined")return this.defaultValue;
if(e&&e.addBoth)e=new dojox.grid._DeferredTextWidget({deferred:e},dojo.create("span",{innerHTML:this.defaultValue}));if(e&&e.declaredClass&&e.startup)return"<div class='dojoxGridStubNode' linkWidget='"+e.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>";return e},format:function(c,d){var e=this.grid.edit.info,f=this.get?this.get(c,d):this.value||this.defaultValue;f=f&&f.replace&&this.grid.escapeHTMLInData?f.replace(/&/g,"&amp;").replace(/</g,"&lt;"):f;return this.editable&&(this.alwaysEditing||
e.rowIndex==c&&e.cell==this)?this.formatEditing(f,c):this._defaultFormat(f,[f,c,this])},formatEditing:function(){},getNode:function(c){return this.view.getCellNode(c,this.index)},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index)},getEditNode:function(c){return(this.getNode(c)||0).firstChild||0},canResize:function(){var c=this.unitWidth;return c&&c!=="auto"},isFlex:function(){var c=this.unitWidth;return c&&dojo.isString(c)&&(c=="auto"||c.slice(-1)=="%")},applyEdit:function(c,
d){this.grid.edit.applyCellEdit(c,this,d)},cancelEdit:function(c){this.grid.doCancelEdit(c)},_onEditBlur:function(c){this.grid.edit.isEditCell(c,this.index)&&this.grid.edit.apply()},registerOnBlur:function(c,d){this.commitOnBlur&&dojo.connect(c,"onblur",function(){setTimeout(dojo.hitch(this,"_onEditBlur",d),250)})},needFormatNode:function(c,d){this._formatPending=true;a(this,"_formatNode",c,d)},cancelFormatNode:function(){this._formatPending=false},_formatNode:function(c,d){if(this._formatPending){this._formatPending=
false;dojo.setSelectable(this.grid.domNode,true);this.formatNode(this.getEditNode(d),c,d)}},formatNode:function(c,d,e){dojo.isIE?a(this,"focus",e,c):this.focus(e,c)},dispatchEvent:function(c,d){if(c in this)return this[c](d)},getValue:function(c){return this.getEditNode(c)[this._valueProp]},setValue:function(c,d){var e=this.getEditNode(c);if(e)e[this._valueProp]=d},focus:function(c,d){var e=d||this.getEditNode(c);try{dojox.grid.util.fire(e,"focus");dojox.grid.util.fire(e,"select")}catch(f){}},save:function(c){this.value=
this.value||this.getValue(c)},restore:function(c){this.setValue(c,this.value)},_finish:function(){dojo.setSelectable(this.grid.domNode,false);this.cancelFormatNode()},apply:function(c){this.applyEdit(this.getValue(c),c);this._finish(c)},cancel:function(c){this.cancelEdit(c);this._finish(c)}});b._Base.markupFactory=function(c,d){var e=dojo,f=e.trim(e.attr(c,"formatter")||"");if(f)d.formatter=dojo.getObject(f)||f;if(f=e.trim(e.attr(c,"get")||""))d.get=dojo.getObject(f);f=function(g,h,i){var j=e.trim(e.attr(c,
g)||"");if(j)h[i||g]=j.toLowerCase()!="false"};f("sortDesc",d);f("editable",d);f("alwaysEditing",d);f("noresize",d);f("draggable",d);if(f=e.trim(e.attr(c,"loadingText")||e.attr(c,"defaultValue")||""))d.defaultValue=f;f=function(g,h,i){var j=e.trim(e.attr(c,g)||"")||undefined;if(j)h[i||g]=j};f("styles",d);f("headerStyles",d);f("cellStyles",d);f("classes",d);f("headerClasses",d);f("cellClasses",d)};dojo.declare("dojox.grid.cells.Cell",b._Base,{constructor:function(){this.keyFilter=this.keyFilter},keyFilter:null,
formatEditing:function(c,d){this.needFormatNode(c,d);return'<input class="dojoxGridInput" type="text" value="'+c+'">'},formatNode:function(c,d,e){this.inherited(arguments);this.registerOnBlur(c,e)},doKey:function(c){this.keyFilter&&String.fromCharCode(c.charCode).search(this.keyFilter)==-1&&dojo.stopEvent(c)},_finish:function(c){this.inherited(arguments);var d=this.getEditNode(c);try{dojox.grid.util.fire(d,"blur")}catch(e){}}});b.Cell.markupFactory=function(c,d){b._Base.markupFactory(c,d);var e=dojo;
if(e=e.trim(e.attr(c,"keyFilter")||""))d.keyFilter=RegExp(e)};dojo.declare("dojox.grid.cells.RowIndex",b.Cell,{name:"Row",postscript:function(){this.editable=false},get:function(c){return c+1}});b.RowIndex.markupFactory=function(c,d){b.Cell.markupFactory(c,d)};dojo.declare("dojox.grid.cells.Select",b.Cell,{options:null,values:null,returnIndex:-1,constructor:function(){this.values=this.values||this.options},formatEditing:function(c,d){this.needFormatNode(c,d);for(var e=['<select class="dojoxGridSelect">'],
f=0,g,h;(g=this.options[f])!==undefined&&(h=this.values[f])!==undefined;f++)e.push("<option",c==h?" selected":"",' value="'+h+'"',">",g,"</option>");e.push("</select>");return e.join("")},getValue:function(c){var d=this.getEditNode(c);if(d){c=d.selectedIndex;d=d.options[c];return this.returnIndex>-1?c:d.value||d.innerHTML}}});b.Select.markupFactory=function(c,d){b.Cell.markupFactory(c,d);var e=dojo,f=e.trim(e.attr(c,"options")||"");if(f){var g=f.split(",");if(g[0]!=f)d.options=g}if(e=e.trim(e.attr(c,
"values")||"")){f=e.split(",");if(f[0]!=e)d.values=f}};dojo.declare("dojox.grid.cells.AlwaysEdit",b.Cell,{alwaysEditing:true,_formatNode:function(c,d){this.formatNode(this.getEditNode(d),c,d)},applyStaticValue:function(c){var d=this.grid.edit;d.applyCellEdit(this.getValue(c),this,c);d.start(this,c,true)}});b.AlwaysEdit.markupFactory=function(c,d){b.Cell.markupFactory(c,d)};dojo.declare("dojox.grid.cells.Bool",b.AlwaysEdit,{_valueProp:"checked",formatEditing:function(c){return'<input class="dojoxGridInput" type="checkbox"'+
(c?' checked="checked"':"")+' style="width: auto" />'},doclick:function(c){c.target.tagName=="INPUT"&&this.applyStaticValue(c.rowIndex)}});b.Bool.markupFactory=function(c,d){b.AlwaysEdit.markupFactory(c,d)}})()}if(!dojo._hasResource["dojox.grid.cells"]){dojo._hasResource["dojox.grid.cells"]=true;dojo.provide("dojox.grid.cells")}
if(!dojo._hasResource["dojox.grid._Builder"]){dojo._hasResource["dojox.grid._Builder"]=true;dojo.provide("dojox.grid._Builder");(function(){var a=dojox.grid,b=function(g){for(;g&&g.tagName!="TABLE";g=g.parentNode);return g},c=function(g,h){for(var i=g;i&&h(i);i=i.parentNode);return i},d=function(g){var h=g.toUpperCase();return function(i){return i.tagName!=h}},e=dojox.grid.util.rowIndexTag,f=dojox.grid.util.gridViewTag;a._Builder=dojo.extend(function(g){if(g){this.view=g;this.grid=g.grid}},{view:null,
_table:'<table class="dojoxGridRowTable" border="0" cellspacing="0" cellpadding="0" role="presentation"',getTableArray:function(){var g=[this._table];this.view.viewWidth&&g.push([' style="width:',this.view.viewWidth,';"'].join(""));g.push(">");return g},generateCellMarkup:function(g,h,i,j){var k=[],l;if(j){l=g.index!=g.grid.getSortIndex()?"":g.grid.sortInfo>0?'aria-sort="ascending"':'aria-sort="descending"';if(!g.id)g.id=this.grid.id+"Hdr"+g.index;l=['<th tabIndex="-1" aria-readonly="true" role="columnheader"',
l,'id="',g.id,'"']}else l=['<td tabIndex="-1" role="gridcell"',this.grid.editable&&!g.editable?'aria-readonly="true"':""];g.colSpan&&l.push(' colspan="',g.colSpan,'"');g.rowSpan&&l.push(' rowspan="',g.rowSpan,'"');l.push(' class="dojoxGridCell ');g.classes&&l.push(g.classes," ");i&&l.push(i," ");k.push(l.join(""));k.push("");l=['" idx="',g.index,'" style="'];if(h&&h[h.length-1]!=";")h+=";";l.push(g.styles,h||"",g.hidden?"display:none;":"");g.unitWidth&&l.push("width:",g.unitWidth,";");k.push(l.join(""));
k.push("");l=['"'];g.attrs&&l.push(" ",g.attrs);l.push(">");k.push(l.join(""));k.push("");k.push(j?"</th>":"</td>");return k},isCellNode:function(g){return Boolean(g&&g!=dojo.doc&&dojo.attr(g,"idx"))},getCellNodeIndex:function(g){return g?Number(dojo.attr(g,"idx")):-1},getCellNode:function(g,h){for(var i=0,j;j=g.firstChild&&((g.firstChild.rows||0)[i]||g.firstChild.childNodes[i]);i++)for(var k=0,l;l=j.cells[k];k++)if(this.getCellNodeIndex(l)==h)return l;return null},findCellTarget:function(g,h){for(var i=
g;i&&(!this.isCellNode(i)||i.offsetParent&&f in i.offsetParent.parentNode&&i.offsetParent.parentNode[f]!=this.view.id)&&i!=h;)i=i.parentNode;return i!=h?i:null},baseDecorateEvent:function(g){g.dispatch="do"+g.type;g.grid=this.grid;g.sourceView=this.view;g.cellNode=this.findCellTarget(g.target,g.rowNode);g.cellIndex=this.getCellNodeIndex(g.cellNode);g.cell=g.cellIndex>=0?this.grid.getCell(g.cellIndex):null},findTarget:function(g,h){for(var i=g;i&&i!=this.domNode&&(!(h in i)||f in i&&i[f]!=this.view.id);)i=
i.parentNode;return i!=this.domNode?i:null},findRowTarget:function(g){return this.findTarget(g,e)},isIntraNodeEvent:function(g){try{return g.cellNode&&g.relatedTarget&&dojo.isDescendant(g.relatedTarget,g.cellNode)}catch(h){return false}},isIntraRowEvent:function(g){try{var h=g.relatedTarget&&this.findRowTarget(g.relatedTarget);return!h&&g.rowIndex==-1||h&&g.rowIndex==h.gridRowIndex}catch(i){return false}},dispatchEvent:function(g){if(g.dispatch in this)return this[g.dispatch](g);return false},domouseover:function(g){if(g.cellNode&&
g.cellNode!=this.lastOverCellNode){this.lastOverCellNode=g.cellNode;this.grid.onMouseOver(g)}this.grid.onMouseOverRow(g)},domouseout:function(g){if(g.cellNode&&g.cellNode==this.lastOverCellNode&&!this.isIntraNodeEvent(g,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(g);if(!this.isIntraRowEvent(g))this.grid.onMouseOutRow(g)}},domousedown:function(g){if(g.cellNode)this.grid.onMouseDown(g);this.grid.onMouseDownRow(g)}});a._ContentBuilder=dojo.extend(function(g){a._Builder.call(this,
g)},a._Builder.prototype,{update:function(){this.prepareHtml()},prepareHtml:function(){for(var g=this.grid.get,h=this.view.structure.cells,i=0,j;j=h[i];i++)for(var k=0,l;l=j[k];k++){l.get=l.get||l.value==undefined&&g;l.markup=this.generateCellMarkup(l,l.cellStyles,l.cellClasses,false);if(!this.grid.editable&&l.editable)this.grid.editable=true}},generateHtml:function(g,h){var i=this.getTableArray(),j=this.view.structure.cells,k=this.grid.getItem(h);dojox.grid.util.fire(this.view,"onBeforeRow",[h,j]);
for(var l=0,n;n=j[l];l++)if(!(n.hidden||n.header)){i.push(!n.invisible?"<tr>":'<tr class="dojoxGridInvisible">');for(var m=0,o,q,p,r;o=n[m];m++){q=o.markup;p=o.customClasses=[];r=o.customStyles=[];q[5]=o.format(h,k);q[1]=p.join(" ");q[3]=r.join(";");i.push.apply(i,q)}i.push("</tr>")}i.push("</table>");return i.join("")},decorateEvent:function(g){g.rowNode=this.findRowTarget(g.target);if(!g.rowNode)return false;g.rowIndex=g.rowNode[e];this.baseDecorateEvent(g);g.cell=this.grid.getCell(g.cellIndex);
return true}});a._HeaderBuilder=dojo.extend(function(g){this.moveable=null;a._Builder.call(this,g)},a._Builder.prototype,{_skipBogusClicks:false,overResizeWidth:4,minColWidth:1,update:function(){if(this.tableMap)this.tableMap.mapRows(this.view.structure.cells);else this.tableMap=new a._TableMap(this.view.structure.cells)},generateHtml:function(g,h){var i=this.getTableArray(),j=this.view.structure.cells;dojox.grid.util.fire(this.view,"onBeforeRow",[-1,j]);for(var k=0,l;l=j[k];k++)if(!l.hidden){i.push(!l.invisible?
"<tr>":'<tr class="dojoxGridInvisible">');for(var n=0,m,o;m=l[n];n++){m.customClasses=[];m.customStyles=[];if(this.view.simpleStructure){if(m.draggable)if(m.headerClasses){if(m.headerClasses.indexOf("dojoDndItem")==-1)m.headerClasses+=" dojoDndItem"}else m.headerClasses="dojoDndItem";if(m.attrs){if(m.attrs.indexOf("dndType='gridColumn_")==-1)m.attrs+=" dndType='gridColumn_"+this.grid.id+"'"}else m.attrs="dndType='gridColumn_"+this.grid.id+"'"}o=this.generateCellMarkup(m,m.headerStyles,m.headerClasses,
true);o[5]=h!=undefined?h:g(m);o[3]=m.customStyles.join(";");o[1]=m.customClasses.join(" ");i.push(o.join(""))}i.push("</tr>")}i.push("</table>");return i.join("")},getCellX:function(g){var h,i=g.layerX;if(dojo.isMoz){h=c(g.target,d("th"));i-=h&&h.offsetLeft||0;g.sourceView.getScrollbarWidth();if(!dojo._isBodyLtr()){table=c(h,d("table"));i-=table&&table.offsetLeft||0}}h=c(g.target,function(){if(!h||h==g.cellNode)return false;i+=h.offsetLeft<0?0:h.offsetLeft;return true});return i},decorateEvent:function(g){this.baseDecorateEvent(g);
g.rowIndex=-1;g.cellX=this.getCellX(g);return true},prepareResize:function(g,h){do{var i=g.cellNode.cellIndex>=0?g.cellNode.cellIndex:dojo.indexOf(g.cellNode.parentNode.cells,g.cellNode);g.cellNode=i?g.cellNode.parentNode.cells[i+h]:null;g.cellIndex=g.cellNode?this.getCellNodeIndex(g.cellNode):-1}while(g.cellNode&&g.cellNode.style.display=="none");return Boolean(g.cellNode)},canResize:function(g){if(!g.cellNode||g.cellNode.colSpan>1)return false;g=this.grid.getCell(g.cellIndex);return!g.noresize&&
g.canResize()},overLeftResizeArea:function(g){if(dojo.hasClass(dojo.body(),"dojoDndMove"))return false;if(dojo.isIE){var h=g.target;if(dojo.hasClass(h,"dojoxGridArrowButtonNode")||dojo.hasClass(h,"dojoxGridArrowButtonChar"))return false}if(dojo._isBodyLtr())return g.cellIndex>0&&g.cellX<this.overResizeWidth&&this.prepareResize(g,-1);return g.cellNode&&g.cellX<this.overResizeWidth},overRightResizeArea:function(g){if(dojo.hasClass(dojo.body(),"dojoDndMove"))return false;if(dojo.isIE){var h=g.target;
if(dojo.hasClass(h,"dojoxGridArrowButtonNode")||dojo.hasClass(h,"dojoxGridArrowButtonChar"))return false}if(dojo._isBodyLtr())return g.cellNode&&g.cellX>=g.cellNode.offsetWidth-this.overResizeWidth;return g.cellIndex>0&&g.cellX>=g.cellNode.offsetWidth-this.overResizeWidth&&this.prepareResize(g,-1)},domousemove:function(g){if(!this.moveable){var h=this.overRightResizeArea(g)?"dojoxGridColResize":this.overLeftResizeArea(g)?"dojoxGridColResize":"";if(h&&!this.canResize(g))h="dojoxGridColNoResize";dojo.toggleClass(g.sourceView.headerNode,
"dojoxGridColNoResize",h=="dojoxGridColNoResize");dojo.toggleClass(g.sourceView.headerNode,"dojoxGridColResize",h=="dojoxGridColResize");if(dojo.isIE)g.sourceView.headerNode.scrollLeft=g.sourceView.headerNode.scrollLeft;h&&dojo.stopEvent(g)}},domousedown:function(g){if(!this.moveable)if((this.overRightResizeArea(g)||this.overLeftResizeArea(g))&&this.canResize(g))this.beginColumnResize(g);else{this.grid.onMouseDown(g);this.grid.onMouseOverRow(g)}},doclick:function(g){if(this._skipBogusClicks){dojo.stopEvent(g);
return true}return false},colResizeSetup:function(g,h){var i=dojo.contentBox(g.sourceView.headerNode);if(h){this.lineDiv=document.createElement("div");var j=(dojo.position||dojo._abs)(g.sourceView.headerNode,true),k=dojo.contentBox(g.sourceView.domNode),l=g.clientX;if(!dojo._isBodyLtr()&&dojo.isIE<8)l-=dojox.html.metrics.getScrollbar().w;dojo.style(this.lineDiv,{top:j.y+"px",left:l+"px",height:k.h+i.h+"px"});dojo.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=l;dojo.body().appendChild(this.lineDiv)}j=
[];k=this.tableMap.findOverlappingNodes(g.cellNode);l=0;for(var n;n=k[l];l++)j.push({node:n,index:this.getCellNodeIndex(n),width:n.offsetWidth});k=g.sourceView;n=dojo._isBodyLtr()?1:-1;var m=g.grid.views.views;l=[];for(var o=k.idx+n,q;q=m[o];o+=n)l.push({node:q.headerNode,left:window.parseInt(q.headerNode.style.left)});n=k.headerContentNode.firstChild;return{scrollLeft:g.sourceView.headerNode.scrollLeft,view:k,node:g.cellNode,index:g.cellIndex,w:dojo.contentBox(g.cellNode).w,vw:i.w,table:n,tw:dojo.contentBox(n).w,
spanners:j,followers:l}},beginColumnResize:function(g){this.moverDiv=document.createElement("div");dojo.style(this.moverDiv,{position:"absolute",left:0});dojo.body().appendChild(this.moverDiv);dojo.addClass(this.grid.domNode,"dojoxGridColumnResizing");var h=this.moveable=new dojo.dnd.Moveable(this.moverDiv),i=this.colResizeSetup(g,true);h.onMove=dojo.hitch(this,"doResizeColumn",i);dojo.connect(h,"onMoveStop",dojo.hitch(this,function(){this.endResizeColumn(i);i.node.releaseCapture&&i.node.releaseCapture();
this.moveable.destroy();delete this.moveable;this.moveable=null;dojo.removeClass(this.grid.domNode,"dojoxGridColumnResizing")}));g.cellNode.setCapture&&g.cellNode.setCapture();h.onMouseDown(g)},doResizeColumn:function(g,h,i){var j=i.l;j={deltaX:j,w:g.w+(dojo._isBodyLtr()?j:-j),vw:g.vw+j,tw:g.tw+j};this.dragRecord={inDrag:g,mover:h,leftTop:i};if(j.w>=this.minColWidth)h?dojo.style(this.lineDiv,"left",this.lineDiv._origLeft+j.deltaX+"px"):this.doResizeNow(g,j)},endResizeColumn:function(g){if(this.dragRecord){var h=
this.dragRecord.leftTop;h=dojo._isBodyLtr()?h.l:-h.l;h+=Math.max(g.w+h,this.minColWidth)-(g.w+h);if(dojo.isWebKit&&g.spanners.length)h+=dojo._getPadBorderExtents(g.spanners[0].node).w;this.doResizeNow(g,{deltaX:h,w:g.w+h,vw:g.vw+h,tw:g.tw+h})}dojo.destroy(this.lineDiv);dojo.destroy(this.moverDiv);dojo.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=true;g.view.update();this._skipBogusClicks=false;this.grid.onResizeColumn(g.index)},doResizeNow:function(g,h){g.view.convertColPctToFixed();
if(g.view.flexCells&&!g.view.testFlexCells()){var i=b(g.node);if(i)i.style.width=""}var j,k;for(i=0;j=g.spanners[i];i++){k=j.width+h.deltaX;j.node.style.width=k+"px";g.view.setColWidth(j.index,k)}if(dojo._isBodyLtr()||!dojo.isIE)for(i=0;j=g.followers[i];i++){k=j.left+h.deltaX;j.node.style.left=k+"px"}g.node.style.width=h.w+"px";g.view.setColWidth(g.index,h.w);g.view.headerNode.style.width=h.vw+"px";g.view.setColumnsWidth(h.tw);if(!dojo._isBodyLtr())g.view.headerNode.scrollLeft=g.scrollLeft+h.deltaX}});
a._TableMap=dojo.extend(function(g){this.mapRows(g)},{map:null,mapRows:function(g){if(g.length){this.map=[];var h;for(h=0;g[h];h++)this.map[h]=[];for(var i=0;h=g[i];i++)for(var j=0,k=0,l,n;l=h[j];j++){for(;this.map[i][k];)k++;this.map[i][k]={c:j,r:i};n=l.rowSpan||1;l=l.colSpan||1;for(var m=0;m<n;m++)for(var o=0;o<l;o++)this.map[i+m][k+o]=this.map[i][k];k+=l}}},dumpMap:function(){for(var g=0,h,i="";h=this.map[g];g++,i="")for(var j=0,k;k=h[j];j++)i+=k.r+","+k.c+"   "},getMapCoords:function(g,h){for(var i=
0,j;j=this.map[i];i++)for(var k=0,l;l=j[k];k++)if(l.c==h&&l.r==g)return{j:i,i:k};return{j:-1,i:-1}},getNode:function(g,h,i){return(g=g&&g.rows[h])&&g.cells[i]},_findOverlappingNodes:function(g,h,i){var j=[];h=this.getMapCoords(h,i);i=0;for(var k;k=this.map[i];i++)if(i!=h.j)(k=(k=k[h.i])?this.getNode(g,k.r,k.c):null)&&j.push(k);return j},findOverlappingNodes:function(g){return this._findOverlappingNodes(b(g),g.parentNode.rowIndex>=0?g.parentNode.rowIndex:dojo.indexOf(g.parentNode.parentNode.childNodes,
g.parentNode),g.cellIndex>=0?g.cellIndex:dojo.indexOf(g.parentNode.cells,g))}})})()}
if(!dojo._hasResource["dojo.dnd.Container"]){dojo._hasResource["dojo.dnd.Container"]=true;dojo.provide("dojo.dnd.Container");dojo.declare("dojo.dnd.Container",null,{skipForm:false,constructor:function(a,b){this.node=dojo.byId(a);b||(b={});this.creator=b.creator||null;this.skipForm=b.skipForm;this.parent=b.dropParent&&dojo.byId(b.dropParent);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");b&&b._skipStartup||this.startup();this.events=[dojo.connect(this.node,
"onmouseover",this,"onMouseOver"),dojo.connect(this.node,"onmouseout",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",this,"onSelectStart"),dojo.connect(this.node,"onselectstart",this,"onSelectStart")]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){b=b||dojo.global;var c=this.map,d=dojo.dnd._empty,e;for(e in c)e in d||a.call(b,c[e],e,this);return b},clearItems:function(){this.map=
{}},getAllNodes:function(){return dojo.query("> .dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=dojo.dnd.getUniqueId();c=b.getAttribute("dndType");var d=b.getAttribute("dndData");a[b.id]={data:d||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){if(this.parent.firstChild)if(b){if(!c)c=this.parent.firstChild}else{if(c)c=c.nextSibling}else c=
null;if(c)for(b=0;b<a.length;++b){var d=this._normalizedCreator(a[b]);this.setItem(d.node.id,{data:d.data,type:d.type});this.parent.insertBefore(d.node,c)}else for(b=0;b<a.length;++b){d=this._normalizedCreator(a[b]);this.setItem(d.node.id,{data:d.data,type:d.type});this.parent.appendChild(d.node)}return this},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b){a._skipStartup=true;return new dojo.dnd.Container(b,
a)},startup:function(){if(!this.parent){this.parent=this.node;if(this.parent.tagName.toLowerCase()=="table"){var a=this.parent.getElementsByTagName("tbody");if(a&&a.length)this.parent=a[0]}}this.defaultCreator=dojo.dnd._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b;){if(b==this.node)break;try{b=b.parentNode}catch(c){b=null}}if(!b){this._changeState("Container","Over");this.onOverEvent()}b=this._getChildByEvent(a);if(this.current!=b){this.current&&this._removeItemClass(this.current,
"Over");b&&this._addItemClass(b,"Over");this.current=b}},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null}this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){if(!this.skipForm||!dojo.dnd.isFormElement(a))dojo.stopEvent(a)},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var c="dojoDnd"+a,d=a.toLowerCase()+"State";
dojo.removeClass(this.node,c+this[d]);dojo.addClass(this.node,c+b);this[d]=b},_addItemClass:function(a,b){dojo.addClass(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){dojo.removeClass(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if(b==this.parent&&dojo.hasClass(a,"dojoDndItem"))return a;return null},_normalizedCreator:function(a,b){var c=(this.creator||this.defaultCreator).call(this,a,b);if(!dojo.isArray(c.type))c.type=["text"];if(!c.node.id)c.node.id=
dojo.dnd.getUniqueId();dojo.addClass(c.node,"dojoDndItem");return c}});dojo.dnd._createNode=function(a){if(!a)return dojo.dnd._createSpan;return function(b){return dojo.create(a,{innerHTML:b})}};dojo.dnd._createTrTd=function(a){var b=dojo.create("tr");dojo.create("td",{innerHTML:a},b);return b};dojo.dnd._createSpan=function(a){return dojo.create("span",{innerHTML:a})};dojo.dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dojo.dnd._defaultCreator=function(a){a=a.tagName.toLowerCase();var b=
a=="tbody"||a=="thead"?dojo.dnd._createTrTd:dojo.dnd._createNode(dojo.dnd._defaultCreatorNodes[a]);return function(c,d){var e=c&&dojo.isObject(c),f,g;if(e&&c.tagName&&c.nodeType&&c.getAttribute){f=c.getAttribute("dndData")||c.innerHTML;e=(e=c.getAttribute("dndType"))?e.split(/\s*,\s*/):["text"];g=c}else{f=e&&c.data?c.data:c;e=e&&c.type?c.type:["text"];g=(d=="avatar"?dojo.dnd._createSpan:b)(String(f))}if(!g.id)g.id=dojo.dnd.getUniqueId();return{node:g,data:f,type:e}}}}
if(!dojo._hasResource["dojo.dnd.Selector"]){dojo._hasResource["dojo.dnd.Selector"]=true;dojo.provide("dojo.dnd.Selector");dojo.declare("dojo.dnd.Selector",dojo.dnd.Container,{constructor:function(a,b){b||(b={});this.singular=b.singular;this.autoSync=b.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(dojo.connect(this.node,"onmousedown",this,"onMouseDown"),dojo.connect(this.node,"onmouseup",this,"onMouseUp"))},singular:false,getSelectedNodes:function(){var a=
new dojo.NodeList,b=dojo.dnd._empty,c;for(c in this.selection)c in b||a.push(dojo.byId(c));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,b){this._addItemClass(dojo.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=dojo.dnd._empty,b;for(b in this.selection)if(!(b in a)){var c=dojo.byId(b);this.delItem(b);dojo.destroy(c)}this.anchor=null;this.selection={};
return this},forInSelectedItems:function(a,b){b=b||dojo.global;var c=this.selection,d=dojo.dnd._empty,e;for(e in c)e in d||a.call(b,this.getItem(e),e,this)},sync:function(){dojo.dnd.Selector.superclass.sync.call(this);if(this.anchor)if(!this.getItem(this.anchor.id))this.anchor=null;var a=[],b=dojo.dnd._empty,c;for(c in this.selection)c in b||this.getItem(c)||a.push(c);dojo.forEach(a,function(d){delete this.selection[d]},this);return this},insertNodes:function(a,b,c,d){var e=this._normalizedCreator;
this._normalizedCreator=function(f,g){var h=e.call(this,f,g);if(a){if(this.anchor){if(this.anchor!=h.node){this._removeItemClass(h.node,"Anchor");this._addItemClass(h.node,"Selected")}}else{this.anchor=h.node;this._removeItemClass(h.node,"Selected");this._addItemClass(this.anchor,"Anchor")}this.selection[h.node.id]=1}else{this._removeItemClass(h.node,"Selected");this._removeItemClass(h.node,"Anchor")}return h};dojo.dnd.Selector.superclass.insertNodes.call(this,b,c,d);this._normalizedCreator=e;return this},
destroy:function(){dojo.dnd.Selector.superclass.destroy.call(this);this.selection=this.anchor=null},markupFactory:function(a,b){a._skipStartup=true;return new dojo.dnd.Selector(b,a)},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!dojo.isCopyKey(a)&&!a.shiftKey&&this.current.id in this.selection){this.simpleSelection=true;a.button===dojo.mouseButtons.LEFT&&dojo.stopEvent(a)}else{if(!this.singular&&a.shiftKey){dojo.isCopyKey(a)||this._removeSelection();var b=
this.getAllNodes();if(b.length){if(!this.anchor){this.anchor=b[0];this._addItemClass(this.anchor,"Anchor")}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){for(var c=0;c<b.length;++c){var d=b[c];if(d==this.anchor||d==this.current)break}for(++c;c<b.length;++c){d=b[c];if(d==this.anchor||d==this.current)break;this._addItemClass(d,"Selected");this.selection[d.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}}else if(this.singular)if(this.anchor==this.current)dojo.isCopyKey(a)&&
this.selectNone();else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1}else if(dojo.isCopyKey(a))if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor()}else if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id]}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected")}this.anchor=
this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1}else if(!(this.current.id in this.selection)){this.selectNone();this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1}dojo.stopEvent(a)}},onMouseUp:function(){if(this.simpleSelection){this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1}}},onMouseMove:function(){this.simpleSelection=
false},onOverEvent:function(){this.onmousemoveEvent=dojo.connect(this.node,"onmousemove",this,"onMouseMove")},onOutEvent:function(){dojo.disconnect(this.onmousemoveEvent);delete this.onmousemoveEvent},_removeSelection:function(){var a=dojo.dnd._empty,b;for(b in this.selection)if(!(b in a)){var c=dojo.byId(b);c&&this._removeItemClass(c,"Selected")}this.selection={};return this},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null}return this}})}
if(!dojo._hasResource["dojo.dnd.Avatar"]){dojo._hasResource["dojo.dnd.Avatar"]=true;dojo.provide("dojo.dnd.Avatar");dojo.declare("dojo.dnd.Avatar",null,{constructor:function(a){this.manager=a;this.construct()},construct:function(){this.isA11y=dojo.hasClass(dojo.body(),"dijit_a11y");var a=dojo.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),b=this.manager.source,c,d=dojo.create("tbody",null,a),e=dojo.create("tr",null,d),f=dojo.create("td",null,e);this.isA11y&&
dojo.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},f);dojo.create("span",{innerHTML:b.generateText?this._generateText():""},f);var g=Math.min(5,this.manager.nodes.length),h=0;for(dojo.attr(e,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});h<g;++h){if(b.creator)c=b._normalizedCreator(b.getItem(this.manager.nodes[h].id).data,"avatar").node;else{c=this.manager.nodes[h].cloneNode(true);if(c.tagName.toLowerCase()=="tr"){e=dojo.create("table");dojo.create("tbody",null,e).appendChild(c);
c=e}}c.id="";e=dojo.create("tr",null,d);f=dojo.create("td",null,e);f.appendChild(c);dojo.attr(e,{"class":"dojoDndAvatarItem",style:{opacity:(9-h)/10}})}this.node=a},destroy:function(){dojo.destroy(this.node);this.node=false},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");if(this.isA11y){var a=dojo.byId("a11yIcon"),b="+";if(this.manager.canDropFlag&&!this.manager.copy)b="< ";else if(!this.manager.canDropFlag&&!this.manager.copy)b="o";else this.manager.canDropFlag||
(b="x");a.innerHTML=b}dojo.query("tr.dojoDndAvatarHeader td span"+(this.isA11y?" span":""),this.node).forEach(function(c){c.innerHTML=this._generateText()},this)},_generateText:function(){return this.manager.nodes.length.toString()}})}
if(!dojo._hasResource["dojo.dnd.Manager"]){dojo._hasResource["dojo.dnd.Manager"]=true;dojo.provide("dojo.dnd.Manager");dojo.declare("dojo.dnd.Manager",null,{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[]},OFFSET_X:16,OFFSET_Y:16,overSource:function(a){if(this.avatar){this.target=a&&a.targetState!="Disabled"?a:null;this.canDropFlag=Boolean(this.target);this.avatar.update()}dojo.publish("/dnd/source/over",[a])},
outSource:function(a){if(this.avatar){if(this.target==a){this.target=null;this.canDropFlag=false;this.avatar.update();dojo.publish("/dnd/source/over",[null])}}else dojo.publish("/dnd/source/over",[null])},startDrag:function(a,b,c){this.source=a;this.nodes=b;this.copy=Boolean(c);this.avatar=this.makeAvatar();dojo.body().appendChild(this.avatar.node);dojo.publish("/dnd/start",[a,b,this.copy]);this.events=[dojo.connect(dojo.doc,"onmousemove",this,"onMouseMove"),dojo.connect(dojo.doc,"onmouseup",this,
"onMouseUp"),dojo.connect(dojo.doc,"onkeydown",this,"onKeyDown"),dojo.connect(dojo.doc,"onkeyup",this,"onKeyUp"),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent)];dojo.addClass(dojo.body(),"dojoDnd"+(c?"Copy":"Move"))},canDrop:function(a){a=Boolean(this.target&&a);if(this.canDropFlag!=a){this.canDropFlag=a;this.avatar.update()}},stopDrag:function(){dojo.removeClass(dojo.body(),"dojoDndCopy");dojo.removeClass(dojo.body(),"dojoDndMove");dojo.forEach(this.events,
dojo.disconnect);this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new dojo.dnd.Avatar(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;if(b){dojo.dnd.autoScrollNodes(a);b=b.node.style;b.left=a.pageX+this.OFFSET_X+"px";b.top=a.pageY+this.OFFSET_Y+"px";a=Boolean(this.source.copyState(dojo.isCopyKey(a)));this.copy!=a&&this._setCopyStatus(a)}},onMouseUp:function(a){if(this.avatar){if(this.target&&
this.canDropFlag){a=[this.source,this.nodes,Boolean(this.source.copyState(dojo.isCopyKey(a))),this.target,a];dojo.publish("/dnd/drop/before",a);dojo.publish("/dnd/drop",a)}else dojo.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case dojo.keys.CTRL:a=Boolean(this.source.copyState(true));this.copy!=a&&this._setCopyStatus(a);break;case dojo.keys.ESCAPE:dojo.publish("/dnd/cancel");this.stopDrag()}},onKeyUp:function(a){if(this.avatar&&a.keyCode==dojo.keys.CTRL){a=
Boolean(this.source.copyState(false));this.copy!=a&&this._setCopyStatus(a)}},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();dojo.removeClass(dojo.body(),"dojoDnd"+(this.copy?"Move":"Copy"));dojo.addClass(dojo.body(),"dojoDnd"+(this.copy?"Copy":"Move"))}});dojo.dnd._manager=null;dojo.dnd.manager=function(){if(!dojo.dnd._manager)dojo.dnd._manager=new dojo.dnd.Manager;return dojo.dnd._manager}}
if(!dojo._hasResource["dojo.dnd.Source"]){dojo._hasResource["dojo.dnd.Source"]=true;dojo.provide("dojo.dnd.Source");dojo.declare("dojo.dnd.Source",dojo.dnd.Selector,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],generateText:true,constructor:function(a,b){dojo.mixin(this,dojo.mixin({},b));var c=this.accept;if(c.length){this.accept={};for(var d=0;d<c.length;++d)this.accept[c[d]]=1}this.mouseDown=
this.isDragging=false;this.targetBox=this.targetAnchor=null;this.before=true;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&dojo.addClass(this.node,"dojoDndSource");this.targetState="";this.accept&&dojo.addClass(this.node,"dojoDndTarget");this.horizontal&&dojo.addClass(this.node,"dojoDndHorizontal");this.topics=[dojo.subscribe("/dnd/source/over",this,"onDndSourceOver"),dojo.subscribe("/dnd/start",this,"onDndStart"),dojo.subscribe("/dnd/drop",this,"onDndDrop"),dojo.subscribe("/dnd/cancel",
this,"onDndCancel")]},checkAcceptance:function(a,b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,e=false,f=0;f<d.length;++f)if(d[f]in this.accept){e=true;break}if(!e)return false}return true},copyState:function(a,b){if(a)return true;if(arguments.length<2)b=this==dojo.dnd.manager().target;if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return false},destroy:function(){dojo.dnd.Source.superclass.destroy.call(this);
dojo.forEach(this.topics,dojo.unsubscribe);this.targetAnchor=null},markupFactory:function(a,b){a._skipStartup=true;return new dojo.dnd.Source(b,a)},onMouseMove:function(a){if(!(this.isDragging&&this.targetState=="Disabled")){dojo.dnd.Source.superclass.onMouseMove.call(this,a);var b=dojo.dnd.manager();if(!this.isDragging)if(this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var c=this.getSelectedNodes();c.length&&b.startDrag(this,c,
this.copyState(dojo.isCopyKey(a),true))}if(this.isDragging){c=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current)this.targetBox=dojo.position(this.current,true);c=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2:a.pageY-this.targetBox.y<this.targetBox.h/2}if(this.current!=this.targetAnchor||c!=this.before){this._markTargetAnchor(c);b.canDrop(!this.current||b.source!=this||!(this.current.id in this.selection))}}}},onMouseDown:function(a){if(!this.mouseDown&&this._legalMouseDown(a)&&
(!this.skipForm||!dojo.dnd.isFormElement(a))){this.mouseDown=true;this._lastX=a.pageX;this._lastY=a.pageY;dojo.dnd.Source.superclass.onMouseDown.call(this,a)}},onMouseUp:function(a){if(this.mouseDown){this.mouseDown=false;dojo.dnd.Source.superclass.onMouseUp.call(this,a)}},onDndSourceOver:function(a){if(this!=a){this.mouseDown=false;this.targetAnchor&&this._unmarkTargetAnchor()}else if(this.isDragging){a=dojo.dnd.manager();a.canDrop(this.targetState!="Disabled"&&(!this.current||a.source!=this||!(this.current.id in
this.selection)))}},onDndStart:function(a,b,c){this.autoSync&&this.sync();if(this.isSource)this._changeState("Source",this==a?c?"Copied":"Moved":"");this._changeState("Target",this.accept&&this.checkAcceptance(a,b)?"":"Disabled");this==a&&dojo.dnd.manager().overSource(this);this.isDragging=true},onDndDrop:function(a,b,c,d){if(this==d)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null}this.before=true;this.mouseDown=
this.isDragging=false;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(a,b,c){var d=this._normalizedCreator;this._normalizedCreator=this.creator?function(e,f){return d.call(this,a.getItem(e.id).data,f)}:c?function(e){var f=a.getItem(e.id);e=e.cloneNode(true);e.id=dojo.dnd.getUniqueId();return{node:e,data:f.data,type:f.type}}:function(e){var f=a.getItem(e.id);a.delItem(e.id);
return{node:e,data:f.data,type:f.type}};this.selectNone();!c&&!this.creator&&a.selectNone();this.insertNodes(true,b,this.before,this.current);!c&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=d},onDropInternal:function(a,b){var c=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(b)this._normalizedCreator=this.creator?function(d,e){return c.call(this,this.getItem(d.id).data,e)}:function(d){var e=this.getItem(d.id);d=d.cloneNode(true);d.id=dojo.dnd.getUniqueId();
return{node:d,data:e.data,type:e.type}};else{if(!this.current)return;this._normalizedCreator=function(d){var e=this.getItem(d.id);return{node:d,data:e.data,type:e.type}}}this._removeSelection();this.insertNodes(true,a,this.before,this.current);this._normalizedCreator=c}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){dojo.dnd.Source.superclass.onOverEvent.call(this);dojo.dnd.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled")this.onDraggingOver()},
onOutEvent:function(){dojo.dnd.Source.superclass.onOutEvent.call(this);dojo.dnd.manager().outSource(this);if(this.isDragging&&this.targetState!="Disabled")this.onDraggingOut()},_markTargetAnchor:function(a){if(!(this.current==this.targetAnchor&&this.before==a)){if(this.targetAnchor)this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=this.current;this.targetBox=null;this.before=a;if(this.targetAnchor)this._addItemClass(this.targetAnchor,this.before?"Before":"After")}},
_unmarkTargetAnchor:function(){if(this.targetAnchor){this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetBox=this.targetAnchor=null;this.before=true}},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if(!dojo.mouseButtons.isLeft(a))return false;if(!this.withHandles)return true;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(dojo.hasClass(a,"dojoDndHandle"))return true;if(dojo.hasClass(a,"dojoDndItem")||dojo.hasClass(a,
"dojoDndIgnore"))break}return false}});dojo.declare("dojo.dnd.Target",dojo.dnd.Source,{constructor:function(){this.isSource=false;dojo.removeClass(this.node,"dojoDndSource")},markupFactory:function(a,b){a._skipStartup=true;return new dojo.dnd.Target(b,a)}});dojo.declare("dojo.dnd.AutoSource",dojo.dnd.Source,{constructor:function(){this.autoSync=true},markupFactory:function(a,b){a._skipStartup=true;return new dojo.dnd.AutoSource(b,a)}})}
if(!dojo._hasResource["dojox.grid._View"]){dojo._hasResource["dojox.grid._View"]=true;dojo.provide("dojox.grid._View");(function(){dojo.declare("dojox.grid._View",[dijit._Widget,dijit._Templated],{defaultWidth:"18em",viewWidth:"",templateString:'<div class="dojoxGridView" wairole="presentation">\r\n\t<div class="dojoxGridHeader" dojoAttachPoint="headerNode" wairole="presentation">\r\n\t\t<div dojoAttachPoint="headerNodeContainer" style="width:9000em" wairole="presentation">\r\n\t\t\t<div dojoAttachPoint="headerContentNode" wairole="row"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<input type="checkbox" class="dojoxGridHiddenFocus" dojoAttachPoint="hiddenFocusNode" wairole="presentation" />\r\n\t<input type="checkbox" class="dojoxGridHiddenFocus" wairole="presentation" />\r\n\t<div class="dojoxGridScrollbox" dojoAttachPoint="scrollboxNode" wairole="presentation">\r\n\t\t<div class="dojoxGridContent" dojoAttachPoint="contentNode" hidefocus="hidefocus" wairole="presentation"></div>\r\n\t</div>\r\n</div>\r\n',
themeable:false,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:dojox.grid._HeaderBuilder,_contentBuilderClass:dojox.grid._ContentBuilder,postMixInProperties:function(){this.rowNodes={}},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");dojox.grid.util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);dojox.grid.util.funnelEvents(this.headerNode,this,"doHeaderEvent",
["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!dojo._isBodyLtr())this.headerNodeContainer.style.width=""},destroy:function(){dojo.destroy(this.headerNode);delete this.headerNode;for(var b in this.rowNodes)dojo.destroy(this.rowNodes[b]);this.rowNodes={};this.source&&this.source.destroy();this.inherited(arguments)},focus:function(){dojo.isIE||dojo.isWebKit||dojo.isOpera?
this.hiddenFocusNode.focus():this.scrollboxNode.focus()},setStructure:function(b){b=this.structure=b;this.viewWidth=b.width&&!isNaN(b.width)?b.width+"em":b.width||(b.noscroll?"auto":this.viewWidth);this._onBeforeRow=b.onBeforeRow||function(){};this._onAfterRow=b.onAfterRow||function(){};if(this.noscroll=b.noscroll)this.scrollboxNode.style.overflow="hidden";this.simpleStructure=Boolean(b.cells.length==1);this.testFlexCells();this.updateStructure()},_cleanupRowWidgets:function(b){b&&dojo.forEach(dojo.query("[widgetId]",
b).map(dijit.byNode),function(c){if(c._destroyOnRemove){c.destroy();delete c}else c.domNode&&c.domNode.parentNode&&c.domNode.parentNode.removeChild(c.domNode)})},onBeforeRow:function(b,c){this._onBeforeRow(b,c);b>=0&&this._cleanupRowWidgets(this.getRowNode(b))},onAfterRow:function(b,c,d){this._onAfterRow(b,c,d);var e=this.grid;dojo.forEach(dojo.query(".dojoxGridStubNode",d),function(f){if(f&&f.parentNode){var g=f.getAttribute("linkWidget"),h=window.parseInt(dojo.attr(f,"cellIdx"),10);e.getCell(h);
if(g=dijit.byId(g)){f.parentNode.replaceChild(g.domNode,f);g._started||g.startup()}else f.innerHTML=""}},this)},testFlexCells:function(){this.flexCells=false;for(var b=0,c;c=this.structure.cells[b];b++)for(var d=0,e;e=c[d];d++){e.view=this;this.flexCells=this.flexCells||e.isFlex()}return this.flexCells},updateStructure:function(){this.header.update();this.content.update()},getScrollbarWidth:function(){var b=this.hasVScrollbar(),c=dojo.style(this.scrollboxNode,"overflow");if(this.noscroll||!c||c==
"hidden")b=false;else if(c=="scroll")b=true;return b?dojox.html.metrics.getScrollbar().w:0},getColumnsWidth:function(){var b=this.headerContentNode;return b&&b.firstChild?b.firstChild.offsetWidth:0},setColumnsWidth:function(b){this.headerContentNode.firstChild.style.width=b+"px";if(this.viewWidth)this.viewWidth=b+"px"},getWidth:function(){return this.viewWidth||this.getColumnsWidth()+this.getScrollbarWidth()+"px"},getContentWidth:function(){return Math.max(0,dojo._getContentBox(this.domNode).w-this.getScrollbarWidth())+
"px"},render:function(){this.scrollboxNode.style.height="";this.renderHeader();if(this._togglingColumn>=0){this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn);this._togglingColumn=-1}var b=this.grid.layout.cells,c=dojo.hitch(this,function(e,f){!dojo._isBodyLtr()&&(f=!f);for(var g=f?-1:1,h=this.header.getCellNodeIndex(e)+g,i=b[h];i&&i.getHeaderNode()&&i.getHeaderNode().style.display=="none";){h+=g;i=b[h]}if(i)return i.getHeaderNode();return null});if(this.grid.columnReordering&&this.simpleStructure){this.source&&
this.source.destroy();this.bottomMarker&&dojo.destroy(this.bottomMarker);this.bottomMarker=dojo.byId("dojoxGrid_bottomMarker");this.topMarker&&dojo.destroy(this.topMarker);this.topMarker=dojo.byId("dojoxGrid_topMarker");if(!this.bottomMarker){this.bottomMarker=dojo.create("div",{id:"dojoxGrid_bottomMarker","class":"dojoxGridColPlaceBottom"},dojo.body());this._hide(this.bottomMarker);this.topMarker=dojo.create("div",{id:"dojoxGrid_topMarker","class":"dojoxGridColPlaceTop"},dojo.body());this._hide(this.topMarker)}this.arrowDim=
dojo.contentBox(this.bottomMarker);var d=dojo.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new dojo.dnd.Source(this.headerContentNode.firstChild.rows[0],{horizontal:true,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:false,onMouseDown:dojo.hitch(this,function(e){this.header.decorateEvent(e);if((this.header.overRightResizeArea(e)||this.header.overLeftResizeArea(e))&&this.header.canResize(e)&&!this.header.moveable)this.header.beginColumnResize(e);else{if(this.grid.headerMenu)this.grid.headerMenu.onCancel(true);
if(e.button===(dojo.isIE?1:0))dojo.dnd.Source.prototype.onMouseDown.call(this.source,e)}}),onMouseOver:dojo.hitch(this,function(e){var f=this.source;f._getChildByEvent(e)&&dojo.dnd.Source.prototype.onMouseOver.apply(f,arguments)}),_markTargetAnchor:dojo.hitch(this,function(e){var f=this.source;if(!(f.current==f.targetAnchor&&f.before==e)){if(f.targetAnchor&&c(f.targetAnchor,f.before))f._removeItemClass(c(f.targetAnchor,f.before),f.before?"After":"Before");dojo.dnd.Source.prototype._markTargetAnchor.call(f,
e);var g=e?f.targetAnchor:c(f.targetAnchor,f.before);e=0;if(!g){g=f.targetAnchor;e=dojo.contentBox(g).w+this.arrowDim.w/2+2}g=(dojo.position||dojo._abs)(g,true);e=Math.floor(g.x-this.arrowDim.w/2+e);dojo.style(this.bottomMarker,"visibility","visible");dojo.style(this.topMarker,"visibility","visible");dojo.style(this.bottomMarker,{left:e+"px",top:d+g.y+"px"});dojo.style(this.topMarker,{left:e+"px",top:g.y-this.arrowDim.h+"px"});if(f.targetAnchor&&c(f.targetAnchor,f.before))f._addItemClass(c(f.targetAnchor,
f.before),f.before?"After":"Before")}}),_unmarkTargetAnchor:dojo.hitch(this,function(){var e=this.source;if(e.targetAnchor){if(e.targetAnchor&&c(e.targetAnchor,e.before))e._removeItemClass(c(e.targetAnchor,e.before),e.before?"After":"Before");this._hide(this.bottomMarker);this._hide(this.topMarker);dojo.dnd.Source.prototype._unmarkTargetAnchor.call(e)}}),destroy:dojo.hitch(this,function(){dojo.disconnect(this._source_conn);dojo.unsubscribe(this._source_sub);dojo.dnd.Source.prototype.destroy.call(this.source);
if(this.bottomMarker){dojo.destroy(this.bottomMarker);delete this.bottomMarker}if(this.topMarker){dojo.destroy(this.topMarker);delete this.topMarker}}),onDndCancel:dojo.hitch(this,function(){dojo.dnd.Source.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker)})});this._source_conn=dojo.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=dojo.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup()}},_hide:function(b){dojo.style(b,
{left:"-10000px",top:"-10000px",visibility:"hidden"})},_onDndDropBefore:function(b){if(dojo.dnd.manager().target===this.source){this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var c=this.grid.views.views;b=c[b.viewIndex];c=c[this.index];if(c!=b){b.convertColPctToFixed();c.convertColPctToFixed()}}},_onDndDrop:function(b,c){if(dojo.dnd.manager().target!==this.source){if(dojo.dnd.manager().source===this.source)this._removingColumn=true}else{this._hide(this.bottomMarker);
this._hide(this.topMarker);var d=dojo.marginBox(c[0]).w;if(b.viewIndex!==this.index){var e=this.grid.views.views,f=e[b.viewIndex];e=e[this.index];f.viewWidth&&f.viewWidth!="auto"&&f.setColumnsWidth(f.getColumnsWidth()-d);e.viewWidth&&e.viewWidth!="auto"&&e.setColumnsWidth(e.getColumnsWidth())}d=this.source._targetNode;f=this.source._beforeTarget;!dojo._isBodyLtr()&&(f=!f);e=this.grid.layout;var g=this.index;delete this.source._targetNode;delete this.source._beforeTarget;e.moveColumn(b.viewIndex,g,
c[0]?dojo.attr(c[0],"idx"):null,d?dojo.attr(d,"idx"):null,f)}},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth}dojox.grid.util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode])},_getHeaderContent:function(b){var c=b.name||b.grid.getCellName(b),d=['<div class="dojoxGridSortNode'];if(b.index!=b.grid.getSortIndex())d.push('">');
else d=d.concat([" ",b.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown",'"><div class="dojoxGridArrowButtonChar">',b.grid.sortInfo>0?"&#9650;":"&#9660;",'</div><div class="dojoxGridArrowButtonNode" role="presentation"></div>','<div class="dojoxGridColCaption">']);d=d.concat([c,"</div></div>"]);return d.join("")},resize:function(){this.adaptHeight();this.adaptWidth()},hasHScrollbar:function(b){var c=this._hasHScroll||false;if(this._hasHScroll==undefined||b)if(this.noscroll)this._hasHScroll=false;
else{b=dojo.style(this.scrollboxNode,"overflow");this._hasHScroll=b=="hidden"?false:b=="scroll"?true:this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth}c!==this._hasHScroll&&this.grid.update();return this._hasHScroll},hasVScrollbar:function(b){var c=this._hasVScroll||false;if(this._hasVScroll==undefined||b)if(this.noscroll)this._hasVScroll=false;else{b=dojo.style(this.scrollboxNode,"overflow");this._hasVScroll=b=="hidden"?false:b=="scroll"?true:this.scrollboxNode.scrollHeight>
this.scrollboxNode.clientHeight}c!==this._hasVScroll&&this.grid.update();return this._hasVScroll},convertColPctToFixed:function(){var b=false;this.grid.initialWidth="";var c=dojo.query("th",this.headerContentNode),d=dojo.map(c,function(e,f){var g=e.style.width;dojo.attr(e,"vIdx",f);if(g&&g.slice(-1)=="%")b=true;else if(g&&g.slice(-2)=="px")return window.parseInt(g,10);return dojo.contentBox(e).w});if(b){dojo.forEach(this.grid.layout.cells,function(e,f){if(e.view==this){var g=e.view.getHeaderCellNode(e.index);
if(g&&dojo.hasAttr(g,"vIdx")){var h=window.parseInt(dojo.attr(g,"vIdx"));this.setColWidth(f,d[h]);dojo.removeAttr(g,"vIdx")}}},this);return true}return false},adaptHeight:function(b){if(!this.grid._autoHeight){var c=this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10)||this.domNode.clientHeight,d=this;if(b||this.noscroll&&function(){var e,f;for(f in d.grid.views.views){e=d.grid.views.views[f];if(e!==d&&e.hasHScrollbar())return true}return false}())c-=dojox.html.metrics.getScrollbar().h;
dojox.grid.util.setStyleHeightPx(this.scrollboxNode,c)}this.hasVScrollbar(true)},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth}var b=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();if(this._removingColumn){b=Math.min(b,this.getColumnsWidth())+"px";this._removingColumn=false}else b=Math.max(b,this.getColumnsWidth())+"px";this.contentNode.style.width=b;this.hasHScrollbar(true)},setSize:function(b,
c){var d=this.domNode.style,e=this.headerNode.style;if(b){d.width=b;e.width=b}d.height=c>=0?c+"px":""},renderRow:function(b){var c=this.createRowNode(b);this.buildRow(b,c);this.grid.edit.restore(this,b);return c},createRowNode:function(b){var c=document.createElement("div");c.className=this.classTag+"Row";if(this instanceof dojox.grid._RowSelector)dojo.attr(c,"role","presentation");else{dojo.attr(c,"role","row");this.grid.selectionMode!="none"&&dojo.attr(c,"aria-selected","false")}c[dojox.grid.util.gridViewTag]=
this.id;c[dojox.grid.util.rowIndexTag]=b;return this.rowNodes[b]=c},buildRow:function(b,c){this.buildRowContent(b,c);this.styleRow(b,c)},buildRowContent:function(b,c){c.innerHTML=this.content.generateHtml(b,b);if(this.flexCells&&this.contentWidth)c.firstChild.style.width=this.contentWidth;dojox.grid.util.fire(this,"onAfterRow",[b,this.structure.cells,c])},rowRemoved:function(b){b>=0&&this._cleanupRowWidgets(this.getRowNode(b));this.grid.edit.save(this,b);delete this.rowNodes[b]},getRowNode:function(b){return this.rowNodes[b]},
getCellNode:function(b,c){var d=this.getRowNode(b);if(d)return this.content.getCellNode(d,c)},getHeaderCellNode:function(b){if(this.headerContentNode)return this.header.getCellNode(this.headerContentNode,b)},styleRow:function(b,c){c._style=c.style.cssText==undefined?c.getAttribute("style"):c.style.cssText;this.styleRowNode(b,c)},styleRowNode:function(b,c){c&&this.doStyleRowNode(b,c)},doStyleRowNode:function(b,c){this.grid.styleRowNode(b,c)},updateRow:function(b){var c=this.getRowNode(b);if(c){c.style.height=
"";this.buildRow(b,c)}return c},updateRowStyles:function(b){this.styleRowNode(b,this.getRowNode(b))},lastTop:0,firstScroll:0,doscroll:function(){var b=dojo._isBodyLtr();if(this.firstScroll<2){if(!b&&this.firstScroll==1||b&&this.firstScroll===0){var c=dojo.marginBox(this.headerNodeContainer);if(dojo.isIE)this.headerNodeContainer.style.width=c.w+this.getScrollbarWidth()+"px";else if(dojo.isMoz){this.headerNodeContainer.style.width=c.w-this.getScrollbarWidth()+"px";this.scrollboxNode.scrollLeft=b?this.scrollboxNode.clientWidth-
this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth}}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;b=this.scrollboxNode.scrollTop;b!==this.lastTop&&this.grid.scrollTo(b)},setScrollTop:function(b){this.lastTop=b;this.scrollboxNode.scrollTop=b;return this.scrollboxNode.scrollTop},doContentEvent:function(b){if(this.content.decorateEvent(b))this.grid.onContentEvent(b)},doHeaderEvent:function(b){if(this.header.decorateEvent(b))this.grid.onHeaderEvent(b)},
dispatchContentEvent:function(b){return this.content.dispatchEvent(b)},dispatchHeaderEvent:function(b){return this.header.dispatchEvent(b)},setColWidth:function(b,c){this.grid.setCellWidth(b,c+"px")},update:function(){if(this.domNode){this.content.update();this.grid.update();var b=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=b;this.headerNode.scrollLeft=b}}});dojo.declare("dojox.grid._GridAvatar",dojo.dnd.Avatar,{construct:function(){var b=dojo.doc,c=b.createElement("table");c.cellPadding=
c.cellSpacing="0";c.className="dojoxGridDndAvatar";c.style.position="absolute";c.style.zIndex=1999;c.style.margin="0px";var d=b.createElement("tbody"),e=b.createElement("tr"),f=b.createElement("td"),g=b.createElement("td");e.className="dojoxGridDndAvatarItem";g.className="dojoxGridDndAvatarItemImage";g.style.width="16px";var h=this.manager.source;if(h.creator)h=h._normalizedCreator(h.getItem(this.manager.nodes[0].id).data,"avatar").node;else{h=this.manager.nodes[0].cloneNode(true);var i,j;if(h.tagName.toLowerCase()==
"tr"){i=b.createElement("table");j=b.createElement("tbody");j.appendChild(h);i.appendChild(j);h=i}else if(h.tagName.toLowerCase()=="th"){i=b.createElement("table");j=b.createElement("tbody");b=b.createElement("tr");i.cellPadding=i.cellSpacing="0";b.appendChild(h);j.appendChild(b);i.appendChild(j);h=i}}h.id="";f.appendChild(h);e.appendChild(g);e.appendChild(f);dojo.style(e,"opacity",0.9);d.appendChild(e);c.appendChild(d);this.node=c;c=dojo.dnd.manager();this.oldOffsetY=c.OFFSET_Y;c.OFFSET_Y=1},destroy:function(){dojo.dnd.manager().OFFSET_Y=
this.oldOffsetY;this.inherited(arguments)}});var a=dojo.dnd.manager().makeAvatar;dojo.dnd.manager().makeAvatar=function(){if(this.source.viewIndex!==undefined&&!dojo.hasClass(dojo.body(),"dijit_a11y"))return new dojox.grid._GridAvatar(this);return a.call(dojo.dnd.manager())}})()}
if(!dojo._hasResource["dojox.grid._RowSelector"]){dojo._hasResource["dojox.grid._RowSelector"]=true;dojo.provide("dojox.grid._RowSelector");dojo.declare("dojox.grid._RowSelector",dojox.grid._View,{defaultWidth:"2em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(a,b){b.innerHTML=
'<table class="dojoxGridRowbarTable" style="width:'+(this.contentWidth||0)+'px;height:1px;" border="0" cellspacing="0" cellpadding="0" role="presentation"><tr><td class="dojoxGridRowbarInner">&nbsp;</td></tr></table>'},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight()},adaptWidth:function(){if(!("contentWidth"in this)&&this.contentNode)this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth},doStyleRowNode:function(a,b){var c=["dojoxGridRowbar dojoxGridNonNormalizedCell"];
this.grid.rows.isOver(a)&&c.push("dojoxGridRowbarOver");this.grid.selection.isSelected(a)&&c.push("dojoxGridRowbarSelected");b.className=c.join(" ")},domouseover:function(a){this.grid.onMouseOverRow(a)},domouseout:function(a){if(!this.isIntraRowEvent(a))this.grid.onMouseOutRow(a)}})}
if(!dojo._hasResource["dojox.grid._Layout"]){dojo._hasResource["dojox.grid._Layout"]=true;dojo.provide("dojox.grid._Layout");dojo.declare("dojox.grid._Layout",null,{constructor:function(a){this.grid=a},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(a,b,c,d,e){var f=this.structure[a].cells[0],g=this.structure[b].cells[0],h=null,i=h=0;a=0;for(var j;j=f[a];a++)if(j.index==c){h=a;break}h=f.splice(h,1)[0];h.view=this.grid.views.views[b];for(a=0;j=g[a];a++)if(j.index==d){i=a;break}e||(i+=
1);g.splice(i,0,h);if(c=this.grid.getCell(this.grid.getSortIndex()))c._currentlySorted=this.grid.getSortAsc();this.cells=[];for(a=c=0;b=this.structure[a];a++)for(d=0;e=b.cells[d];d++)for(f=0;j=e[f];f++){j.index=c;this.cells.push(j);if("_currentlySorted"in j){g=c+1;g*=j._currentlySorted?1:-1;this.grid.sortInfo=g;delete j._currentlySorted}c++}this.grid.setupHeaderMenu()},setColumnVisibility:function(a,b){var c=this.cells[a];if(c.hidden==b){c.hidden=!b;var d=c.view,e=d.viewWidth;if(e&&e!="auto")d._togglingColumn=
dojo.marginBox(c.getHeaderNode()).w||0;d.update();return true}else return false},addCellDef:function(a,b,c){var d=this,e=function(f){var g=0;if(f.colSpan>1)g=0;else{g=f.width||d._defaultCellProps.width||d.defaultWidth;isNaN(g)||(g+="em")}return g};a={grid:this.grid,subrow:a,layoutIndex:b,index:this.cells.length};if(c&&c instanceof dojox.grid.cells._Base){b=dojo.clone(c);a.unitWidth=e(b._props);return b=dojo.mixin(b,this._defaultCellProps,c._props,a)}b=c.type||this._defaultCellProps.type||dojox.grid.cells.Cell;
a.unitWidth=e(c);return new b(dojo.mixin({},this._defaultCellProps,c,a))},addRowDef:function(a,b){for(var c=[],d=0,e=0,f=true,g=0,h;h=b[g];g++){h=this.addCellDef(a,g,h);c.push(h);this.cells.push(h);if(f&&h.relWidth)d+=h.relWidth;else if(h.width){h=h.width;if(typeof h=="string"&&h.slice(-1)=="%")e+=window.parseInt(h,10);else if(h=="auto")f=false}}d&&f&&dojo.forEach(c,function(i){if(i.relWidth)i.width=i.unitWidth=i.relWidth/d*(100-e)+"%"});return c},addRowsDef:function(a){var b=[];if(dojo.isArray(a))if(dojo.isArray(a[0]))for(var c=
0,d;a&&(d=a[c]);c++)b.push(this.addRowDef(c,d));else b.push(this.addRowDef(0,a));return b},addViewDef:function(a){this._defaultCellProps=a.defaultCell||{};a.width&&a.width=="auto"&&delete a.width;return dojo.mixin({},a,{cells:this.addRowsDef(a.rows||a.cells)})},setStructure:function(a){this.fieldIndex=0;this.cells=[];var b=this.structure=[];if(this.grid.rowSelector){var c={type:dojox._scopeName+".grid._RowSelector"};if(dojo.isString(this.grid.rowSelector)){var d=this.grid.rowSelector;if(d=="false")c=
null;else if(d!="true")c.width=d}else this.grid.rowSelector||(c=null);c&&b.push(this.addViewDef(c))}c=function(h){if(dojo.isArray(h))if(dojo.isArray(h[0])||"name"in h[0]||"field"in h[0]||"get"in h[0])return true;return false};d=function(h){return h!==null&&dojo.isObject(h)&&("cells"in h||"rows"in h||"type"in h&&!("name"in h||"field"in h||"get"in h))};if(dojo.isArray(a)){for(var e=false,f=0,g;g=a[f];f++)if(d(g)){e=true;break}if(e)for(f=0;g=a[f];f++)if(c(g))b.push(this.addViewDef({cells:g}));else d(g)&&
b.push(this.addViewDef(g));else b.push(this.addViewDef({cells:a}))}else d(a)&&b.push(this.addViewDef(a));this.cellCount=this.cells.length;this.grid.setupHeaderMenu()}})}
if(!dojo._hasResource["dojox.grid._ViewManager"]){dojo._hasResource["dojox.grid._ViewManager"]=true;dojo.provide("dojox.grid._ViewManager");dojo.declare("dojox.grid._ViewManager",null,{constructor:function(a){this.grid=a},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(a){a.idx=this.views.length;this.views.push(a)},destroyViews:function(){for(var a=0,b;b=this.views[a];a++)b.destroy();this.views=[]},getContentNodes:function(){for(var a=
[],b=0,c;c=this.views[b];b++)a.push(c.contentNode);return a},forEach:function(a){for(var b=0,c;c=this.views[b];b++)a(c,b)},onEach:function(a,b){b=b||[];for(var c=0,d;d=this.views[c];c++)a in d&&d[a].apply(d,b)},normalizeHeaderNodeHeight:function(){for(var a=[],b=0,c;c=this.views[b];b++)c.headerContentNode.firstChild&&a.push(c.headerContentNode);this.normalizeRowNodeHeights(a)},normalizeRowNodeHeights:function(a){var b=0,c=[];if(this.grid.rowHeight)b=this.grid.rowHeight;else{if(a.length<=1)return;
for(var d=0,e;e=a[d];d++)if(!dojo.hasClass(e,"dojoxGridNonNormalizedCell")){c[d]=e.firstChild.offsetHeight;b=Math.max(b,c[d])}b=b>=0?b:0;dojo.isMoz&&b&&b++}for(d=0;e=a[d];d++)if(c[d]!=b)e.firstChild.style.height=b+"px"},resetHeaderNodeHeight:function(){for(var a=0,b;b=this.views[a];a++)if(b=b.headerContentNode.firstChild)b.style.height=""},renormalizeRow:function(a){for(var b=[],c=0,d,e;(d=this.views[c])&&(e=d.getRowNode(a));c++){e.firstChild.style.height="";b.push(e)}this.normalizeRowNodeHeights(b)},
getViewWidth:function(a){return this.views[a].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(b){b.headerContentNode.style.height=""});var a=0;this.forEach(function(b){a=Math.max(b.headerNode.offsetHeight,a)});return a},measureContent:function(){var a=0;this.forEach(function(b){a=Math.max(b.domNode.offsetHeight,a)});return a},findClient:function(){var a=this.grid.elasticView||-1;if(a<0)for(var b=1,c;c=this.views[b];b++)if(c.viewWidth){for(b=
1;c=this.views[b];b++)if(!c.viewWidth){a=b;break}break}if(a<0)a=Math.floor(this.views.length/2);return a},arrange:function(a,b){var c,d,e,f=this.views.length,g=b<=0?f:this.findClient(),h=function(k,l){var n=k.domNode.style,m=k.headerNode.style;if(dojo._isBodyLtr()){n.left=l+"px";m.left=l+"px"}else{n.right=l+"px";if(dojo.isMoz){m.right=l+k.getScrollbarWidth()+"px";m.width=parseInt(m.width,10)-k.getScrollbarWidth()+"px"}else m.right=l+"px"}n.top="0px";m.top=0};for(c=0;(d=this.views[c])&&c<g;c++){e=
this.getViewWidth(c);d.setSize(e,0);h(d,a);e=d.headerContentNode&&d.headerContentNode.firstChild?d.getColumnsWidth()+d.getScrollbarWidth():d.domNode.offsetWidth;a+=e}c++;for(var i=b,j=f-1;(d=this.views[j])&&c<=j;j--){e=this.getViewWidth(j);d.setSize(e,0);e=d.domNode.offsetWidth;i-=e;h(d,i)}if(g<f){d=this.views[g];e=Math.max(1,i-a);d.setSize(e+"px",0);h(d,a)}return a},renderRow:function(a,b,c){for(var d=[],e=0,f,g;(f=this.views[e])&&(g=b[e]);e++){f=f.renderRow(a);g.appendChild(f);d.push(f)}c||this.normalizeRowNodeHeights(d)},
rowRemoved:function(a){this.onEach("rowRemoved",[a])},updateRow:function(a,b){for(var c=0,d;d=this.views[c];c++)d.updateRow(a);b||this.renormalizeRow(a)},updateRowStyles:function(a){this.onEach("updateRowStyles",[a])},setScrollTop:function(a){for(var b=a,c=0,d;d=this.views[c];c++){b=d.setScrollTop(a);if(dojo.isIE&&d.headerNode&&d.scrollboxNode)d.headerNode.scrollLeft=d.scrollboxNode.scrollLeft}return b},getFirstScrollingView:function(){for(var a=0,b;b=this.views[a];a++)if(b.hasHScrollbar()||b.hasVScrollbar())return b;
return null}})}
if(!dojo._hasResource["dojox.grid._RowManager"]){dojo._hasResource["dojox.grid._RowManager"]=true;dojo.provide("dojox.grid._RowManager");(function(){dojo.declare("dojox.grid._RowManager",null,{constructor:function(a){this.grid=a},linesToEms:2,overRow:-2,prepareStylingRow:function(a,b){return{index:a,node:b,odd:Boolean(a&1),selected:!!this.grid.selection.isSelected(a),over:this.isOver(a),customStyles:"",customClasses:"dojoxGridRow"}},styleRowNode:function(a,b){var c=this.prepareStylingRow(a,b);this.grid.onStyleRow(c);
this.applyStyles(c)},applyStyles:function(a){a.node.className=a.customClasses;var b=a.node.style.height,c=a.node,d=a.customStyles+";"+(a.node._style||"");if(c.style.cssText==undefined)c.setAttribute("style",d);else c.style.cssText=d;a.node.style.height=b},updateStyles:function(a){this.grid.updateRowStyles(a)},setOverRow:function(a){var b=this.overRow;this.overRow=a;if(b!=this.overRow&&(dojo.isString(b)||b>=0))this.updateStyles(b);this.updateStyles(this.overRow)},isOver:function(a){return this.overRow==
a&&!dojo.hasClass(this.grid.domNode,"dojoxGridColumnResizing")}})})()}
if(!dojo._hasResource["dojox.grid._FocusManager"]){dojo._hasResource["dojox.grid._FocusManager"]=true;dojo.provide("dojox.grid._FocusManager");dojo.declare("dojox.grid._FocusManager",null,{constructor:function(a){this.grid=a;this.cell=null;this.rowIndex=-1;this._connects=[];this.headerMenu=this.grid.headerMenu;this._connects.push(dojo.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(dojo.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(dojo.connect(this.grid.domNode,
"oncontextmenu",this,"doContextMenu"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(dojo.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(dojo.connect(this.grid,"postrender",this,"_delayedHeaderFocus"))},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);delete this.grid;delete this.cell},_colHeadNode:null,
_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:false,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView;this._initColumnHeaders()},isFocusCell:function(a,b){return this.cell==a&&this.rowIndex==b},isLastFocusCell:function(){if(this.cell)return this.rowIndex==this.grid.rowCount-1&&this.cell.index==this.grid.layout.cellCount-1;return false},isFirstFocusCell:function(){if(this.cell)return this.rowIndex===
0&&this.cell.index===0;return false},isNoFocusCell:function(){return this.rowIndex<0||!this.cell},isNavHeader:function(){return!!this._colHeadNode},getHeaderIndex:function(){return this._colHeadNode?dojo.indexOf(this._findHeaderCells(),this._colHeadNode):-1},_focusifyCellNode:function(a){var b=this.cell&&this.cell.getNode(this.rowIndex);if(b){dojo.toggleClass(b,this.focusClass,a);if(a){a=this.scrollIntoView();try{if(!this.grid.edit.isEditing()){dojox.grid.util.fire(b,"focus");if(a)this.cell.view.scrollboxNode.scrollLeft=
a}}catch(c){}}}},_delayedCellFocus:function(){if(!(this.isNavHeader()||!this.grid._focused)){var a=this.cell&&this.cell.getNode(this.rowIndex);if(a)try{if(!this.grid.edit.isEditing()){dojo.toggleClass(a,this.focusClass,true);this.blurHeader();dojox.grid.util.fire(a,"focus")}}catch(b){}}},_delayedHeaderFocus:function(){if(this.isNavHeader()){this.focusHeader();this.grid.domNode.focus()}},_initColumnHeaders:function(){for(var a=this._findHeaderCells(),b=0;b<a.length;b++){this._connects.push(dojo.connect(a[b],
"onfocus",this,"doColHeaderFocus"));this._connects.push(dojo.connect(a[b],"onblur",this,"doColHeaderBlur"))}},_findHeaderCells:function(){for(var a=dojo.query("th",this.grid.viewsHeaderNode),b=[],c=0;c<a.length;c++){var d=a[c],e=dojo.hasAttr(d,"tabIndex"),f=dojo.attr(d,"tabIndex");e&&f<0&&b.push(d)}return b},_setActiveColHeader:function(a,b,c){dojo.attr(this.grid.domNode,"aria-activedescendant",a.id);c!=null&&c>=0&&c!=b&&dojo.toggleClass(this._findHeaderCells()[c],this.focusClass,false);dojo.toggleClass(a,
this.focusClass,true);this._colHeadNode=a;this._colHeadFocusIdx=b;this._scrollHeader(this._colHeadFocusIdx)},scrollIntoView:function(){var a=this.cell?this._scrollInfo(this.cell):null;if(!a||!a.s)return null;var b=this.grid.scroller.findScrollTop(this.rowIndex);if(a.n&&a.sr)if(a.n.offsetLeft+a.n.offsetWidth>a.sr.l+a.sr.w)a.s.scrollLeft=a.n.offsetLeft+a.n.offsetWidth-a.sr.w;else if(a.n.offsetLeft<a.sr.l)a.s.scrollLeft=a.n.offsetLeft;if(a.r&&a.sr)if(b+a.r.offsetHeight>a.sr.t+a.sr.h)this.grid.setScrollTop(b+
a.r.offsetHeight-a.sr.h);else b<a.sr.t&&this.grid.setScrollTop(b);return a.s.scrollLeft},_scrollInfo:function(a,b){if(a){var c=a.view.scrollboxNode,d={w:c.clientWidth,l:c.scrollLeft,t:c.scrollTop,h:c.clientHeight},e=a.view.getRowNode(this.rowIndex);return{c:a,s:c,sr:d,n:b?b:a.getNode(this.rowIndex),r:e}}return null},_scrollHeader:function(a){var b=null;if(this._colHeadNode){var c=this.grid.getCell(a);b=this._scrollInfo(c,c.getNode(0))}if(b&&b.s&&b.sr&&b.n)if(b.n.offsetLeft+b.n.offsetWidth>b.sr.l+
b.sr.w)b.s.scrollLeft=b.n.offsetLeft+b.n.offsetWidth-b.sr.w;else if(b.n.offsetLeft<b.sr.l)b.s.scrollLeft=b.n.offsetLeft;else if(dojo.isIE<=7&&c&&c.view.headerNode)c.view.headerNode.scrollLeft=b.s.scrollLeft},_isHeaderHidden:function(){var a=this.focusView;if(!a)for(var b=0,c;c=this.grid.views.views[b];b++)if(c.headerNode){a=c;break}return a&&dojo.getComputedStyle(a.headerNode).display=="none"},colSizeAdjust:function(a,b,c){var d=this._findHeaderCells(),e=this.focusView;if(!e)for(var f=0,g;g=this.grid.views.views[f];f++)if(g.header.tableMap.map){e=
g;break}f=d[b];if(!(!e||b==d.length-1&&b===0)){e.content.baseDecorateEvent(a);a.cellNode=f;a.cellIndex=e.content.getCellNodeIndex(a.cellNode);a.cell=a.cellIndex>=0?this.grid.getCell(a.cellIndex):null;if(e.header.canResize(a)){b={l:c};a=e.header.colResizeSetup(a,false);e.header.doResizeColumn(a,null,b);e.update()}}},styleRow:function(){},setFocusIndex:function(a,b){this.setFocusCell(this.grid.getCell(b),a)},setFocusCell:function(a,b){if(a&&!this.isFocusCell(a,b)){this.tabbingOut=false;this._colHeadNode&&
this.blurHeader();this._colHeadNode=this._colHeadFocusIdx=null;this.focusGridView();this._focusifyCellNode(false);this.cell=a;this.rowIndex=b;this._focusifyCellNode(true)}if(dojo.isOpera)setTimeout(dojo.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);else this.grid.onCellFocus(this.cell,this.rowIndex)},next:function(){if(this.cell){var a=this.rowIndex,b=this.cell.index+1,c=this.grid.layout.cellCount-1,d=this.grid.rowCount-1;if(b>c){b=0;a++}if(a>d){b=c;a=d}if(this.grid.edit.isEditing()){c=
this.grid.getCell(b);if(!this.isLastFocusCell()&&!c.editable){this.cell=c;this.rowIndex=a;this.next();return}}this.setFocusIndex(a,b)}},previous:function(){if(this.cell){var a=this.rowIndex||0,b=(this.cell.index||0)-1;if(b<0){b=this.grid.layout.cellCount-1;a--}if(a<0)b=a=0;if(this.grid.edit.isEditing()){var c=this.grid.getCell(b);if(!this.isFirstFocusCell()&&!c.editable){this.cell=c;this.rowIndex=a;this.previous();return}}this.setFocusIndex(a,b)}},move:function(a,b){var c=b<0?-1:1;if(this.isNavHeader()){var d=
this._findHeaderCells(),e=currentIdx=dojo.indexOf(d,this._colHeadNode);for(currentIdx+=b;currentIdx>=0&&currentIdx<d.length&&d[currentIdx].style.display=="none";)currentIdx+=c;currentIdx>=0&&currentIdx<d.length&&this._setActiveColHeader(d[currentIdx],currentIdx,e)}else if(this.cell){var f=this.grid.scroller;d=this.rowIndex;e=Math.min(this.grid.rowCount-1,Math.max(0,d+a));if(a)if(a>0)e>f.getLastPageRow(f.page)&&this.grid.setScrollTop(this.grid.scrollTop+f.findScrollTop(e)-f.findScrollTop(d));else a<
0&&e<=f.getPageRow(f.page)&&this.grid.setScrollTop(this.grid.scrollTop-f.findScrollTop(d)-f.findScrollTop(e));f=this.grid.layout.cellCount-1;for(var g=this.cell.index,h=Math.min(f,Math.max(0,g+b)),i=this.grid.getCell(h);h>=0&&h<f&&i&&i.hidden===true;){h+=c;i=this.grid.getCell(h)}if(!i||i.hidden===true)h=g;this.setFocusIndex(e,h);a&&this.grid.updateRow(d)}},previousKey:function(a){if(this.grid.edit.isEditing()){dojo.stopEvent(a);this.previous()}else if(!this.isNavHeader()&&!this._isHeaderHidden()){this.grid.domNode.focus();
dojo.stopEvent(a)}else{this.tabOut(this.grid.domNode);if(this._colHeadFocusIdx!=null){dojo.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,false);this._colHeadFocusIdx=null}this._focusifyCellNode(false)}},nextKey:function(a){if(a.target===this.grid.domNode&&this._colHeadFocusIdx==null){this.focusHeader();dojo.stopEvent(a)}else if(this.isNavHeader()){this.blurHeader();this.findAndFocusGridCell()||this.tabOut(this.grid.lastFocusNode);this._colHeadNode=this._colHeadFocusIdx=
null}else if(this.grid.edit.isEditing()){dojo.stopEvent(a);this.next()}else this.tabOut(this.grid.lastFocusNode)},tabOut:function(a){this.tabbingOut=true;a.focus()},focusGridView:function(){dojox.grid.util.fire(this.focusView,"focus")},focusGrid:function(){this.focusGridView();this._focusifyCellNode(true)},findAndFocusGridCell:function(){var a=true,b=this.grid.rowCount===0;if(this.isNoFocusCell()&&!b){b=0;if(this.grid.getCell(b).hidden)b=this.isNavHeader()?this._colHeadFocusIdx:0;this.setFocusIndex(0,
b)}else if(this.cell&&!b){this.focusView&&!this.focusView.rowNodes[this.rowIndex]&&this.grid.scrollToRow(this.rowIndex);this.focusGrid()}else a=false;this._colHeadNode=this._colHeadFocusIdx=null;return a},focusHeader:function(){var a=this._findHeaderCells(),b=this._colHeadFocusIdx;if(this._isHeaderHidden())this.findAndFocusGridCell();else if(!this._colHeadFocusIdx)this._colHeadFocusIdx=this.isNoFocusCell()?0:this.cell.index;for(this._colHeadNode=a[this._colHeadFocusIdx];this._colHeadNode&&this._colHeadFocusIdx>=
0&&this._colHeadFocusIdx<a.length&&this._colHeadNode.style.display=="none";){this._colHeadFocusIdx++;this._colHeadNode=a[this._colHeadFocusIdx]}if(this._colHeadNode&&this._colHeadNode.style.display!="none"){if(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode){this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode);this.headerMenu.bindDomNode(this.grid.domNode);this._contextMenuBindNode=this.grid.domNode}this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,b);this._scrollHeader(this._colHeadFocusIdx);
this._focusifyCellNode(false)}else this.findAndFocusGridCell()},blurHeader:function(){dojo.removeClass(this._colHeadNode,this.focusClass);dojo.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var a=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(a);this._contextMenuBindNode=a}},doFocus:function(a){if(!(a&&a.target!=a.currentTarget)){this.tabbingOut||this.focusHeader();this.tabbingOut=
false}dojo.stopEvent(a)},doBlur:function(a){dojo.stopEvent(a)},doContextMenu:function(a){this.headerMenu||dojo.stopEvent(a)},doLastNodeFocus:function(a){if(this.tabbingOut)this._focusifyCellNode(false);else if(this.grid.rowCount>0){this.isNoFocusCell()&&this.setFocusIndex(0,0);this._focusifyCellNode(true)}else this.focusHeader();this.tabbingOut=false;dojo.stopEvent(a)},doLastNodeBlur:function(a){dojo.stopEvent(a)},doColHeaderFocus:function(a){this._setActiveColHeader(a.target,dojo.attr(a.target,"idx"),
this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());dojo.stopEvent(a)},doColHeaderBlur:function(a){dojo.toggleClass(a.target,this.focusClass,false)}})}
if(!dojo._hasResource["dojox.grid._EditManager"]){dojo._hasResource["dojox.grid._EditManager"]=true;dojo.provide("dojox.grid._EditManager");dojo.declare("dojox.grid._EditManager",null,{constructor:function(a){this.grid=a;this.connections=[];dojo.isIE&&this.connections.push(dojo.connect(document.body,"onfocus",dojo.hitch(this,"_boomerangFocus")))},info:{},destroy:function(){dojo.forEach(this.connections,dojo.disconnect)},cellFocus:function(a,b){this.grid.singleClickEdit||this.isEditRow(b)?this.setEditCell(a,
b):this.apply();if(this.isEditing()||a&&a.editable&&a.alwaysEditing)this._focusEditor(a,b)},rowClick:function(a){this.isEditing()&&!this.isEditRow(a.rowIndex)&&this.apply()},styleRow:function(a){if(a.index==this.info.rowIndex)a.customClasses+=" dojoxGridRowEditing"},dispatchEvent:function(a){var b=a.cell;return(b=b&&b.editable?b:0)&&b.dispatchEvent(a.dispatch,a)},isEditing:function(){return this.info.rowIndex!==undefined},isEditCell:function(a,b){return this.info.rowIndex===a&&this.info.cell.index==
b},isEditRow:function(a){return this.info.rowIndex===a},setEditCell:function(a,b){if(!this.isEditCell(b,a.index)&&this.grid.canEdit&&this.grid.canEdit(a,b))this.start(a,b,this.isEditRow(b)||a.editable)},_focusEditor:function(a,b){dojox.grid.util.fire(a,"focus",[b])},focusEditor:function(){this.isEditing()&&this._focusEditor(this.info.cell,this.info.rowIndex)},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>(new Date).getTime()},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();
this.focusEditor();this._catchBoomerang=0}},_doCatchBoomerang:function(){if(dojo.isIE)this._catchBoomerang=(new Date).getTime()+this._boomerangWindow},start:function(a,b,c){this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(b)){this.applyRowEdit();this.grid.updateRow(b)}if(c){this.info={cell:a,rowIndex:b};this.grid.doStartEdit(a,b);this.grid.updateRow(b)}else this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(a,b);this._doCatchBoomerang()},
_editorDo:function(a){var b=this.info.cell;if(b&&b.editable)b[a](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},applyCellEdit:function(a,b,c){this.grid.canEdit(b,c)&&this.grid.doApplyCellEdit(a,c,b.field)},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field)},apply:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();this.info={};this.grid.endUpdate();
this.grid.focus.focusGrid();this._doCatchBoomerang()}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang()}},save:function(a,b){var c=this.info.cell;if(this.isEditRow(a)&&(!b||c.view==b)&&c.editable)c.save(c,this.info.rowIndex)},restore:function(a,b){var c=this.info.cell;this.isEditRow(b)&&c.view==a&&c.editable&&c.restore(c,this.info.rowIndex)}})}
if(!dojo._hasResource["dojox.grid.Selection"]){dojo._hasResource["dojox.grid.Selection"]=true;dojo.provide("dojox.grid.Selection");dojo.declare("dojox.grid.Selection",null,{constructor:function(a){this.grid=a;this.selected=[];this.setMode(a.selectionMode)},mode:"extended",selected:null,updating:0,selectedIndex:-1,setMode:function(a){this.selected.length&&this.deselectAll();this.mode=a!="extended"&&a!="multiple"&&a!="single"&&a!="none"?"extended":a},onCanSelect:function(a){return this.grid.onCanSelect(a)},
onCanDeselect:function(a){return this.grid.onCanDeselect(a)},onSelected:function(){},onDeselected:function(){},onChanging:function(){},onChanged:function(){},isSelected:function(a){if(this.mode=="none")return false;return this.selected[a]},getFirstSelected:function(){if(!this.selected.length||this.mode=="none")return-1;for(var a=0,b=this.selected.length;a<b;a++)if(this.selected[a])return a;return-1},getNextSelected:function(a){if(this.mode=="none")return-1;a+=1;for(var b=this.selected.length;a<b;a++)if(this.selected[a])return a;
return-1},getSelected:function(){for(var a=[],b=0,c=this.selected.length;b<c;b++)this.selected[b]&&a.push(b);return a},getSelectedCount:function(){for(var a=0,b=0;b<this.selected.length;b++)this.selected[b]&&a++;return a},_beginUpdate:function(){if(this.updating===0)this.onChanging();this.updating++},_endUpdate:function(){this.updating--;if(this.updating===0)this.onChanged()},select:function(a){if(this.mode!="none")if(this.mode!="multiple"){this.deselectAll(a);this.addToSelection(a)}else this.toggleSelect(a)},
addToSelection:function(a){if(this.mode!="none")if(dojo.isArray(a))dojo.forEach(a,this.addToSelection,this);else{a=Number(a);if(this.selected[a])this.selectedIndex=a;else if(this.onCanSelect(a)!==false){this.selectedIndex=a;var b=this.grid.getRowNode(a);b&&dojo.attr(b,"aria-selected","true");this._beginUpdate();this.selected[a]=true;this.onSelected(a);this._endUpdate()}}},deselect:function(a){if(this.mode!="none")if(dojo.isArray(a))dojo.forEach(a,this.deselect,this);else{a=Number(a);if(this.selectedIndex==
a)this.selectedIndex=-1;if(this.selected[a])if(this.onCanDeselect(a)!==false){var b=this.grid.getRowNode(a);b&&dojo.attr(b,"aria-selected","false");this._beginUpdate();delete this.selected[a];this.onDeselected(a);this._endUpdate()}}},setSelected:function(a,b){this[b?"addToSelection":"deselect"](a)},toggleSelect:function(a){dojo.isArray(a)?dojo.forEach(a,this.toggleSelect,this):this.setSelected(a,!this.selected[a])},_range:function(a,b,c){var d=a>=0?a:b;a=b;if(d>a){a=d;d=b}for(b=d;b<=a;b++)c(b)},selectRange:function(a,
b){this._range(a,b,dojo.hitch(this,"addToSelection"))},deselectRange:function(a,b){this._range(a,b,dojo.hitch(this,"deselect"))},insert:function(a){this.selected.splice(a,0,false);this.selectedIndex>=a&&this.selectedIndex++},remove:function(a){this.selected.splice(a,1);this.selectedIndex>=a&&this.selectedIndex--},deselectAll:function(a){for(var b in this.selected)b!=a&&this.selected[b]===true&&this.deselect(b)},clickSelect:function(a,b,c){if(this.mode!="none"){this._beginUpdate();if(this.mode!="extended")this.select(a);
else{var d=this.selectedIndex;b||this.deselectAll(a);if(c)this.selectRange(d,a);else b?this.toggleSelect(a):this.addToSelection(a)}this._endUpdate()}},clickSelectEvent:function(a){this.clickSelect(a.rowIndex,dojo.isCopyKey(a),a.shiftKey)},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate()}})}
if(!dojo._hasResource["dojox.grid._Events"]){dojo._hasResource["dojox.grid._Events"]=true;dojo.provide("dojox.grid._Events");dojo.declare("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(a){this.dispatchKeyEvent(a)},onContentEvent:function(a){this.dispatchContentEvent(a)},onHeaderEvent:function(a){this.dispatchHeaderEvent(a)},onStyleRow:function(a){a.customClasses+=(a.odd?" dojoxGridRowOdd":"")+(a.selected?" dojoxGridRowSelected":"")+(a.over?" dojoxGridRowOver":"");
this.focus.styleRow(a);this.edit.styleRow(a)},onKeyDown:function(a){if(!(a.altKey||a.metaKey)){var b=dojo.keys,c;switch(a.keyCode){case b.ESCAPE:this.edit.cancel();break;case b.ENTER:if(!this.edit.isEditing()){c=this.focus.getHeaderIndex();if(c>=0){this.setSortIndex(c);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(a),a.shiftKey);dojo.stopEvent(a)}if(!a.shiftKey){b=this.edit.isEditing();this.edit.apply();b||this.edit.setEditCell(this.focus.cell,this.focus.rowIndex)}if(!this.edit.isEditing()){(this.focus.focusView||
this.views.views[0]).content.decorateEvent(a);this.onRowClick(a)}break;case b.SPACE:if(!this.edit.isEditing()){c=this.focus.getHeaderIndex();if(c>=0){this.setSortIndex(c);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(a),a.shiftKey);dojo.stopEvent(a)}break;case b.TAB:this.focus[a.shiftKey?"previousKey":"nextKey"](a);break;case b.LEFT_ARROW:case b.RIGHT_ARROW:if(!this.edit.isEditing()){var d=a.keyCode;dojo.stopEvent(a);c=this.focus.getHeaderIndex();if(c>=0&&a.shiftKey&&a.ctrlKey)this.focus.colSizeAdjust(a,
c,(d==b.LEFT_ARROW?-1:1)*5);else{a=d==b.LEFT_ARROW?1:-1;if(dojo._isBodyLtr())a*=-1;this.focus.move(0,a)}}break;case b.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){dojo.stopEvent(a);this.focus.move(-1,0)}break;case b.DOWN_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(a);this.focus.move(1,0)}break;case b.PAGE_UP:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){dojo.stopEvent(a);if(this.focus.rowIndex!=this.scroller.firstVisibleRow+1)this.focus.move(this.scroller.firstVisibleRow-
this.focus.rowIndex,0);else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0)}}break;case b.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(a);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1)this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0);else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1));this.focus.move(this.scroller.lastVisibleRow-
this.scroller.firstVisibleRow-1,0)}}}}},onMouseOver:function(a){a.rowIndex==-1?this.onHeaderCellMouseOver(a):this.onCellMouseOver(a)},onMouseOut:function(a){a.rowIndex==-1?this.onHeaderCellMouseOut(a):this.onCellMouseOut(a)},onMouseDown:function(a){a.rowIndex==-1?this.onHeaderCellMouseDown(a):this.onCellMouseDown(a)},onMouseOverRow:function(a){if(!this.rows.isOver(a.rowIndex)){this.rows.setOverRow(a.rowIndex);a.rowIndex==-1?this.onHeaderMouseOver(a):this.onRowMouseOver(a)}},onMouseOutRow:function(a){if(this.rows.isOver(-1))this.onHeaderMouseOut(a);
else if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(a)}},onMouseDownRow:function(a){if(a.rowIndex!=-1)this.onRowMouseDown(a)},onCellMouseOver:function(a){a.cellNode&&dojo.addClass(a.cellNode,this.cellOverClass)},onCellMouseOut:function(a){a.cellNode&&dojo.removeClass(a.cellNode,this.cellOverClass)},onCellMouseDown:function(){},onCellClick:function(a){this._click[0]=this._click[1];this._click[1]=a;this.edit.isEditCell(a.rowIndex,a.cellIndex)||this.focus.setFocusCell(a.cell,a.rowIndex);
this.onRowClick(a)},onCellDblClick:function(a){if(this._click.length>1&&dojo.isIE)this.edit.setEditCell(this._click[1].cell,this._click[1].rowIndex);else this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex?this.edit.setEditCell(this._click[0].cell,this._click[0].rowIndex):this.edit.setEditCell(a.cell,a.rowIndex);this.onRowDblClick(a)},onCellContextMenu:function(a){this.onRowContextMenu(a)},onCellFocus:function(a,b){this.edit.cellFocus(a,b)},onRowClick:function(a){this.edit.rowClick(a);
this.selection.clickSelectEvent(a)},onRowDblClick:function(){},onRowMouseOver:function(){},onRowMouseOut:function(){},onRowMouseDown:function(){},onRowContextMenu:function(a){dojo.stopEvent(a)},onHeaderMouseOver:function(){},onHeaderMouseOut:function(){},onHeaderCellMouseOver:function(a){a.cellNode&&dojo.addClass(a.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(a){a.cellNode&&dojo.removeClass(a.cellNode,this.cellOverClass)},onHeaderCellMouseDown:function(){},onHeaderClick:function(){},
onHeaderCellClick:function(a){this.setSortIndex(a.cell.index);this.onHeaderClick(a)},onHeaderDblClick:function(){},onHeaderCellDblClick:function(a){this.onHeaderDblClick(a)},onHeaderCellContextMenu:function(a){this.onHeaderContextMenu(a)},onHeaderContextMenu:function(a){this.headerMenu||dojo.stopEvent(a)},onStartEdit:function(){},onApplyCellEdit:function(){},onCancelEdit:function(){},onApplyEdit:function(){},onCanSelect:function(){return true},onCanDeselect:function(){return true},onSelected:function(a){this.updateRowStyles(a)},
onDeselected:function(a){this.updateRowStyles(a)},onSelectionChanged:function(){}})}
if(!dojo._hasResource["dojox.grid._Grid"]){dojo._hasResource["dojox.grid._Grid"]=true;dojo.provide("dojox.grid._Grid");(function(){if(!dojo.isCopyKey)dojo.isCopyKey=dojo.dnd.getCopyKeyState;dojo.declare("dojox.grid._Grid",[dijit._Widget,dijit._Templated,dojox.grid._Events],{templateString:'<div hidefocus="hidefocus" wairole="grid" dojoAttachEvent="onmouseout:_mouseOut">\r\n\t<div class="dojoxGridMasterHeader" dojoAttachPoint="viewsHeaderNode" wairole="presentation"></div>\r\n\t<div class="dojoxGridMasterView" dojoAttachPoint="viewsNode" wairole="presentation"></div>\r\n\t<div class="dojoxGridMasterMessages" style="display: none;" dojoAttachPoint="messagesNode"></div>\r\n\t<span dojoAttachPoint="lastFocusNode" tabindex="0"></span>\r\n</div>\r\n',classTag:"dojoxGrid",
rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:false,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:true,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:false,selectionMode:"extended",rowSelector:"",columnReordering:false,headerMenu:null,placeholderLabel:"GridColumns",selectable:false,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:true,
formatterScope:null,editable:false,sortInfo:0,themeable:true,_placeholders:null,_layoutClass:dojox.grid._Layout,buildRendering:function(){this.inherited(arguments);if(!this.domNode.getAttribute("tabIndex"))this.domNode.tabIndex="0";this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");
dojox.html.metrics.initOnFontResize();this.connect(dojox.html.metrics,"onFontResize","textSizeChanged");dojox.grid.util.funnelEvents(this.domNode,this,"doKeyEvent",dojox.grid.util.keyEvents);if(this.selectionMode!="none")dojo.attr(this.domNode,"aria-multiselectable",this.selectionMode=="single"?"false":"true");dojo.addClass(this.domNode,this.classTag);this.isLeftToRight()||dojo.addClass(this.domNode,this.classTag+"Rtl")},postMixInProperties:function(){this.inherited(arguments);var a=dojo.i18n.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,a);this.errorMessage=dojo.string.substitute(this.errorMessage,a);if(this.srcNodeRef&&this.srcNodeRef.style.height)this.height=this.srcNodeRef.style.height;this._setAutoHeightAttr(this.autoHeight,true);this.lastScrollTop=this.scrollTop=0},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);this._click=[];this.inherited(arguments);if(this.domNode&&
this.autoWidth&&this.initialWidth)this.domNode.style.width=this.initialWidth;this.domNode&&!this.editable&&dojo.attr(this.domNode,"aria-readonly","true")},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.edit.destroy();delete this.edit;this.views.destroyViews();if(this.scroller){this.scroller.destroy();delete this.scroller}if(this.focus){this.focus.destroy();delete this.focus}if(this.headerMenu&&this._placeholders.length){dojo.forEach(this._placeholders,
function(a){a.unReplace(true)});this.headerMenu.unBindDomNode(this.viewsHeaderNode)}this.inherited(arguments)},_setAutoHeightAttr:function(a,b){if(typeof a=="string")a=!a||a=="false"?false:a=="true"?true:window.parseInt(a,10);if(typeof a=="number"){if(isNaN(a))a=false;if(a<0)a=true;else if(a===0)a=false}this.autoHeight=a;this._autoHeight=typeof a=="boolean"?a:typeof a=="number"?a>=this.get("rowCount"):false;this._started&&!b&&this.render()},_getRowCountAttr:function(){return this.updating&&this.invalidated&&
this.invalidated.rowCount!=undefined?this.invalidated.rowCount:this.rowCount},textSizeChanged:function(){this.render()},sizeChange:function(){this.update()},createManagers:function(){this.rows=new dojox.grid._RowManager(this);this.focus=new dojox.grid._FocusManager(this);this.edit=new dojox.grid._EditManager(this)},createSelection:function(){this.selection=new dojox.grid.Selection(this)},createScroller:function(){this.scroller=new dojox.grid._Scroller;this.scroller.grid=this;this.scroller.renderRow=
dojo.hitch(this,"renderRow");this.scroller.removeRow=dojo.hitch(this,"rowRemoved")},createLayout:function(){this.layout=new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn")},onMoveColumn:function(){this.render()},onResizeColumn:function(){},createViews:function(){this.views=new dojox.grid._ViewManager(this);this.views.createView=dojo.hitch(this,"createView")},createView:function(a,b){var c=new (dojo.getObject(a))({grid:this,index:b});this.viewsNode.appendChild(c.domNode);
this.viewsHeaderNode.appendChild(c.headerNode);this.views.addView(c);return c},buildViews:function(){for(var a=0,b;b=this.layout.structure[a];a++)this.createView(b.type||dojox._scopeName+".grid._View",a).setStructure(b);this.scroller.setContentNodes(this.views.getContentNodes())},_setStructureAttr:function(a){if(a&&dojo.isString(a)){dojo.deprecated("dojox.grid._Grid.attr('structure', 'objVar')","use dojox.grid._Grid.attr('structure', objVar) instead","2.0");a=dojo.getObject(a)}this.structure=a;if(!a)if(this.layout.structure)a=
this.layout.structure;else return;this.views.destroyViews();a!==this.layout.structure&&this.layout.setStructure(a);this._structureChanged()},setStructure:function(a){dojo.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.attr('structure', obj) instead.","2.0");this._setStructureAttr(a)},getColumnTogglingItems:function(){return dojo.map(this.layout.cells,function(a){if(!a.menuItems)a.menuItems=[];var b=this,c=new dijit.CheckedMenuItem({label:a.name,checked:!a.hidden,_gridCell:a,
onChange:function(d){if(b.layout.setColumnVisibility(this._gridCell.index,d)){var e=this._gridCell.menuItems;e.length>1&&dojo.forEach(e,function(f){f!==this&&f.setAttribute("checked",d)},this);d=dojo.filter(b.layout.cells,function(f){f.menuItems.length>1?dojo.forEach(f.menuItems,"item.attr('disabled', false);"):f.menuItems[0].attr("disabled",false);return!f.hidden});d.length==1&&dojo.forEach(d[0].menuItems,"item.attr('disabled', true);")}},destroy:function(){this._gridCell.menuItems.splice(dojo.indexOf(this._gridCell.menuItems,
this),1);delete this._gridCell;dijit.CheckedMenuItem.prototype.destroy.apply(this,arguments)}});a.menuItems.push(c);return c},this)},_setHeaderMenuAttr:function(a){if(this._placeholders&&this._placeholders.length){dojo.forEach(this._placeholders,function(b){b.unReplace(true)});this._placeholders=[]}this.headerMenu&&this.headerMenu.unBindDomNode(this.viewsHeaderNode);if(this.headerMenu=a){this.headerMenu.bindDomNode(this.viewsHeaderNode);if(this.headerMenu.getPlaceholders)this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel)}},
setHeaderMenu:function(a){dojo.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.attr('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(a)},setupHeaderMenu:function(){this._placeholders&&this._placeholders.length&&dojo.forEach(this._placeholders,function(a){a._replaced&&a.unReplace(true);a.replace(this.getColumnTogglingItems())},this)},_fetch:function(){this.setScrollTop(0)},getItem:function(){return null},showMessage:function(a){if(a){this.messagesNode.innerHTML=a;
this.messagesNode.style.display=""}else{this.messagesNode.innerHTML="";this.messagesNode.style.display="none"}},_structureChanged:function(){this.buildViews();this.autoRender&&this._started&&this.render()},hasLayout:function(){return this.layout.cells.length},resize:function(a,b){this._pendingChangeSize=a;this._pendingResultSize=b;this.sizeChange()},_getPadBorder:function(){return this._padBorder=this._padBorder||dojo._getPadBorderExtents(this.domNode)},_getHeaderHeight:function(){var a=this.viewsHeaderNode.style,
b=a.display=="none"?0:this.views.measureHeader();a.height=b+"px";this.views.normalizeHeaderNodeHeight();return b},_resize:function(a,b){a=a||this._pendingChangeSize;b=b||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(this.domNode){var c=this.domNode.parentNode;if(!(!c||c.nodeType!=1||!this.hasLayout()||c.style.visibility=="hidden"||c.style.display=="none")){var d=this._getPadBorder(),e=undefined,f;if(this._autoHeight){this.domNode.style.height="auto";this.viewsNode.style.height=
""}else if(typeof this.autoHeight=="number"){f=e=this._getHeaderHeight();f+=this.scroller.averageRowHeight*this.autoHeight;this.domNode.style.height=f+"px"}else if(this.domNode.clientHeight<=d.h)if(c==document.body)this.domNode.style.height=this.defaultHeight;else if(this.height)this.domNode.style.height=this.height;else this.fitTo="parent";if(b)a=b;if(a){dojo.marginBox(this.domNode,a);this.height=this.domNode.style.height;delete this.fitTo}else if(this.fitTo=="parent"){f=this._parentContentBoxHeight=
this._parentContentBoxHeight||dojo._getContentBox(c).h;this.domNode.style.height=Math.max(0,f)+"px"}c=dojo.some(this.views.views,function(g){return g.flexCells});if(!this._autoHeight&&(f||dojo._getContentBox(this.domNode).h)===0)this.viewsHeaderNode.style.display="none";else{this.viewsHeaderNode.style.display="block";if(!c&&e===undefined)e=this._getHeaderHeight()}if(c)e=undefined;this.adaptWidth();this.adaptHeight(e);this.postresize()}}},adaptWidth:function(){var a=!this.initialWidth&&this.autoWidth,
b=this.views.arrange(1,a?0:this.domNode.clientWidth||this.domNode.offsetWidth-this._getPadBorder().w);this.views.onEach("adaptWidth");if(a)this.domNode.style.width=b+"px"},adaptHeight:function(a){a=a===undefined?this._getHeaderHeight():a;var b=this._autoHeight?-1:Math.max(this.domNode.clientHeight-a,0)||0;this.views.onEach("setSize",[0,b]);this.views.onEach("adaptHeight");if(!this._autoHeight){var c=0,d=0,e=dojo.filter(this.views.views,function(f){if(f=f.hasHScrollbar())c++;else d++;return!f});c>
0&&d>0&&dojo.forEach(e,function(f){f.adaptHeight(true)})}this.scroller.windowHeight=this.autoHeight===true||b!=-1||typeof this.autoHeight=="number"&&this.autoHeight>=this.get("rowCount")?b:Math.max(this.domNode.clientHeight-a,0)},startup:function(){if(!this._started){this.inherited(arguments);this.autoRender&&this.render()}},render:function(){if(this.domNode)if(this._started)if(this.hasLayout()){this.update=this.defaultUpdate;this._render()}else this.scroller.init(0,this.keepRows,this.rowsPerPage)},
_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender()},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize()},postrender:function(){this.postresize();this.focus.initFocusView();dojo.setSelectable(this.domNode,this.selectable)},postresize:function(){if(this._autoHeight)this.viewsNode.style.height=Math.max(this.views.measureContent())+
"px"},renderRow:function(a,b){this.views.renderRow(a,b,this._skipRowRenormalize)},rowRemoved:function(a){this.views.rowRemoved(a)},invalidated:null,updating:false,beginUpdate:function(){this.invalidated=[];this.updating=true},endUpdate:function(){this.updating=false;var a=this.invalidated,b;if(a.all)this.update();else if(a.rowCount!=undefined)this.updateRowCount(a.rowCount);else for(b in a)this.updateRow(Number(b));this.invalidated=[]},defaultUpdate:function(){if(this.domNode)if(this.updating)this.invalidated.all=
true;else{this.lastScrollTop=this.scrollTop;this.prerender();this.scroller.invalidateNodes();this.setScrollTop(this.lastScrollTop);this.postrender()}},update:function(){this.render()},updateRow:function(a){a=Number(a);if(this.updating)this.invalidated[a]=true;else{this.views.updateRow(a);this.scroller.rowHeightChanged(a)}},updateRows:function(a,b){a=Number(a);b=Number(b);var c;if(this.updating)for(c=0;c<b;c++)this.invalidated[c+a]=true;else{for(c=0;c<b;c++)this.views.updateRow(c+a,this._skipRowRenormalize);
this.scroller.rowHeightChanged(a)}},updateRowCount:function(a){if(this.updating)this.invalidated.rowCount=a;else{this.rowCount=a;this._setAutoHeightAttr(this.autoHeight,true);this.layout.cells.length&&this.scroller.updateRowCount(a);this._resize();this.layout.cells.length&&this.setScrollTop(this.scrollTop)}},updateRowStyles:function(a){this.views.updateRowStyles(a)},getRowNode:function(a){if(this.focus.focusView&&!(this.focus.focusView instanceof dojox.grid._RowSelector))return this.focus.focusView.rowNodes[a];
else for(var b=0,c;c=this.views.views[b];b++)if(!(c instanceof dojox.grid._RowSelector))return c.rowNodes[a];return null},rowHeightChanged:function(a){this.views.renormalizeRow(a);this.scroller.rowHeightChanged(a)},fastScroll:true,delayScroll:false,scrollRedrawThreshold:dojo.isIE?100:50,scrollTo:function(a){if(this.fastScroll){var b=Math.abs(this.lastScrollTop-a);this.lastScrollTop=a;if(b>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=a;this.views.setScrollTop(a);
this._pendingScroll&&window.clearTimeout(this._pendingScroll);var c=this;this._pendingScroll=window.setTimeout(function(){delete c._pendingScroll;c.finishScrollJob()},200)}else this.setScrollTop(a)}else this.setScrollTop(a)},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop)},setScrollTop:function(a){this.scroller.scroll(this.views.setScrollTop(a))},scrollToRow:function(a){this.setScrollTop(this.scroller.findScrollTop(a)+1)},styleRowNode:function(a,b){b&&this.rows.styleRowNode(a,
b)},_mouseOut:function(){this.rows.setOverRow(-2)},getCell:function(a){return this.layout.cells[a]},setCellWidth:function(a,b){this.getCell(a).unitWidth=b},getCellName:function(a){return"Cell "+a.index},canSort:function(){},sort:function(){},getSortAsc:function(a){a=a==undefined?this.sortInfo:a;return Boolean(a>0)},getSortIndex:function(a){a=a==undefined?this.sortInfo:a;return Math.abs(a)-1},setSortIndex:function(a,b){var c=a+1;if(b!=undefined)c*=b?1:-1;else if(this.getSortIndex()==a)c=-this.sortInfo;
this.setSortInfo(c)},setSortInfo:function(a){if(this.canSort(a)){this.sortInfo=a;this.sort();this.update()}},doKeyEvent:function(a){a.dispatch="do"+a.type;this.onKeyEvent(a)},_dispatch:function(a,b){if(a in this)return this[a](b);return false},dispatchKeyEvent:function(a){this._dispatch(a.dispatch,a)},dispatchContentEvent:function(a){this.edit.dispatchEvent(a)||a.sourceView.dispatchContentEvent(a)||this._dispatch(a.dispatch,a)},dispatchHeaderEvent:function(a){a.sourceView.dispatchHeaderEvent(a)||
this._dispatch("doheader"+a.type,a)},dokeydown:function(a){this.onKeyDown(a)},doclick:function(a){if(a.cellNode)this.onCellClick(a);else this.onRowClick(a)},dodblclick:function(a){if(a.cellNode)this.onCellDblClick(a);else this.onRowDblClick(a)},docontextmenu:function(a){if(a.cellNode)this.onCellContextMenu(a);else this.onRowContextMenu(a)},doheaderclick:function(a){if(a.cellNode)this.onHeaderCellClick(a);else this.onHeaderClick(a)},doheaderdblclick:function(a){if(a.cellNode)this.onHeaderCellDblClick(a);
else this.onHeaderDblClick(a)},doheadercontextmenu:function(a){if(a.cellNode)this.onHeaderCellContextMenu(a);else this.onHeaderContextMenu(a)},doStartEdit:function(a,b){this.onStartEdit(a,b)},doApplyCellEdit:function(a,b,c){this.onApplyCellEdit(a,b,c)},doCancelEdit:function(a){this.onCancelEdit(a)},doApplyEdit:function(a){this.onApplyEdit(a)},addRow:function(){this.updateRowCount(this.get("rowCount")+1)},removeSelectedRows:function(){this.allItemsSelected?this.updateRowCount(0):this.updateRowCount(Math.max(0,
this.get("rowCount")-this.selection.getSelected().length));this.selection.clear()}});dojox.grid._Grid.markupFactory=function(a,b,c,d){var e=dojo,f=function(g){g=e.attr(g,"width")||"auto";if(g!="auto"&&g.slice(-2)!="em"&&g.slice(-1)!="%")g=parseInt(g,10)+"px";return g};if(!a.structure&&b.nodeName.toLowerCase()=="table"){a.structure=e.query("> colgroup",b).map(function(g){var h=e.attr(g,"span");h={noscroll:e.attr(g,"noscroll")=="true"?true:false,__span:h?parseInt(h,10):1,cells:[]};if(e.hasAttr(g,"width"))h.width=
f(g);return h});a.structure.length||a.structure.push({__span:Infinity,cells:[]});e.query("thead > tr",b).forEach(function(g,h){var i=0,j=0,k,l=null;e.query("> th",g).map(function(n){if(l){if(i>=k+l.__span){j++;k+=l.__span;l=a.structure[j]}}else{k=0;l=a.structure[0]}var m={name:e.trim(e.attr(n,"name")||n.innerHTML),colSpan:parseInt(e.attr(n,"colspan")||1,10),type:e.trim(e.attr(n,"cellType")||""),id:e.trim(e.attr(n,"id")||"")};i+=m.colSpan;var o=e.attr(n,"rowspan");if(o)m.rowSpan=o;if(e.hasAttr(n,"width"))m.width=
f(n);if(e.hasAttr(n,"relWidth"))m.relWidth=window.parseInt(dojo.attr(n,"relWidth"),10);if(e.hasAttr(n,"hidden"))m.hidden=e.attr(n,"hidden")=="true";d&&d(n,m);m.type=m.type?dojo.getObject(m.type):dojox.grid.cells.Cell;m.type&&m.type.markupFactory&&m.type.markupFactory(n,m);l.cells[h]||(l.cells[h]=[]);l.cells[h].push(m)})})}return new c(a,b)}})()}
if(!dojo._hasResource["dojox.grid.DataSelection"]){dojo._hasResource["dojox.grid.DataSelection"]=true;dojo.provide("dojox.grid.DataSelection");dojo.declare("dojox.grid.DataSelection",dojox.grid.Selection,{getFirstSelected:function(){var a=dojox.grid.Selection.prototype.getFirstSelected.call(this);if(a==-1)return null;return this.grid.getItem(a)},getNextSelected:function(a){a=this.grid.getItemIndex(a);a=dojox.grid.Selection.prototype.getNextSelected.call(this,a);if(a==-1)return null;return this.grid.getItem(a)},
getSelected:function(){for(var a=[],b=0,c=this.selected.length;b<c;b++)this.selected[b]&&a.push(this.grid.getItem(b));return a},addToSelection:function(a){if(this.mode!="none"){var b=null;b=typeof a=="number"||typeof a=="string"?a:this.grid.getItemIndex(a);dojox.grid.Selection.prototype.addToSelection.call(this,b)}},deselect:function(a){if(this.mode!="none"){var b=null;b=typeof a=="number"||typeof a=="string"?a:this.grid.getItemIndex(a);dojox.grid.Selection.prototype.deselect.call(this,b)}},deselectAll:function(a){var b=
null;if(a||typeof a=="number"){b=typeof a=="number"||typeof a=="string"?a:this.grid.getItemIndex(a);dojox.grid.Selection.prototype.deselectAll.call(this,b)}else this.inherited(arguments)}})}
if(!dojo._hasResource["dojox.grid.DataGrid"]){dojo._hasResource["dojox.grid.DataGrid"]=true;dojo.provide("dojox.grid.DataGrid");dojo.declare("dojox.grid.DataGrid",dojox.grid._Grid,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:false,_isLoading:false,postCreate:function(){this._pages=[];this._store_connects=
[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments)},createSelection:function(){this.selection=new dojox.grid.DataSelection(this)},get:function(a,b){if(b&&this.field=="_item"&&!this.fields)return b;else if(b&&this.fields){var c=[],d=this.grid.store;dojo.forEach(this.fields,function(e){c=c.concat(d.getValues(b,e))});return c}else if(!b&&typeof a==="string")return this.inherited(arguments);return!b?this.defaultValue:!this.field?
this.value:this.field=="_item"?b:this.grid.store.getValue(b,this.field)},_checkUpdateStatus:function(){if(this.updateDelay>0){var a=false;if(this._endUpdateDelay){clearTimeout(this._endUpdateDelay);delete this._endUpdateDelay;a=true}if(!this.updating){this.beginUpdate();a=true}if(a){var b=this;this._endUpdateDelay=setTimeout(function(){delete b._endUpdateDelay;b.endUpdate()},this.updateDelay)}}},_onSet:function(a){this._checkUpdateStatus();a=this.getItemIndex(a);a>-1&&this.updateRow(a)},_createItem:function(a,
b){var c=this._hasIdentity?this.store.getIdentity(a):dojo.toJson(this.query)+":idx:"+b+":sort:"+dojo.toJson(this.getSortProps());return this._by_idty[c]={idty:c,item:a}},_addItem:function(a,b,c){this._by_idx[b]=this._createItem(a,b);c||this.updateRow(b)},_onNew:function(a){this._checkUpdateStatus();var b=this.get("rowCount");this._addingItem=true;this.updateRowCount(b+1);this._addingItem=false;this._addItem(a,b);this.showMessage()},_onDelete:function(a){this._checkUpdateStatus();a=this._getItemIndex(a,
true);if(a>=0){this._pages=[];this._eop=this._bop=-1;var b=this._by_idx[a];this._by_idx.splice(a,1);delete this._by_idty[b.idty];this.updateRowCount(this.get("rowCount")-1);this.get("rowCount")===0&&this.showMessage(this.noDataMessage)}},_onRevert:function(){this._refresh()},setStore:function(a,b,c){this._setQuery(b,c);this._setStore(a);this._refresh(true)},setQuery:function(a,b){this._setQuery(a,b);this._refresh(true)},setItems:function(a){this.items=a;this._setStore(this.store);this._refresh(true)},
_setQuery:function(a,b){this.query=a;this.queryOptions=b||this.queryOptions},_setStore:function(a){this.store&&this._store_connects&&dojo.forEach(this._store_connects,function(c){dojo.forEach(c,dojo.disconnect)});if(this.store=a){a=this.store.getFeatures();var b=[];this._canEdit=!!a["dojo.data.api.Write"]&&!!a["dojo.data.api.Identity"];this._hasIdentity=!!a["dojo.data.api.Identity"];if(a["dojo.data.api.Notification"]&&!this.items){b.push(this.connect(this.store,"onSet","_onSet"));b.push(this.connect(this.store,
"onNew","_onNew"));b.push(this.connect(this.store,"onDelete","_onDelete"))}this._canEdit&&b.push(this.connect(this.store,"revert","_onRevert"));this._store_connects=b}},_onFetchBegin:function(a,b){if(this.scroller){if(this.rowCount!=a)if(b.isRender){this.scroller.init(a,this.keepRows,this.rowsPerPage);this.rowCount=a;this._setAutoHeightAttr(this.autoHeight,true);this._skipRowRenormalize=true;this.prerender();this._skipRowRenormalize=false}else this.updateRowCount(a);if(a)this.showMessage();else{this.views.render();
this._resize();this.showMessage(this.noDataMessage);this.focus.initFocusView()}}},_onFetchComplete:function(a,b){if(this.scroller){if(a&&a.length>0){dojo.forEach(a,function(c,d){this._addItem(c,b.start+d,true)},this);if(this._autoHeight)this._skipRowRenormalize=true;this.updateRows(b.start,a.length);if(this._autoHeight)this._skipRowRenormalize=false;if(b.isRender){this.setScrollTop(0);this.postrender()}else this._lastScrollTop&&this.setScrollTop(this._lastScrollTop)}delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=
false;this._isLoaded=true}this._pending_requests[b.start]=false}},_onFetchError:function(a,b){console.log(a);delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;this.showMessage(this.errorMessage)}this._pending_requests[b.start]=false;this.onFetchError(a,b)},onFetchError:function(){},_fetch:function(a,b){a=a||0;if(this.store&&!this._pending_requests[a]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage)}this._pending_requests[a]=
true;try{if(this.items){var c=this.items,d=this.store;this.rowsPerPage=c.length;var e={start:a,count:this.rowsPerPage,isRender:b};this._onFetchBegin(c.length,e);var f=0;dojo.forEach(c,function(i){d.isItemLoaded(i)||f++});if(f===0)this._onFetchComplete(c,e);else{var g=function(){f--;f===0&&this._onFetchComplete(c,e)};dojo.forEach(c,function(i){d.isItemLoaded(i)||d.loadItem({item:i,onItem:g,scope:this})},this)}}else this.store.fetch({start:a,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),
queryOptions:this.queryOptions,isRender:b,onBegin:dojo.hitch(this,"_onFetchBegin"),onComplete:dojo.hitch(this,"_onFetchComplete"),onError:dojo.hitch(this,"_onFetchError")})}catch(h){this._onFetchError(h,{start:a,count:this.rowsPerPage})}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoading=this._isLoaded=false},getItem:function(a){var b=this._by_idx[a];if(!b||b&&!b.item){this._preparePage(a);return null}return b.item},
getItemIndex:function(a){return this._getItemIndex(a,false)},_getItemIndex:function(a,b){if(!b&&!this.store.isItem(a))return-1;for(var c=this._hasIdentity?this.store.getIdentity(a):null,d=0,e=this._by_idx.length;d<e;d++){var f=this._by_idx[d];if(f&&(c&&f.idty==c||f.item===a))return d}return-1},filter:function(a,b){this.query=a;b&&this._clearData();this._fetch()},_getItemAttr:function(a,b){var c=this.getItem(a);return!c?this.fetchText:this.store.getValue(c,b)},_render:function(){if(this.domNode.parentNode){this.scroller.init(this.get("rowCount"),
this.keepRows,this.rowsPerPage);this.prerender();this._fetch(0,true)}},_requestsPending:function(a){return this._pending_requests[a]},_rowToPage:function(a){return this.rowsPerPage?Math.floor(a/this.rowsPerPage):a},_pageToRow:function(a){return this.rowsPerPage?this.rowsPerPage*a:a},_preparePage:function(a){if((a<this._bop||a>=this._eop)&&!this._addingItem){a=this._rowToPage(a);this._needPage(a);this._bop=a*this.rowsPerPage;this._eop=this._bop+(this.rowsPerPage||this.get("rowCount"))}},_needPage:function(a){if(!this._pages[a]){this._pages[a]=
true;this._requestPage(a)}},_requestPage:function(a){a=this._pageToRow(a);if(Math.min(this.rowsPerPage,this.get("rowCount")-a)>0){this._requests++;this._requestsPending(a)||setTimeout(dojo.hitch(this,"_fetch",a,false),1)}},getCellName:function(a){return a.field},_refresh:function(a){this._clearData();this._fetch(0,a)},sort:function(){this._lastScrollTop=this.scrollTop;this._refresh()},canSort:function(){return!this._isLoading},getSortProps:function(){var a=this.getCell(this.getSortIndex());if(a){var b=
a.sortDesc,c=!(this.sortInfo>0);return[{attribute:a.field,descending:typeof b=="undefined"?c:c?!b:b}]}else{if(this.sortFields)return this.sortFields;return null}},styleRowState:function(a){if(this.store&&this.store.getState){for(var b=this.store.getState(a.index),c="",d=0,e=["inflight","error","inserting"],f;f=e[d];d++)if(b[f]){c=" dojoxGridRow-"+f;break}a.customClasses+=c}},onStyleRow:function(a){this.styleRowState(a);this.inherited(arguments)},canEdit:function(){return this._canEdit},_copyAttr:function(a,
b){return this.store.getValue(this.getItem(a),b)},doStartEdit:function(a,b){this._cache[b]||(this._cache[b]=this._copyAttr(b,a.field));this.onStartEdit(a,b)},doApplyCellEdit:function(a,b,c){this.store.fetchItemByIdentity({identity:this._by_idx[b].idty,onItem:dojo.hitch(this,function(d){var e=this.store.getValue(d,c);if(typeof e=="number")a=isNaN(a)?a:parseFloat(a);else if(typeof e=="boolean")a=a=="true"?true:a=="false"?false:a;else if(e instanceof Date){e=new Date(a);a=isNaN(e.getTime())?a:e}this.store.setValue(d,
c,a);this.onApplyCellEdit(a,b,c)})})},doCancelEdit:function(a){if(this._cache[a]){this.updateRow(a);delete this._cache[a]}this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(a){this.onApplyEdit(a)},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var a=dojo.hitch(this,function(b){if(b.length){dojo.forEach(b,this.store.deleteItem,this.store);this.selection.clear()}});this.allItemsSelected?this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:a}):a(this.selection.getSelected())}}});
dojox.grid.DataGrid.cell_markupFactory=function(a,b,c){var d=dojo.trim(dojo.attr(b,"field")||"");if(d)c.field=d;c.field=c.field||c.name;if(d=dojo.trim(dojo.attr(b,"fields")||""))c.fields=d.split(",");a&&a(b,c)};dojox.grid.DataGrid.markupFactory=function(a,b,c,d){return dojox.grid._Grid.markupFactory(a,b,c,dojo.partial(dojox.grid.DataGrid.cell_markupFactory,d))}}
if(!dojo._hasResource["dojox.html._base"]){dojo._hasResource["dojox.html._base"]=true;dojo.provide("dojox.html._base");(function(){if(dojo.isIE)var a=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;var b=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g,c=dojox.html._adjustCssPaths=function(i,j){if(j&&i){if(a)j=j.replace(a,function(k,l,n,m,o){return l+(new dojo._Url(i,"./"+m)).toString()+
o});return j.replace(b,function(k,l,n,m,o,q){return n?'@import "'+(new dojo._Url(i,"./"+n)).toString()+'"'+q:"url("+(new dojo._Url(i,"./"+o)).toString()+")"+q})}},d=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi,e=dojox.html._adjustHtmlPaths=function(i,j){var k=i||"./";return j.replace(d,function(l,n,m,o,q,p,r,s){return n+(m?m+"="+o+(new dojo._Url(k,q)).toString()+o:"style="+p+c(k,r)+p)+s})},f=dojox.html._snarfStyles=function(i,j,k){k.attributes=[];return j.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,
function(l,n,m,o,q,p){l=(n||o||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");if(m)m=k.push(i?c(i,m):m);else{m=k.push('@import "'+p+'";');l=l.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,"")}if(l){l=l.split(/\s+/);p={};o=0;for(q=l.length;o<q;o++){n=l[o].split("=");p[n[0]]=n[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1")}k.attributes[m-1]=p}return""})},g=dojox.html._snarfScripts=function(i,j){function k(l){if(j.downloadRemote){l=l.replace(/&([a-z0-9#]+);/g,function(n,m){switch(m){case "amp":return"&";
case "gt":return">";case "lt":return"<";default:return m.charAt(0)=="#"?String.fromCharCode(m.substring(1)):"&"+m+";"}});dojo.xhrGet({url:l,sync:true,load:function(n){j.code+=n+";"},error:j.errBack})}}j.code="";i=i.replace(/<[!][-][-](.|\s){5,}?[-][-]>/g,function(l){return l.replace(/<(\/?)script\b/ig,"&lt;$1Script")});return i.replace(/<script\s*(?![^>]*type=['"]?(?:dojo\/|text\/html\b))(?:[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?)*>([\s\S]*?)<\/script>/gi,function(l,n,m,o){if(m)k(m);else j.code+=o;
return""})},h=dojox.html.evalInGlobal=function(i,j){j=j||dojo.doc.body;var k=j.ownerDocument.createElement("script");k.type="text/javascript";j.appendChild(k);k.text=i};dojo.declare("dojox.html._ContentSetter",[dojo.html._ContentSetter],{adjustPaths:false,referencePath:".",renderStyles:false,executeScripts:false,scriptHasHooks:false,scriptHookReplacement:null,_renderStyles:function(i){this._styleNodes=[];for(var j,k,l,n=this.node.ownerDocument,m=n.getElementsByTagName("head")[0],o=0,q=i.length;o<
q;o++){l=i[o];k=i.attributes[o];j=n.createElement("style");j.setAttribute("type","text/css");for(var p in k)j.setAttribute(p,k[p]);this._styleNodes.push(j);m.appendChild(j);if(j.styleSheet)j.styleSheet.cssText=l;else j.appendChild(n.createTextNode(l))}},empty:function(){this.inherited("empty",arguments);this._styles=[]},onBegin:function(){this.inherited("onBegin",arguments);var i=this.content,j=this._styles;if(dojo.isString(i)){if(this.adjustPaths&&this.referencePath)i=e(this.referencePath,i);if(this.renderStyles||
this.cleanContent)i=f(this.referencePath,i,j);if(this.executeScripts){var k=this;j={downloadRemote:true,errBack:function(l){k._onError.call(k,"Exec",'Error downloading remote script in "'+k.id+'"',l)}};i=g(i,j);this._code=j.code}}this.content=i},onEnd:function(){var i=this._code,j=this._styles;if(this._styleNodes&&this._styleNodes.length)for(;this._styleNodes.length;)dojo.destroy(this._styleNodes.pop());this.renderStyles&&j&&j.length&&this._renderStyles(j);if(this.executeScripts&&i){if(this.cleanContent)i=
i.replace(/(<\!--|(?:\/\/)?--\>|<!\[CDATA\[|\]\]>)/g,"");if(this.scriptHasHooks)i=i.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement);try{h(i,this.node)}catch(k){this._onError("Exec","Error eval script in "+this.id+", "+k.message,k)}}this.inherited("onEnd",arguments)},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&this._styleNodes.length)for(;this._styleNodes.length;)dojo.destroy(this._styleNodes.pop());delete this._styleNodes;dojo.mixin(this,dojo.getObject(this.declaredClass).prototype)}});
dojox.html.set=function(i,j,k){return k?(new dojox.html._ContentSetter(dojo.mixin(k,{content:j,node:i}))).set():dojo.html._setNodeContent(i,j,true)}})()}
if(!dojo._hasResource["dojox.layout.ContentPane"]){dojo._hasResource["dojox.layout.ContentPane"]=true;dojo.provide("dojox.layout.ContentPane");dojo.declare("dojox.layout.ContentPane",dijit.layout.ContentPane,{adjustPaths:false,cleanContent:false,renderStyles:false,executeScripts:true,scriptHasHooks:false,constructor:function(){this.ioArgs={};this.ioMethod=dojo.xhrGet},onExecError:function(){},_setContent:function(){var a=this._contentSetter;if(!(a&&a instanceof dojox.html._ContentSetter))a=this._contentSetter=
new dojox.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(b){b=this.onContentError(b);try{this.containerNode.innerHTML=b}catch(c){console.error("Fatal "+this.id+" could not change content due to "+c.message,c)}})});this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,
scriptHookReplacement:"dijit.byId('"+this.id+"')"};this.inherited("_setContent",arguments)}})}dojo.i18n._preloadLocalizations("hqfdojo.nls.hqfdojo",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nb","nl","nl-nl","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]);
